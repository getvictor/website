<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Developer Experience on Victor on Software</title><link>https://victoronsoftware.com/tags/developer-experience/</link><description>Recent content in Developer Experience on Victor on Software</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Wed, 26 Nov 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://victoronsoftware.com/tags/developer-experience/index.xml" rel="self" type="application/rss+xml"/><item><title>The modular monolith that wasn't</title><link>https://victoronsoftware.com/posts/modular-monolith-attempt/</link><pubDate>Wed, 26 Nov 2025 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/modular-monolith-attempt/</guid><description>&lt;img src="https://victoronsoftware.com/posts/modular-monolith-attempt/modular-monolith-attempt.png" alt="Featured image of post The modular monolith that wasn't" /&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="#our-web-app-architecture" &gt;Our web app architecture&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#evolutionary-architecture-proposal" &gt;Evolutionary architecture proposal&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#initial-implementation" &gt;Initial implementation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#first-compromise" &gt;First compromise&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#second-compromise" &gt;Second compromise&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#architectural-drift" &gt;Architectural drift&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#lessons-learned" &gt;Lessons learned&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A year ago, I embarked on a journey to improve the architecture of our large 500K+ line open source
&lt;a class="link" href="https://github.com/fleetdm/fleet" target="_blank" rel="noopener"
&gt;device management codebase&lt;/a&gt;, and things haven&amp;rsquo;t been quite as smooth as I&amp;rsquo;d hoped.&lt;/p&gt;
&lt;p&gt;Although I&amp;rsquo;ve been in tech for over 25 years, I haven&amp;rsquo;t worked on large web apps before. I&amp;rsquo;ve spent most of my time in
the semiconductor industry, working on several small software projects. However, I was aware of this going in, and I
wanted to learn more about software architecture so that I could enhance the developer experience.&lt;/p&gt;
&lt;p&gt;To expand my knowledge, I listened to software podcasts and read books such as &amp;ldquo;Fundamentals of Software Architecture,&amp;rdquo;
&amp;ldquo;Learning Domain-Driven Design,&amp;rdquo; and &amp;ldquo;Clean Architecture,&amp;rdquo; among others.&lt;/p&gt;
&lt;p&gt;The books largely agreed on &lt;a class="link" href="../software-modularity" &gt;the benefits of modularity and cohesion&lt;/a&gt;. Software should be
modular because that makes each module less complex, and hence easier to understand and maintain. The software inside a
module should be cohesive. In other words, the functionality of a module should belong together. Modularity is the best
way to scale a large software project. Then, engineers can focus on their own work in their respective modules and
minimize merge conflicts with other engineers.&lt;/p&gt;
&lt;p&gt;This all made sense to me, and it seemed like a well-trodden path by other software projects, especially those that
transitioned from a monolith to microservices. In our case, we did not plan to transition to microservices because our
customers required us to run our server on-premises, and we wanted to keep deployments simple. However, we could
transition to a more modular architecture, known as a modular monolith.&lt;/p&gt;
&lt;h2 id="our-web-app-architecture"&gt;&lt;a href="#our-web-app-architecture" class="header-anchor"&gt;&lt;/a&gt;Our web app architecture
&lt;/h2&gt;&lt;p&gt;Our web app is a 10-year-old monolith. It&amp;rsquo;s a Go REST API built on top of a MySQL database.&lt;/p&gt;
&lt;pre class="mermaid"&gt;
flowchart TD
A[&amp;#34;API layer&amp;lt;br&amp;gt;(controllers + service)&amp;#34;] --&amp;gt; B[&amp;#34;Persistence layer&amp;lt;br&amp;gt;(datastore)&amp;#34;]
B --&amp;gt; C[(MySQL Database)]
&lt;/pre&gt;
&lt;p&gt;The above diagram is a simplified core of our application. We have a single Go package for the API layer, which includes
controllers (Go handlers) and service (business logic). The service layer calls the persistence layer, which constructs
the SQL queries and executes them against our MySQL database. The API layer is one huge Go package, and the persistence
layer is another separate huge Go package.&lt;/p&gt;
&lt;h2 id="evolutionary-architecture-proposal"&gt;&lt;a href="#evolutionary-architecture-proposal" class="header-anchor"&gt;&lt;/a&gt;Evolutionary architecture proposal
&lt;/h2&gt;&lt;p&gt;At one of our engineering all-hands meetings, I gave a presentation about how we could
&lt;a class="link" href="../scaling-codebase-evolutionary-architecture" &gt;scale our codebase to a more modular architecture&lt;/a&gt;. One of the core
ideas of the presentation was that when working on a new feature, we could create a new module, a vertical slice, that
would mirror the structure of the legacy code. The approach would be similar to microservices, but still within a single
compiled binary.&lt;/p&gt;
&lt;pre class="mermaid"&gt;
flowchart TD
subgraph Legacy code
direction TB
A[&amp;#34;API layer&amp;lt;br&amp;gt;(controllers + service)&amp;#34;] --&amp;gt; B[&amp;#34;Persistence layer&amp;lt;br&amp;gt;(datastore)&amp;#34;]
B --&amp;gt; C[(MySQL database)]
end
subgraph New feature
direction TB
D[&amp;#34;API layer&amp;lt;br&amp;gt;(controllers + service)&amp;#34;] --&amp;gt; E[&amp;#34;Persistence layer&amp;lt;br&amp;gt;(datastore)&amp;#34;]
E --&amp;gt; F[(MySQL database)]
end
&lt;/pre&gt;
&lt;p&gt;The presentation seemed to go well, with general agreement. One comment was along the lines of &amp;ldquo;won&amp;rsquo;t we have to redo
the architecture every time we reorganize our team structure?&amp;rdquo; The answer is maybe. The vertical slices must make sense
from a product perspective. Also, the vertical slices can be small enough that a single team can own multiple slices. If
an engineering team splits into two, they can split their slices between them. If the team had one big slice, then it
makes sense to split that slice into two or more smaller slices.&lt;/p&gt;
&lt;h2 id="initial-implementation"&gt;&lt;a href="#initial-implementation" class="header-anchor"&gt;&lt;/a&gt;Initial implementation
&lt;/h2&gt;&lt;p&gt;We started working on a new feature, which seemed like an ideal candidate to try the new approach. The feature supported
Android MDM (Mobile Device Management). It would be a new platform for us with a new API. I created the new structure
for the Android feature. I created new packages in a dedicated directory. Most of the work was untangling the common
parts so they could be reused between the legacy code and the new feature.&lt;/p&gt;
&lt;p&gt;I put up the PR, and it just sat there. Our guidance is to review PRs within 24 hours, but no one wanted to touch this
one.&lt;/p&gt;
&lt;p&gt;In retrospect, I should have done a better job communicating to the team that I was actually going to do what I
proposed. Some engineers felt surprised by the changes and didn&amp;rsquo;t feel like they had a voice in the approach.&lt;/p&gt;
&lt;h2 id="first-compromise"&gt;&lt;a href="#first-compromise" class="header-anchor"&gt;&lt;/a&gt;First compromise
&lt;/h2&gt;&lt;p&gt;Having two MySQL schemas made our migrations more complicated. It also made it impossible to JOIN tables across schemas.
It would have made our deployments more complicated, even if the schemas were both in the same database. With the lack
of traction on my PR, I decided to take a step back and unsplit the MySQL layer.&lt;/p&gt;
&lt;pre class="mermaid"&gt;
flowchart TD
subgraph New feature
direction TB
D[&amp;#34;API layer&amp;lt;br&amp;gt;(controllers + service)&amp;#34;] --&amp;gt; E[&amp;#34;Persistence layer&amp;lt;br&amp;gt;(datastore)&amp;#34;]
end
subgraph Legacy code
direction TB
A[&amp;#34;API layer&amp;lt;br&amp;gt;(controllers + service)&amp;#34;] --&amp;gt; B[&amp;#34;Persistence layer&amp;lt;br&amp;gt;(datastore)&amp;#34;]
end
E --&amp;gt; C[(MySQL database)]
B --&amp;gt; C
&lt;/pre&gt;
&lt;p&gt;After several lengthy conversations with the PR reviewer and a few minor adjustments, we merged the PR.&lt;/p&gt;
&lt;h2 id="second-compromise"&gt;&lt;a href="#second-compromise" class="header-anchor"&gt;&lt;/a&gt;Second compromise
&lt;/h2&gt;&lt;p&gt;Around the same time, we instituted an ADR (Architecture Decision Record) process. I retroactively wrote two ADRs, one
to split the API layer and one to split the persistence layer for the Android feature. The
&lt;a class="link" href="https://github.com/fleetdm/fleet/pull/29850" target="_blank" rel="noopener"
&gt;ADR to split the API layer was approved&lt;/a&gt;, but the
&lt;a class="link" href="https://github.com/fleetdm/fleet/pull/29853" target="_blank" rel="noopener"
&gt;ADR to split the persistence layer was rejected&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Engineers voiced their concerns, which included:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;We&amp;rsquo;ve had this structure for a while, and people know how it works. Why do we need this change?&lt;/li&gt;
&lt;li&gt;With separate persistence layers, it will be much harder to do DB transactions across the two layers.&lt;/li&gt;
&lt;li&gt;This change is too big. Let&amp;rsquo;s try something incremental, like splitting the API layer only.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So, I reverted the persistence layer changes.&lt;/p&gt;
&lt;pre class="mermaid"&gt;
flowchart TD
subgraph New feature
D[&amp;#34;API layer&amp;lt;br&amp;gt;(controllers + service)&amp;#34;]
end
subgraph Legacy code
A[&amp;#34;API layer&amp;lt;br&amp;gt;(controllers + service)&amp;#34;]
end
D --&amp;gt; B[&amp;#34;Persistence layer&amp;lt;br&amp;gt;(datastore)&amp;#34;]
A --&amp;gt; B
B --&amp;gt; C[(MySQL database)]
&lt;/pre&gt;
&lt;h2 id="architectural-drift"&gt;&lt;a href="#architectural-drift" class="header-anchor"&gt;&lt;/a&gt;Architectural drift
&lt;/h2&gt;&lt;p&gt;I moved to another product team, where I worked on other parts of the codebase, and other engineers continued to work on
the Android part of the codebase. Without architectural oversight and strong commitment from the engineering team, the
Android feature seeped into the legacy code.&lt;/p&gt;
&lt;pre class="mermaid"&gt;
flowchart TD
subgraph &amp;#34;API layer&amp;#34;
D[&amp;#34;Android&amp;lt;br&amp;gt;(controllers + service)&amp;#34;]
E[&amp;#34;Legacy + some Android&amp;lt;br&amp;gt;(controllers + service)&amp;#34;]
end
E --&amp;gt; B[&amp;#34;Persistence layer&amp;lt;br&amp;gt;(datastore)&amp;#34;]
D --&amp;gt; B
B --&amp;gt; C[(MySQL database)]
E --&amp;gt; D
&lt;/pre&gt;
&lt;p&gt;So, what do we have now? Certainly, at a high level, the codebase doesn&amp;rsquo;t appear to be very modular. Arguably, it is
even more complex and harder to maintain than it was before. There is no clear separation between the legacy code and
the Android feature.&lt;/p&gt;
&lt;p&gt;But it&amp;rsquo;s not all bad news. Some positives remain:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Most Android-specific controllers are in a separate package, which makes them easier to change and reason about.&lt;/li&gt;
&lt;li&gt;Some Android-specific code is now isolated, which accelerates development and testing within that package.&lt;/li&gt;
&lt;li&gt;We broke apart some common code out of the legacy package, which makes it easier to create new API layers.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="lessons-learned"&gt;&lt;a href="#lessons-learned" class="header-anchor"&gt;&lt;/a&gt;Lessons learned
&lt;/h2&gt;&lt;p&gt;We will continue our efforts to modularize and further improve our architecture. Let&amp;rsquo;s sum up what we&amp;rsquo;ve learned from
our first attempt.&lt;/p&gt;
&lt;h3 id="team-buy-in"&gt;&lt;a href="#team-buy-in" class="header-anchor"&gt;&lt;/a&gt;Team buy-in
&lt;/h3&gt;&lt;p&gt;We need a strong commitment from the engineers and managers to the new architecture and the specific architectural split
we&amp;rsquo;re proposing. Without this commitment, it is easy for engineers to revert to old patterns and begin making
architectural compromises. Without a manager&amp;rsquo;s commitment, it is easy for the manager to encourage engineers to complete
the user story as quickly as possible without regard for the architecture.&lt;/p&gt;
&lt;h3 id="better-architectural-governance"&gt;&lt;a href="#better-architectural-governance" class="header-anchor"&gt;&lt;/a&gt;Better architectural governance
&lt;/h3&gt;&lt;p&gt;We need to have automated dependency checks to make sure developers aren&amp;rsquo;t adding new dependencies that go against the
new architecture. We plan on investigating &lt;a class="link" href="https://github.com/arch-go/arch-go" target="_blank" rel="noopener"
&gt;arch-go&lt;/a&gt; in the future. Since we don&amp;rsquo;t
see many off-the-shelf tools for architectural governance of Go projects, we&amp;rsquo;ll have to build our own as well.&lt;/p&gt;
&lt;p&gt;In addition to automated checks, it makes sense for the architect to regularly review the codebase as a whole and
related PRs to catch any deviations from the architecture. With today&amp;rsquo;s AI agents, it should be straightforward to
create a prompt for the AI agent to perform this analysis.&lt;/p&gt;
&lt;h3 id="controllers-must-access-multiple-services"&gt;&lt;a href="#controllers-must-access-multiple-services" class="header-anchor"&gt;&lt;/a&gt;Controllers must access multiple services
&lt;/h3&gt;&lt;p&gt;We can&amp;rsquo;t assume that a controller only needs to access our service layer. Sometimes, a controller needs to access
multiple services. In our case, an Android controller may need to access both the legacy service layer and the new
Android service. And similarly for a legacy controller. Hence, both the legacy and the new API layers must have
interface handles to each other.&lt;/p&gt;
&lt;p&gt;The important thing is to assign ownership of the API endpoint to a specific module and a specific team. Although the
API endpoint may primarily serve as an orchestrator, it is essential to determine which module it belongs to.&lt;/p&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../software-modularity/" &gt;6 business benefits of software modularity and cohesion&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Understand why modularity matters for scaling teams and reducing complexity in growing codebases.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../code-complexity-metrics/" &gt;Top code complexity metrics every software dev should know&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Ways to measure and track code complexity to improve maintainability.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="watch-us-discuss-our-modular-monolith-attempt"&gt;&lt;a href="#watch-us-discuss-our-modular-monolith-attempt" class="header-anchor"&gt;&lt;/a&gt;Watch us discuss our modular monolith attempt
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/lrM3conC-L8"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>Multitasking with AI agents: When it works and when it fails</title><link>https://victoronsoftware.com/posts/multitasking-with-ai-agents/</link><pubDate>Tue, 19 Aug 2025 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/multitasking-with-ai-agents/</guid><description>&lt;img src="https://victoronsoftware.com/posts/multitasking-with-ai-agents/multitasking-with-ai-agents-headline.png" alt="Featured image of post Multitasking with AI agents: When it works and when it fails" /&gt;&lt;p&gt;AI agents are changing the way we work. They can handle coding, debugging, and research tasks while we focus on other
things. But just because an AI can work in parallel does not mean you should. The real question is: when is it worth
multitasking, and when will it hurt your results?&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m a firm believer that humans cannot multitask. Every popular psychology book I have read, and I have read quite a
few, says that humans cannot multitask, even though many believe they can. Studies show that when humans do two tasks in
series, they finish faster and with higher quality than when switching between them.&lt;/p&gt;
&lt;p&gt;But that&amp;rsquo;s not the whole story. Humans can multitask in particular situations. For example, when driving a car and
talking on the phone (with a Bluetooth headset, of course), we are clearly multitasking. Would our driving and
conversational quality be better if we did these tasks separately? Probably. But the difference, depending on the
person, might not be that big. Driving is habitual for many people, so we can pair it with another cognitive task
without dramatically dropping performance.&lt;/p&gt;
&lt;p&gt;What about throwing AI agents in the mix? It is Wednesday morning. You told your AI agent to do a job. You hope it will
only take one minute, but it might take up to 15 minutes. What do you do now?&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; We will use the term &amp;ldquo;task&amp;rdquo; to refer to work a human does, and &amp;ldquo;job&amp;rdquo; to refer to work an AI agent does.&lt;/p&gt;
&lt;h2 id="task-switching"&gt;&lt;a href="#task-switching" class="header-anchor"&gt;&lt;/a&gt;Task switching
&lt;/h2&gt;&lt;p&gt;Research from the American Psychological Association suggests that switching between tasks can cost up to 40% of
someone&amp;rsquo;s productive time. A University of Michigan study found it takes an average of 23 minutes and 15 seconds to
fully return to a task after an interruption. Even brief mental blocks from shifting between tasks can cost significant
time.&lt;/p&gt;
&lt;p&gt;So, if your AI agent is running, can you do something else while waiting to check the results? If you switch to another
task, such as looking at another bug or feature, you will spend time ramping up on that second task, and then even more
time switching back to the first. Yes, people do it all the time, but you will not be fully engaged in either task. You
are more likely to miss something important, like the agent using the wrong method or skipping a critical feature
requirement. And yes, that happens in real life.&lt;/p&gt;
&lt;h2 id="when-not-to-task-switch"&gt;&lt;a href="#when-not-to-task-switch" class="header-anchor"&gt;&lt;/a&gt;When not to task switch
&lt;/h2&gt;&lt;p&gt;Avoid switching when working on a significant, important feature or bug. You need your full mental capacity in the
context of that task to deliver the best software.&lt;/p&gt;
&lt;p&gt;Instead of switching, consider these options.&lt;/p&gt;
&lt;h3 id="plan-ahead"&gt;&lt;a href="#plan-ahead" class="header-anchor"&gt;&lt;/a&gt;Plan ahead
&lt;/h3&gt;&lt;p&gt;After the agent completes its job, what will you do? Will you check the results and then start the next phase? Is that
next phase directly related to the current one? Can you spin up a parallel environment and have another agent start the
next step?&lt;/p&gt;
&lt;p&gt;If waiting for the agent is your bottleneck, parallelize jobs or ensure the agent is always working on something useful.
Keeping the agent busy may mean reviewing the agent&amp;rsquo;s work while it jumps ahead and works on the next phase.&lt;/p&gt;
&lt;h3 id="make-sure-the-agent-is-efficient"&gt;&lt;a href="#make-sure-the-agent-is-efficient" class="header-anchor"&gt;&lt;/a&gt;Make sure the agent is efficient
&lt;/h3&gt;&lt;p&gt;Watch the agent&amp;rsquo;s progress to make sure it is not doing unnecessary work. If it is trying to find information you
already know, stop it and provide the answer. If you do not know the answer, you may find it faster than the agent.&lt;/p&gt;
&lt;p&gt;For example, as of August 2025, Claude Code does not create a vector database of the codebase, making it slower for
certain queries about the codebase. For example, asking where a specific feature is tested. You might ask Cursor, which
does a semantic index of the codebase, to find the answer faster and then feed the answer back to Claude Code.&lt;/p&gt;
&lt;p&gt;Agents can go off track. Many use brute-force approaches, repeatedly trying solutions until something works, even if the
&amp;ldquo;working solution&amp;rdquo; is not optimal. By monitoring progress, you can redirect the agent when needed.&lt;/p&gt;
&lt;h3 id="prepare-for-manual-qa"&gt;&lt;a href="#prepare-for-manual-qa" class="header-anchor"&gt;&lt;/a&gt;Prepare for manual QA
&lt;/h3&gt;&lt;p&gt;Once the feature is ready for manual testing, is your environment ready? Do you need to populate database data, deploy
other services, or sign up for cloud accounts? Prepare these ahead of time.&lt;/p&gt;
&lt;h3 id="fix-ci-and-code-review-issues"&gt;&lt;a href="#fix-ci-and-code-review-issues" class="header-anchor"&gt;&lt;/a&gt;Fix CI and code review issues
&lt;/h3&gt;&lt;p&gt;Commit regularly, ideally after each agent job run. This lets you run CI checks and even have AI review your code. Fix
any lint issues or failing tests, and address review feedback early.&lt;/p&gt;
&lt;h2 id="when-to-task-switch"&gt;&lt;a href="#when-to-task-switch" class="header-anchor"&gt;&lt;/a&gt;When to task switch
&lt;/h2&gt;&lt;p&gt;Task switching is fine for small, low-risk work, such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Fixing a single failing unit test&lt;/li&gt;
&lt;li&gt;Resolving a simple bug&lt;/li&gt;
&lt;li&gt;Addressing straightforward code review comments&lt;/li&gt;
&lt;li&gt;Minor refactoring&lt;/li&gt;
&lt;li&gt;Adding logging statements&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These tasks require little mental setup, so switching costs are minimal. Any quality issues are easier to spot.&lt;/p&gt;
&lt;h2 id="work-modes-single-tasking-vs-multitasking"&gt;&lt;a href="#work-modes-single-tasking-vs-multitasking" class="header-anchor"&gt;&lt;/a&gt;Work modes: single-tasking vs multitasking
&lt;/h2&gt;&lt;p&gt;Categorize tasks before starting them to decide whether they need full attention or can run in parallel.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Aspect&lt;/th&gt;
&lt;th&gt;üéØ Single-Task Mode&lt;/th&gt;
&lt;th&gt;üîÑ Multitask Mode&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Focus Level&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;üß† Deep focus required&lt;/td&gt;
&lt;td&gt;üòå Light mental load&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Task Types&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;üèóÔ∏è Complex features&lt;/td&gt;
&lt;td&gt;üîß Minor refactoring&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;üö® Production bug fixes&lt;/td&gt;
&lt;td&gt;üìù Code review comments&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;üèõÔ∏è Architecture decisions&lt;/td&gt;
&lt;td&gt;‚úÖ Simple bug fixes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;‚ö° Performance optimization&lt;/td&gt;
&lt;td&gt;üìä Adding logging&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Context Switching&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;‚ùå Avoid at all costs&lt;/td&gt;
&lt;td&gt;‚úÖ Switch freely&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Agent Strategy&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;üé™ One or more agents on same task&lt;/td&gt;
&lt;td&gt;üé≠ Multiple agents on different tasks&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Monitoring&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;üëÅÔ∏è Watch progress closely&lt;/td&gt;
&lt;td&gt;üì± Check periodically&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Risk Level&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;‚ö†Ô∏è High - mistakes costly&lt;/td&gt;
&lt;td&gt;üü¢ Low - easy to spot issues&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Mental Setup&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;üèîÔ∏è Significant ramp-up time&lt;/td&gt;
&lt;td&gt;üèÉ Quick to start&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Quality Impact&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;üíé Quality critical&lt;/td&gt;
&lt;td&gt;üëç Quality easier to verify&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Best For&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;üöÄ Mission-critical work&lt;/td&gt;
&lt;td&gt;üìã Routine repeatable work&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Single-task mode&lt;/strong&gt; is for deep-focus work. Run one or more AI agent jobs focused on this task. Monitor progress while
planning ahead or preparing test environments. Keep your context intact.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Multitask mode&lt;/strong&gt; is for routine, well-defined work. Run multiple AI agent jobs in parallel across different branches.
Switch freely between these smaller tasks as agents finish.&lt;/p&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../ai-for-software-developers/" &gt;AI for software developers&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Explore how AI tools are changing developer workflows and when to embrace AI assistance versus maintaining human
control.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../will-ai-agents-replace-developers/" &gt;Will AI agents replace software developers?&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Understand the evolving role of developers in an AI-driven world and why human judgment remains irreplaceable.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="watch-us-discuss-multitasking-with-ai-agents"&gt;&lt;a href="#watch-us-discuss-multitasking-with-ai-agents" class="header-anchor"&gt;&lt;/a&gt;Watch us discuss multitasking with AI agents
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/HSDrhYvE3g0"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>Why transparency beats everything else in engineering</title><link>https://victoronsoftware.com/posts/engineering-transparency/</link><pubDate>Tue, 12 Aug 2025 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/engineering-transparency/</guid><description>&lt;img src="https://victoronsoftware.com/posts/engineering-transparency/engineering-transparency-headline.png" alt="Featured image of post Why transparency beats everything else in engineering" /&gt;&lt;p&gt;Have you ever felt like you&amp;rsquo;re working in a fog? Where everyone&amp;rsquo;s busy, everyone&amp;rsquo;s trying, but somehow nothing important
gets done? I&amp;rsquo;ve been there. The problem isn&amp;rsquo;t the people. It&amp;rsquo;s the system. And specifically, it&amp;rsquo;s the lack of
transparency and accountability.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="#taking-action-what-you-can-do-when-you-have-no-visibility" &gt;Taking action: What you can do when you have no visibility&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#key-takeaways" &gt;Key takeaways&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="the-weekly-dance-of-non-delivery"&gt;&lt;a href="#the-weekly-dance-of-non-delivery" class="header-anchor"&gt;&lt;/a&gt;The weekly dance of non-delivery
&lt;/h2&gt;&lt;p&gt;Let me take you back a couple of years. I was a tech lead at a large company, working on a project that depended on
another upstream engineering team. Every week, we&amp;rsquo;d have a joint meeting with both teams. And every week, I&amp;rsquo;d ask the
same question, trying to keep my tone professional:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;Hey Alex, any update on that component we need from your side?&amp;rdquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And every week, Alex would say:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;Ah, I meant to, but I got pulled into something else. I&amp;rsquo;ll try to get to it this week.&amp;rdquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;At first, I gave it the benefit of the doubt. Stuff happens. Priorities shift.&lt;/p&gt;
&lt;p&gt;But then it kept happening. Two weeks, three, four. Same story. No progress. No accountability. No one stepping in.&lt;/p&gt;
&lt;p&gt;I was &lt;em&gt;boiling&lt;/em&gt; inside.&lt;/p&gt;
&lt;p&gt;I kept thinking:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;Why is no one telling Alex to work on this? Why don&amp;rsquo;t we have a project manager? Who&amp;rsquo;s making the call on what really
matters?&amp;rdquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;We technically had a roadmap. But let&amp;rsquo;s be honest: people didn&amp;rsquo;t actually take it seriously. If something couldn&amp;rsquo;t get
done, it quietly disappeared from the plan. Deadlines slipped. Commitments evaporated. Meanwhile, I had to face my boss
again with another non-update.&lt;/p&gt;
&lt;h2 id="years-in-the-fog"&gt;&lt;a href="#years-in-the-fog" class="header-anchor"&gt;&lt;/a&gt;Years in the fog
&lt;/h2&gt;&lt;p&gt;The frustration started eating at me. I&amp;rsquo;d sit in those meetings, and darker thoughts would creep in:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;How did Alex even get promoted? He can&amp;rsquo;t deliver anything.&amp;rdquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;Why am I killing myself here when clearly no one cares? Maybe I should take off for the rest of the day.&amp;rdquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;Maybe I should just get a side gig? At least someone would pay me for work that actually ships.&amp;rdquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This situation wasn&amp;rsquo;t just a few bad weeks. It was years of my life, years of pretending everything was fine when it
wasn&amp;rsquo;t, years of wondering if this was just how companies worked.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;d go home exhausted, not from hard work, but from the sheer weight of organizational dysfunction. My wife would ask
how my day was, and I&amp;rsquo;d just shrug. What was there to say? Another day, another meeting, another non-update.&lt;/p&gt;
&lt;h2 id="the-moment-of-clarity"&gt;&lt;a href="#the-moment-of-clarity" class="header-anchor"&gt;&lt;/a&gt;The moment of clarity
&lt;/h2&gt;&lt;p&gt;Then I switched companies.&lt;/p&gt;
&lt;p&gt;And everything changed.&lt;/p&gt;
&lt;p&gt;In my new company, everyone has access to clear company priorities: what we are building, why it is important, which
customer requests are critical, and who our key customers are. Engineers are empowered to make their own decisions based
on this shared context. If someone can&amp;rsquo;t deliver, they openly communicate why and offer alternatives grounded in the
company&amp;rsquo;s priorities.&lt;/p&gt;
&lt;p&gt;There is no hiding or pretending. Just reality, laid bare.&lt;/p&gt;
&lt;p&gt;That&amp;rsquo;s when it hit me. The problem at my old company wasn&amp;rsquo;t Alex. He wasn&amp;rsquo;t slacking off. He was overwhelmed, like the
rest of us. Everyone was reacting to the noise instead of following the signal. No one had the authority or clarity to
say what actually mattered.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;This wasn&amp;rsquo;t a communication problem. It was a trust and transparency problem.&lt;/strong&gt; And the absence of that created a
frustrating, demoralizing fog. Everyone thought they were doing the right thing, yet nothing moved forward.&lt;/p&gt;
&lt;p&gt;That experience changed my understanding of leadership.&lt;/p&gt;
&lt;p&gt;Because here&amp;rsquo;s the truth: Without shared visibility and shared accountability, even the best engineers will lose
direction. Polite status meetings won&amp;rsquo;t save you from a broken system.&lt;/p&gt;
&lt;p&gt;As leaders, our job isn&amp;rsquo;t just to set direction. It&amp;rsquo;s to make the invisible visible and to make sure it matters.&lt;/p&gt;
&lt;pre class="mermaid"&gt;
---
title: The hidden work iceberg
---
graph TD
subgraph Above[&amp;#34;üåä Above water&amp;lt;br/&amp;gt;What management sees&amp;#34;]
direction TB
Spacer1[&amp;#34; &amp;#34;]
A1[&amp;#34;Weekly Status Updates&amp;lt;br/&amp;gt;‚úì &amp;#39;Working on it&amp;#39;&amp;#34;]
A2[&amp;#34;Sprint Deliverables&amp;lt;br/&amp;gt;‚úì &amp;#39;In progress&amp;#39;&amp;#34;]
A3[&amp;#34;Meeting Attendance&amp;lt;br/&amp;gt;‚úì &amp;#39;Present&amp;#39;&amp;#34;]
Spacer1 -.-&amp;gt; A1
Spacer1 -.-&amp;gt; A2
Spacer1 -.-&amp;gt; A3
end
subgraph Below[&amp;#34;üßä Below water&amp;lt;br/&amp;gt;The reality&amp;#34;]
direction TB
subgraph Row1[&amp;#34; &amp;#34;]
B1[&amp;#34;‚ùå Blocked by&amp;lt;br/&amp;gt;dependencies&amp;#34;]
B2[&amp;#34;‚ùå Unclear&amp;lt;br/&amp;gt;priorities&amp;#34;]
B3[&amp;#34;‚ùå Context&amp;lt;br/&amp;gt;switching&amp;#34;]
end
subgraph Row2[&amp;#34; &amp;#34;]
B4[&amp;#34;‚ùå Waiting for&amp;lt;br/&amp;gt;decisions&amp;#34;]
B5[&amp;#34;‚ùå Duplicate&amp;lt;br/&amp;gt;work&amp;#34;]
B6[&amp;#34;‚ùå Technical&amp;lt;br/&amp;gt;debt&amp;#34;]
end
subgraph Row3[&amp;#34; &amp;#34;]
B7[&amp;#34;‚ùå No authority&amp;lt;br/&amp;gt;to say no&amp;#34;]
B8[&amp;#34;‚ùå Overwhelmed&amp;lt;br/&amp;gt;with requests&amp;#34;]
end
end
Above -.-&amp;gt;|&amp;#34;Without Transparency&amp;#34;| Below
style Above fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
style Below fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000
style Row1 fill:none,stroke:none
style Row2 fill:none,stroke:none
style Row3 fill:none,stroke:none
style Spacer1 fill:none,stroke:none
&lt;/pre&gt;
&lt;h2 id="taking-action-what-you-can-do-when-you-have-no-visibility"&gt;&lt;a href="#taking-action-what-you-can-do-when-you-have-no-visibility" class="header-anchor"&gt;&lt;/a&gt;Taking action: What you can do when you have no visibility
&lt;/h2&gt;&lt;p&gt;At the first level, you need to be aligned with your manager. You need to know your manager&amp;rsquo;s priorities, which means
knowing what your manager knows. You should strive to know about 90% of what your manager knows.&lt;/p&gt;
&lt;p&gt;If your manager attends cross-functional meetings with other managers where priorities and goals are discussed, you need
to know what&amp;rsquo;s happening at those meetings. There are a few ways to do that:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Watch the recordings of those meetings. If they&amp;rsquo;re not recorded, ask if they could be.&lt;/li&gt;
&lt;li&gt;Read the meeting notes from those meetings. Could your company employ an AI notetaker?&lt;/li&gt;
&lt;li&gt;Ask your manager for a readout from those meetings in your weekly one-on-one.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Once you feel like you&amp;rsquo;re on the same page as your manager, repeat the process with your manager&amp;rsquo;s manager. If you&amp;rsquo;re
not meeting regularly with your manager&amp;rsquo;s manager, ask for a skip-level meeting and afterwards extend the ask for a
recurring skip-level meeting.&lt;/p&gt;
&lt;h3 id="how-to-ask-for-more-visibility"&gt;&lt;a href="#how-to-ask-for-more-visibility" class="header-anchor"&gt;&lt;/a&gt;How to ask for more visibility
&lt;/h3&gt;&lt;p&gt;Here&amp;rsquo;s a sample script you can adapt:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Hey [Manager], I&amp;rsquo;ve been thinking about how I can be more effective in my role and better support our team&amp;rsquo;s goals.
I&amp;rsquo;d love to have more visibility into the broader priorities and context that drive our work.&lt;/p&gt;
&lt;p&gt;Specifically, I&amp;rsquo;m interested in:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Understanding the key decisions and trade-offs being discussed in cross-functional meetings&lt;/li&gt;
&lt;li&gt;Getting insight into upcoming priorities that might affect our team&amp;rsquo;s roadmap&lt;/li&gt;
&lt;li&gt;Learning about dependencies or blockers other teams are facing that might impact us&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Would it be possible to either:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Get access to recordings/notes from your planning meetings, or&lt;/li&gt;
&lt;li&gt;Have a brief weekly sync where you share the key takeaways?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I believe having this context would help me make better day-to-day decisions, spot potential issues earlier, and
contribute more strategically to our team&amp;rsquo;s success.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="key-takeaways"&gt;&lt;a href="#key-takeaways" class="header-anchor"&gt;&lt;/a&gt;Key takeaways
&lt;/h2&gt;&lt;p&gt;Looking back on my journey from frustration to clarity, here are the lessons that transformed how I work:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;It&amp;rsquo;s not a communication problem, it&amp;rsquo;s a trust and transparency problem.&lt;/strong&gt; We had meetings. We had updates. What we
didn&amp;rsquo;t have was visibility into what actually mattered.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The absence of transparency creates a demoralizing fog.&lt;/strong&gt; When priorities aren&amp;rsquo;t clear and accountability doesn&amp;rsquo;t
exist, everyone thinks they&amp;rsquo;re doing the right thing while nothing moves forward.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Great engineers need visibility to thrive.&lt;/strong&gt; Alex wasn&amp;rsquo;t slacking. He was overwhelmed and reacting to noise instead of
signal because no one had the clarity to say what mattered.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;You need to know what your manager knows.&lt;/strong&gt; Aim for 90% visibility into your manager&amp;rsquo;s context through meeting
recordings, notes, or regular readouts.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Leaders must make the invisible visible.&lt;/strong&gt; Their job isn&amp;rsquo;t just to set direction. It is to ensure that priorities,
trade-offs, and blockers are explicit and public.&lt;/p&gt;
&lt;p&gt;The fog I worked in for years wasn&amp;rsquo;t inevitable. It was a broken system where politeness trumped progress. You can build
better systems. You just need to start asking for and creating transparency.&lt;/p&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../github-code-review-issues/" &gt;Top 3 issues with GitHub code review process&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Discover how poor visibility in code reviews creates bottlenecks and what you can do to improve team collaboration.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../engineering-metrics-no-cost/" &gt;Full-featured engineering metrics‚Äîfor free&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Build transparency dashboards that make engineering work visible to everyone using free tools and GitHub data.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../readable-code/" &gt;What is readable code and why is it important?&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Learn how code clarity impacts team velocity and why transparency starts at the code level.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="watch-us-discuss-engineering-transparency"&gt;&lt;a href="#watch-us-discuss-engineering-transparency" class="header-anchor"&gt;&lt;/a&gt;Watch us discuss engineering transparency
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/3oSdwkC7iiI"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>Will AI agents replace software developers?</title><link>https://victoronsoftware.com/posts/will-ai-agents-replace-developers/</link><pubDate>Wed, 16 Jul 2025 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/will-ai-agents-replace-developers/</guid><description>&lt;img src="https://victoronsoftware.com/posts/will-ai-agents-replace-developers/ai-agents-replace-developers-headline.png" alt="Featured image of post Will AI agents replace software developers?" /&gt;&lt;p&gt;&lt;strong&gt;TL;DR:&lt;/strong&gt; AI coding agents are becoming mainstream, but their impact is focused mainly on implementation and automated
testing. Productivity gains are real but capped, and engineers must still actively guide and supervise these tools.
Complete developer replacement is unlikely anytime soon.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="#requirements-gathering" &gt;Requirements gathering&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#design" &gt;Design&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#implementation" &gt;Implementation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#testing" &gt;Testing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#deployment" &gt;Deployment&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#maintenance" &gt;Maintenance&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#ai-coding-agent-impact-across-the-sdlc" &gt;AI coding agent impact across the SDLC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#will-ai-coding-agents-replace-software-developers" &gt;Will AI coding agents replace software developers?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="introduction"&gt;&lt;a href="#introduction" class="header-anchor"&gt;&lt;/a&gt;Introduction
&lt;/h2&gt;&lt;p&gt;AI is no longer just autocomplete. With AI coding agents, it is becoming a collaborator. But what happens when that
collaborator starts writing and testing entire chunks of your codebase? Will software engineers become managers of
fleets of AI agents, or will their jobs evolve in less dramatic ways?&lt;/p&gt;
&lt;p&gt;Our previous article covered the &lt;a class="link" href="../ai-for-software-developers/" &gt;AI trends in the first half of 2025&lt;/a&gt;. Using AI for
code completion and code generation was becoming mainstream. Today, in the second half of 2025, we can expect most
software developers to be using AI, off and on, for these tasks. But what about using AI coding agents to make
significant changes to the codebase, including automatically running and fixing tests? Recent surveys show that most
software engineers are NOT using AI agents. With AI code completion tools like GitHub Copilot being widely adopted
within about one year, we can reasonably assume that AI agents will likewise be widely adopted by the second half
of 2026. With that in mind, what will a typical engineer&amp;rsquo;s day look like in 2026?&lt;/p&gt;
&lt;h3 id="ai-tools-adoption-timeline-in-software-development"&gt;&lt;a href="#ai-tools-adoption-timeline-in-software-development" class="header-anchor"&gt;&lt;/a&gt;AI tools adoption timeline in software development
&lt;/h3&gt;&lt;pre class="mermaid"&gt;
timeline
2022-2023 : GitHub Copilot Launch
: Early AI code completion
: Developer experimentation
2024 : Code completion mainstream
: ChatGPT for development
: Basic code generation
2025 : Advanced code generation
: AI debugging tools
: Early AI agents (experimental)
2026 : AI agents widely adopted
: Automated testing with AI
: AI code review assistants
2027+ : AI-native development workflows
: Advanced agent orchestration
: Full SDLC integration
&lt;/pre&gt;
&lt;p&gt;Let&amp;rsquo;s walk through the software development lifecycle (SDLC) and understand where these new AI coding agents can be
used. We will focus specifically on the new capabilities that AI coding agents bring, and not on the existing and
largely mainstream capabilities of AI code completion and chatbots.&lt;/p&gt;
&lt;pre class="mermaid"&gt;
---
title: SDLC
---
graph LR
Requirements[Requirements gathering] --&amp;gt; Design[Design]
Design --&amp;gt; Implementation[Implementation]
Implementation --&amp;gt; Testing[Testing]
Testing --&amp;gt; Deployment[Deployment]
Deployment --&amp;gt; Maintenance[Maintenance]
%% Color coding based on AI agent impact level
%% Low impact - light blue
%% Medium impact - yellow/orange
%% High impact - green
classDef lowImpact fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
classDef mediumImpact fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
classDef highImpact fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
class Requirements,Deployment lowImpact
class Design,Maintenance mediumImpact
class Implementation,Testing highImpact
&lt;/pre&gt;
&lt;h2 id="requirements-gathering"&gt;&lt;a href="#requirements-gathering" class="header-anchor"&gt;&lt;/a&gt;Requirements gathering
&lt;/h2&gt;&lt;p&gt;In requirements gathering, we need to figure out why we are adding a feature and what the feature is, at a high level.
We have two major sources of product features. The first one is a strategic feature that will open up new sources of
revenue for us. The second is a customer request, which we must build to keep our customers happy. A single feature
could be both of these.&lt;/p&gt;
&lt;p&gt;To understand the customer, we actually need to talk to the customer. Barring that, we could do market analysis to see
what similar features our competition has. ChatGPT can speed up this process by aggregating and explaining the
information. In this case, ChatGPT makes research more efficient, much like Google made research more efficient than
going to the library. But this is not a new AI use case. Product managers have been using AI to speed up their work for
years now.&lt;/p&gt;
&lt;p&gt;As far as figuring out what we&amp;rsquo;re building and why, AI coding agents may have little to add. That said, they may have
some use cases, such as writing a script to fetch and analyze data from a public API.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; Requirements gathering combines the planning and requirements analysis phases, assuming we use a fast-paced
Agile iterative process.&lt;/p&gt;
&lt;h2 id="design"&gt;&lt;a href="#design" class="header-anchor"&gt;&lt;/a&gt;Design
&lt;/h2&gt;&lt;p&gt;In the design phase, we get into the details of what we&amp;rsquo;re building. We specify the UI requirements, API changes,
integrations with other services, and other technical requirements.&lt;/p&gt;
&lt;h3 id="spike-stories-and-proof-of-concepts-pocs"&gt;&lt;a href="#spike-stories-and-proof-of-concepts-pocs" class="header-anchor"&gt;&lt;/a&gt;Spike stories and proof of concepts (POCs)
&lt;/h3&gt;&lt;p&gt;Often, there are enough uncertainties in the feature that software engineers must do a spike story or build a POC. A
spike story is an Agile user story to research a technical question. Spike stories uncover things like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Technical feasibility (e.g., can we use TPM to sign HTTP messages?)&lt;/li&gt;
&lt;li&gt;Implementation approach (e.g., should we use webhooks or polling?)&lt;/li&gt;
&lt;li&gt;Integration behavior (e.g., how does this 3rd party API handle pagination and errors?)&lt;/li&gt;
&lt;li&gt;Tool or library evaluation (e.g., does this 3rd party library provide all the features we need?)&lt;/li&gt;
&lt;li&gt;Unknown complexities or risk (e.g., will this actually work?)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In a spike story or POC, we often write quick throwaway code without other architectural considerations, such as
maintainability. And this is where AI coding agents can help. Theoretically, an AI coding agent can create a whole POC
with only a cursory review from the software developer. But this is an extreme case. In most cases, the work will be a
mix of coding, reviewing technical documentation, searching the web, and talking with ChatGPT.&lt;/p&gt;
&lt;p&gt;So, with the help of an AI coding agent, we could finish our spike story faster. If the work was timeboxed, the end
result should be higher quality.&lt;/p&gt;
&lt;h3 id="final-design"&gt;&lt;a href="#final-design" class="header-anchor"&gt;&lt;/a&gt;Final design
&lt;/h3&gt;&lt;p&gt;After the spike story, we still need to finish the design, providing all the technical specifications required for
estimation and implementation. These details include an understanding of how this feature interacts with all the other
parts of our application, such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;UI&lt;/li&gt;
&lt;li&gt;configuration&lt;/li&gt;
&lt;li&gt;authentication&lt;/li&gt;
&lt;li&gt;monitoring and logging&lt;/li&gt;
&lt;li&gt;error handling&lt;/li&gt;
&lt;li&gt;scalability and performance&lt;/li&gt;
&lt;li&gt;internationalization&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Although some of these aspects are shared between features, we, as software developers, still need to consider and
investigate the new feature&amp;rsquo;s implications. AI coding agents are of little help here, besides providing boilerplate
requirements.&lt;/p&gt;
&lt;h2 id="implementation"&gt;&lt;a href="#implementation" class="header-anchor"&gt;&lt;/a&gt;Implementation
&lt;/h2&gt;&lt;p&gt;After the feature has been designed and estimated, it is time to get down to the work of coding. Can an AI agent do all
of this? Well, we may not be able to take the design and feed it to our agent. A product manager or another engineer may
have done the design, and this design may lack enough details for implementation. So we have to add details, like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Function names (e.g., &lt;code&gt;sendEmailNotification&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Constant and enum names (e.g., &lt;code&gt;RoleAdmin&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;File and package structure (e.g., &lt;code&gt;handlers/user.go&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Error handling strategy (e.g., wrap errors and add context)&lt;/li&gt;
&lt;li&gt;Interface design (e.g., create a new interface to simplify testing)&lt;/li&gt;
&lt;li&gt;Security considerations (e.g., validate inputs)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Yes, an AI coding agent may indeed come up with some of these on its own. However, we must consciously consider these to
ensure our codebase is maintainable, testable, scalable, and handles corner cases.&lt;/p&gt;
&lt;p&gt;So, once we know what we need to code, we can write a prompt to the AI coding agent and let it do its work. Today&amp;rsquo;s AI
coding agents are not very fast. In our experience, we ask an AI agent to do a chunk of work, and it completes it in
several minutes. Then we do a brief review of what it did and come back to it with corrections. Corrections often
include things like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Using the correct coding standards for our codebase&lt;/li&gt;
&lt;li&gt;Removing unneeded code (e.g., handling cases that we know cannot happen)&lt;/li&gt;
&lt;li&gt;Removing/merging duplicate code&lt;/li&gt;
&lt;li&gt;Using better names for functions/variables (e.g., don&amp;rsquo;t use &lt;code&gt;err2&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If we let the AI agent do a bigger chunk of work (30+ minutes), there is a greater chance that it will go off the rails,
and all the work must be redone. For example, an AI agent could decide to implement a third-party library itself because
it couldn&amp;rsquo;t figure out how to use the existing one.&lt;/p&gt;
&lt;pre class="mermaid"&gt;
---
title: AI agent development workflow
---
flowchart TD
A[Developer writes prompt] --&amp;gt; B[AI agent codes&amp;lt;br/&amp;gt;3-5 minutes]
B --&amp;gt; C[Human reviews code]
C --&amp;gt; D{Code acceptable?}
D --&amp;gt;|No| E[Developer provides&amp;lt;br/&amp;gt;corrections]
E --&amp;gt; B
D --&amp;gt;|Yes| F[Final code review]
F --&amp;gt; G[Ask AI agent to review code]
G --&amp;gt; H[Human peer review]
H --&amp;gt; I[Ready for QA]
%% Styling
classDef humanTask fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
classDef aiTask fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
classDef reviewTask fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
class A,C,E,F,H humanTask
class B,G aiTask
class D,I reviewTask
&lt;/pre&gt;
&lt;p&gt;Once we reach a good stopping point, we need to review all the code changes that we and our AI agent have made. Since
much of the code was autogenerated, we must take extra care to do a thorough review. The goal is to fully understand the
implementation so that we can speak about it as if we coded all of it ourselves.&lt;/p&gt;
&lt;p&gt;Once we have checked in the code or opened a PR, we can ask another AI agent to review it. With multiple LLMs and coding
agents out there, it is good practice to have one AI agent check the work of another AI agent for anything that we may
have missed. Unfortunately, this means wading through a few false positives. However, the end result is higher-quality
code that is ready for one of our peers to review.&lt;/p&gt;
&lt;h3 id="multitasking-with-multiple-ai-agents"&gt;&lt;a href="#multitasking-with-multiple-ai-agents" class="header-anchor"&gt;&lt;/a&gt;Multitasking with multiple AI agents
&lt;/h3&gt;&lt;p&gt;Some developers report using multiple AI agents to work on numerous projects simultaneously. In our workflow, this
approach is not practical. We know from behavioral science research that it takes a human up to 15 minutes to entirely
switch between different tasks because they must reload and recall all of the context associated with the new task into
their brain. So, if we switch between tasks every 5-10 minutes, the result is that we&amp;rsquo;re never deeply engaged with any
of these tasks, likely leading to lower quality software.&lt;/p&gt;
&lt;p&gt;Perhaps two AI coding agents can work on two tasks for the same feature. However, in this case, the two tasks must be
independent, which is more of an exception than the norm.&lt;/p&gt;
&lt;p&gt;Even if we decide to save some time by switching from AI agent coding to a longer task, such as a code review for one of
our peers, when we return to the agent, we will need to recall what we told the agent to do and what our expectations
were.&lt;/p&gt;
&lt;h3 id="integration-with-the-rest-of-the-codebase"&gt;&lt;a href="#integration-with-the-rest-of-the-codebase" class="header-anchor"&gt;&lt;/a&gt;Integration with the rest of the codebase
&lt;/h3&gt;&lt;p&gt;A lot of software development work involves hooking up the feature into the existing codebase. For example, we need to
create the new object and properly do dependency injection. These things often only take a few lines of code. Although
AI coding agents can do these integrations, it is often just as fast and more reliable to manually code these smaller
snippets.&lt;/p&gt;
&lt;h3 id="full-stack-development"&gt;&lt;a href="#full-stack-development" class="header-anchor"&gt;&lt;/a&gt;Full stack development
&lt;/h3&gt;&lt;p&gt;AI coding agents can help you write in a programming language you&amp;rsquo;re unfamiliar with. The agent will do the brunt work,
getting the syntax (mostly) right, and you can review the code to make sure it looks reasonable. This means software
developers can easily expand beyond their functional specialty into other languages and parts of the codebase.&lt;/p&gt;
&lt;p&gt;From an SDLC perspective, a single feature is now more likely to be assigned to a single developer instead of being
partitioned across backend/frontend or server/client boundaries. In this case, a single developer should be able to
finish a feature faster, without the handoffs and the issues they entail.&lt;/p&gt;
&lt;p&gt;Overall, AI coding agents can significantly help speed up the implementation phase. However, we must note that AI agent
effectiveness varies by task. Specifically, agents struggle with complex/niche designs and unfamiliar contexts.&lt;/p&gt;
&lt;h2 id="testing"&gt;&lt;a href="#testing" class="header-anchor"&gt;&lt;/a&gt;Testing
&lt;/h2&gt;&lt;p&gt;The two main testing areas are automated tests, including unit and integration tests, and manual tests.&lt;/p&gt;
&lt;h3 id="automated-unit-tests"&gt;&lt;a href="#automated-unit-tests" class="header-anchor"&gt;&lt;/a&gt;Automated (unit) tests
&lt;/h3&gt;&lt;p&gt;Writing tests has been a primary use case for generative AI over the past few years. So, given detailed instructions
regarding the scenarios to test, an AI coding agent should be able to write the test, run the test, and fix any issues.
The software developer will still need to review and adjust the tests. Some common problems with agent-generated tests
include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Not following project standards regarding the test helper methods being used (e.g., wrong HTTP client, wrong assert
method)&lt;/li&gt;
&lt;li&gt;Wordy and hard to maintain tests (e.g., not following a table test approach, not using subtests)&lt;/li&gt;
&lt;li&gt;Duplicated tests (e.g., testing a case that was covered elsewhere in the test suite)&lt;/li&gt;
&lt;li&gt;Using numbers in test variables instead of descriptive names (e.g., rsp1, err2)&lt;/li&gt;
&lt;li&gt;Not actually testing anything (e.g., hard-coding test expectations in the source implementation)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The AI agent may come up with some corner cases to test, but it cannot be relied on for full functional correctness.
Since the AI agent can see the implementation, it often bases its tests on what has been implemented. It lacks an
understanding of the intended requirements and, hence, what should be tested.&lt;/p&gt;
&lt;h3 id="manual-tests"&gt;&lt;a href="#manual-tests" class="header-anchor"&gt;&lt;/a&gt;Manual tests
&lt;/h3&gt;&lt;p&gt;Before handing over the implementation to the QA team, the software developer should review the test plan themselves and
perform all the manual tests. Any issues found can be candidates for additional automated tests.&lt;/p&gt;
&lt;p&gt;There is no AI agent today that can replace manual testers, but engineers can try to take advantage of AI to help in
some areas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Convert natural language to test steps&lt;/li&gt;
&lt;li&gt;Identify visual (UI) regressions&lt;/li&gt;
&lt;li&gt;Accessibility testing&lt;/li&gt;
&lt;li&gt;Auto-healing tests: updating tests when UI changes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So, for the testing phase, AI coding agents provide much help with creating and fixing automated tests, but not so much
with manual testing.&lt;/p&gt;
&lt;h2 id="deployment"&gt;&lt;a href="#deployment" class="header-anchor"&gt;&lt;/a&gt;Deployment
&lt;/h2&gt;&lt;p&gt;Before deploying the app to customers, engineers should do a release readiness check covering items like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;All committed features implemented&lt;/li&gt;
&lt;li&gt;Testing and QA complete&lt;/li&gt;
&lt;li&gt;Security checks passed&lt;/li&gt;
&lt;li&gt;Load testing complete&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;After deployment, engineers should conduct smoke tests and health checks to ensure the app is working.&lt;/p&gt;
&lt;p&gt;In addition, deployment involves communication tasks, such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;demos, guides, FAQs&lt;/li&gt;
&lt;li&gt;release notes and changelogs&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Generative AI is being used to generate some communication content. AI coding agents can provide little additional value
in the deployment phase.&lt;/p&gt;
&lt;h2 id="maintenance"&gt;&lt;a href="#maintenance" class="header-anchor"&gt;&lt;/a&gt;Maintenance
&lt;/h2&gt;&lt;p&gt;The maintenance phase of the software development lifecycle includes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Answering customer and internal questions&lt;/li&gt;
&lt;li&gt;Responding to alerts and incidents (e.g., investigating high CPU usage, resolving a failed background job)&lt;/li&gt;
&lt;li&gt;Reproducing and fixing customer-reported bugs&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;AI search tools have been helpful with searching the codebase and documentation to answer questions. Some upcoming tools
are trying to close the loop between production monitoring and source code fixes, and this is a great area to watch.
Reproducing bugs is still very much a manual process.&lt;/p&gt;
&lt;p&gt;Fixing bugs is an implementation task, so AI coding agents can help create the fix and a unit test. However, bug fixes
tend to be small in nature, with most of the software engineer&amp;rsquo;s time spent figuring out where the bug is and how best
to fix it.&lt;/p&gt;
&lt;h2 id="ai-coding-agent-impact-across-the-sdlc"&gt;&lt;a href="#ai-coding-agent-impact-across-the-sdlc" class="header-anchor"&gt;&lt;/a&gt;AI coding agent impact across the SDLC
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;SDLC Phase&lt;/th&gt;
&lt;th&gt;AI Agent Impact&lt;/th&gt;
&lt;th&gt;üîç Notes&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;üìù Requirements&lt;/td&gt;
&lt;td&gt;‚ùå Low&lt;/td&gt;
&lt;td&gt;Some research support, but little for strategic/product thinking&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;üß† Design&lt;/td&gt;
&lt;td&gt;‚ö†Ô∏è Low‚ÄìMedium&lt;/td&gt;
&lt;td&gt;Help limited to spike stories and boilerplate&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;üíª Implementation&lt;/td&gt;
&lt;td&gt;‚úÖ High&lt;/td&gt;
&lt;td&gt;Most benefit seen here (code gen, agent pair programming)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;üß™ Automated Testing&lt;/td&gt;
&lt;td&gt;‚úÖ High&lt;/td&gt;
&lt;td&gt;Strong at generating/fixing tests, needs human oversight&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;üßç Manual Testing&lt;/td&gt;
&lt;td&gt;‚ùå Low&lt;/td&gt;
&lt;td&gt;Still mostly a human-driven process&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;üöÄ Deployment&lt;/td&gt;
&lt;td&gt;‚ùå Low&lt;/td&gt;
&lt;td&gt;Some help with writing release notes, limited technical role&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;üîß Maintenance&lt;/td&gt;
&lt;td&gt;‚ö†Ô∏è Medium&lt;/td&gt;
&lt;td&gt;Good at fixes; weak at reproducing or analyzing issues&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="risk-and-tradeoffs"&gt;&lt;a href="#risk-and-tradeoffs" class="header-anchor"&gt;&lt;/a&gt;Risk and tradeoffs
&lt;/h2&gt;&lt;p&gt;While AI coding agents offer clear benefits, they also introduce new risks and tradeoffs that teams must actively
manage:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Shallow code understanding&lt;/strong&gt;: Engineers may be tempted to rely on agents without fully understanding the generated
code. This erodes accountability and leads to slower debugging when issues arise.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Inconsistent quality&lt;/strong&gt;: Agent-generated code can be verbose, redundant, or subtly incorrect. Without careful review,
these issues can slip into production.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Developer deskilling&lt;/strong&gt;: Over-reliance on agents may reduce hands-on practice with fundamentals, particularly for
junior engineers who are still developing intuition.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Security and compliance&lt;/strong&gt;: Agents can unknowingly introduce vulnerabilities or use unsafe patterns, especially when
integrating with third-party APIs or handling sensitive data.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In short, AI agents amplify output, but without discipline and oversight, they can amplify problems too. Teams must
treat agent-generated code with &lt;strong&gt;greater&lt;/strong&gt; rigor than human-written code.&lt;/p&gt;
&lt;h2 id="will-ai-coding-agents-replace-software-developers"&gt;&lt;a href="#will-ai-coding-agents-replace-software-developers" class="header-anchor"&gt;&lt;/a&gt;Will AI coding agents replace software developers?
&lt;/h2&gt;&lt;p&gt;Recent studies suggest that current AI tools improve productivity by 10% to 20%.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://arxiv.org/abs/2410.12944" target="_blank" rel="noopener"
&gt;AI speeds up Google engineers by 21%&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://nypost.com/2025/03/14/business/jpmorgan-credits-coding-assistant-tool-for-boosting-engineers-efficiency/" target="_blank" rel="noopener"
&gt;JPMorgan claims AI boosts efficiency by up to 20%&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.itpro.com/software/development/atlassian-says-ai-has-created-an-unexpected-paradox-for-software-developers-theyre-saving-over-10-hours-a-week-but-theyre-still-overworked-and-losing-an-equal-amount-of-time-due-to-organizational-inefficiencies" target="_blank" rel="noopener"
&gt;Atlassian says AI is saving over 10 hours per week&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.reuters.com/business/ai-slows-down-some-experienced-software-developers-study-finds-2025-07-10" target="_blank" rel="noopener"
&gt;AI slows down some developers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So, will the productivity improvements jump with AI coding agents becoming mainstream? Will one engineer be able to do
the work of a whole team?&lt;/p&gt;
&lt;p&gt;Looking at the whole software development process, we see that the most significant gains from AI coding agents are in
the implementation and automated testing phases. The consensus from studies and industry reports is that software
engineers spend only about 30% of their time writing code. The rest of the time is spent in the other phases of the
SDLC, as well as on other tasks such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;attending and preparing for meetings (e.g., planning, retros, 1:1s)&lt;/li&gt;
&lt;li&gt;mentoring, teaching, and continuous learning&lt;/li&gt;
&lt;li&gt;context switching and task juggling&lt;/li&gt;
&lt;li&gt;recruiting, interviewing, and candidate evaluation&lt;/li&gt;
&lt;li&gt;writing or reviewing internal documentation, ADRs, and RFCs&lt;/li&gt;
&lt;li&gt;developer advocacy, blogging, and community engagement&lt;/li&gt;
&lt;li&gt;travel for conferences, offsites, or customer visits&lt;/li&gt;
&lt;li&gt;improving tooling, automation, and developer environments&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Even assuming AI agents completely automate coding tasks (30% of work), the maximum productivity gain would be 43%: if
70% of work remains unchanged, then 30% time savings translates to doing 1.43x the work. In other words, 7 people can
now do the work of 10 people. This is far from the popular claims that AI will replace all software engineers.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/will-ai-agents-replace-developers/productivity-gain.svg"&gt;
&lt;/figure&gt;
&lt;p&gt;In summary, AI in general and AI coding agents in particular should continue to have a noticeable impact on software
developer productivity. However, developers&amp;rsquo; work is complex and varied, and AI can only provide efficiency improvements
and not wholesale replacement. AI coding agents won&amp;rsquo;t replace developers, but developers who know how to use them will
replace those who don&amp;rsquo;t.&lt;/p&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../ai-for-software-developers/" &gt;How to use AI for software development (2025)&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
&lt;em&gt;What every software engineer needs to know about AI right now: code completion, generation, and AI agents.&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../introducing-mcp/" &gt;Introducing MCP: Lessons from building an AI-driven server&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
&lt;em&gt;How we taught an AI agent to use our product with MCP.&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../multitasking-with-ai-agents/" &gt;Multitasking with AI agents: When it works and when it fails&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
&lt;em&gt;Practical strategies for managing multiple AI agents and avoiding the productivity traps of task switching.&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="watch-us-discuss-whether-ai-agents-can-replace-software-developers"&gt;&lt;a href="#watch-us-discuss-whether-ai-agents-can-replace-software-developers" class="header-anchor"&gt;&lt;/a&gt;Watch us discuss whether AI agents can replace software developers
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/fdBxpWXajSE"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>How to speed up a large Go test suite</title><link>https://victoronsoftware.com/posts/large-go-test-suite/</link><pubDate>Wed, 09 Apr 2025 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/large-go-test-suite/</guid><description>&lt;img src="https://victoronsoftware.com/posts/large-go-test-suite/large-go-test-suite-headline.png" alt="Featured image of post How to speed up a large Go test suite" /&gt;&lt;p&gt;Fast Continuous Integration (CI) test results are crucial for maintaining a good developer velocity. Quick test results
give developers immediate feedback on their changes, resulting in a more enjoyable development process. For critical
changes, slow tests can become a bottleneck, delaying deployments.&lt;/p&gt;
&lt;p&gt;Previously, we covered &lt;a class="link" href="../go-test-execution-time/" &gt;how to accurately measure the execution time of Go tests&lt;/a&gt;. This
article will demonstrate one approach to breaking apart a large Go test suite and running each part in parallel. This
approach should reduce the CI cycle time, benefitting developers and the organization.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="#split-up-the-go-test-suite" &gt;Split up the Go test suite&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#create-parallel-go-test-jobs-in-ci" &gt;Create parallel Go test jobs in CI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="understanding-your-go-test-suite"&gt;&lt;a href="#understanding-your-go-test-suite" class="header-anchor"&gt;&lt;/a&gt;Understanding your Go test suite
&lt;/h2&gt;&lt;p&gt;The standard way to run all the tests in your Go project is with the following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;go test ./...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This command will compile all the Go packages and their tests, each compiling to a separate binary. The Go toolchain
will then run each binary in parallel. The &lt;code&gt;-p&lt;/code&gt; flag controls this parallel test behavior, which defaults to the number
of CPUs on your machine.&lt;/p&gt;
&lt;p&gt;Splitting up the test suite makes sense if you have a lot of packages to test. If you have few packages or if you have 1
or 2 packages that dominate your project&amp;rsquo;s test run time, then a simple split may not help much. You may need to
refactor your code or split the tests in a single Go package across multiple CI jobs. Splitting a single package is
generally inefficient since each CI job must compile the same package separately, and we will not cover this approach.&lt;/p&gt;
&lt;p&gt;To find all the packages in your project, you can list them with the following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;go list ./...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To identify time-consuming packages, you can run your test suite with the &lt;code&gt;-json&lt;/code&gt; switch and save the results. Then,
find the elapsed time of each package and sort the times. This operation can be done with &lt;a class="link" href="https://jqlang.org/" target="_blank" rel="noopener"
&gt;jq&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cat test-result.json | jq -s &lt;span style="color:#e6db74"&gt;&amp;#39;map(select(has(&amp;#34;Test&amp;#34;) | not)) | group_by(.Package) | map({package: .[0].Package, elapsed: (map(.Elapsed) | add)}) | sort_by(.elapsed) | reverse&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="split-up-the-go-test-suite"&gt;&lt;a href="#split-up-the-go-test-suite" class="header-anchor"&gt;&lt;/a&gt;Split up the Go test suite
&lt;/h2&gt;&lt;p&gt;You can specify the packages at the end of the &lt;code&gt;go test&lt;/code&gt; command to run a subset of packages in a CI job. For example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;go test ./cmd/fleetctl/... ./server/service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Next, manually create groups of packages and identify them with a name.&lt;/p&gt;
&lt;p&gt;To create a catchall group for packages that were not explicitly assigned to a group, you can use the Linux
&lt;a class="link" href="https://linux.die.net/man/1/comm" target="_blank" rel="noopener"
&gt;comm&lt;/a&gt; command to generate the remaining packages. For example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;comm -23 &amp;lt;&lt;span style="color:#f92672"&gt;(&lt;/span&gt;go list ./... | sort&lt;span style="color:#f92672"&gt;)&lt;/span&gt; &amp;lt;&lt;span style="color:#f92672"&gt;({&lt;/span&gt; go list ./cmd/fleetctl/... &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; go list ./server/service/... ;&lt;span style="color:#f92672"&gt;}&lt;/span&gt; | sort&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The above command returns the packages unique to the first list, which includes all the packages (&lt;code&gt;./...&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;The following is a real-world example from Fleet&amp;rsquo;s Makefile that creates test suite groups with identifiers:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-Makefile" data-lang="Makefile"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Set up packages for CI testing.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;DEFAULT_PKGS_TO_TEST &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; ./cmd/... ./ee/... ./orbit/pkg/... ./orbit/cmd/orbit ./pkg/... ./server/... ./tools/...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# fast tests are quick and do not require out-of-process dependencies (such as MySQL, etc.)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;FAST_PKGS_TO_TEST &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ./ee/tools/mdm &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ./orbit/pkg/cryptoinfo &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ./orbit/pkg/dataflatten &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ./orbit/pkg/keystore &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ./server/goose &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ./server/mdm/apple/appmanifest &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ./server/mdm/lifecycle &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ./server/mdm/scep/challenge &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ./server/mdm/scep/x509util &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ./server/policies
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;FLEETCTL_PKGS_TO_TEST &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; ./cmd/fleetctl/...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;MYSQL_PKGS_TO_TEST &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; ./server/datastore/mysql/... ./server/mdm/android/mysql
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;SCRIPTS_PKGS_TO_TEST &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; ./orbit/pkg/scripts
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;SERVICE_PKGS_TO_TEST &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; ./server/service
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;VULN_PKGS_TO_TEST &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; ./server/vulnerabilities/...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;ifeq&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;(&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;CI_TEST_PKG&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;,&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;main)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# This is the bucket of all the tests that are not in a specific group. We take a diff between DEFAULT_PKG_TO_TEST and all the specific *_PKGS_TO_TEST.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CI_PKG_TO_TEST&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;shell /bin/bash -c &lt;span style="color:#e6db74"&gt;&amp;#34;comm -23 &amp;lt;(go list &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${&lt;/span&gt;DEFAULT_PKGS_TO_TEST&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt; | sort) &amp;lt;({ \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; go list &lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;FAST_PKGS_TO_TEST&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt; &amp;amp;&amp;amp; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; go list &lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;FLEETCTL_PKGS_TO_TEST&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt; &amp;amp;&amp;amp; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; go list &lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;MYSQL_PKGS_TO_TEST&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt; &amp;amp;&amp;amp; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; go list &lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;SCRIPTS_PKGS_TO_TEST&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt; &amp;amp;&amp;amp; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; go list &lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;SERVICE_PKGS_TO_TEST&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt; &amp;amp;&amp;amp; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; go list &lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;VULN_PKGS_TO_TEST&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ;} | sort)&amp;#34;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;else&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;ifeq&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;(&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;CI_TEST_PKG&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;,&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;fast)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CI_PKG_TO_TEST&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;FAST_PKGS_TO_TEST&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;else&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;ifeq&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;(&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;CI_TEST_PKG&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;,&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;fleetctl)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CI_PKG_TO_TEST&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;FLEETCTL_PKGS_TO_TEST&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;else&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;ifeq&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;(&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;CI_TEST_PKG&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;,&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;mysql)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CI_PKG_TO_TEST&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;MYSQL_PKGS_TO_TEST&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;else&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;ifeq&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;(&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;CI_TEST_PKG&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;,&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;scripts)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CI_PKG_TO_TEST&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;SCRIPTS_PKGS_TO_TEST&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;else&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;ifeq&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;(&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;CI_TEST_PKG&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;,&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;service)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CI_PKG_TO_TEST&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;SERVICE_PKGS_TO_TEST&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;else&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;ifeq&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;(&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;CI_TEST_PKG&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;,&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;vuln)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CI_PKG_TO_TEST&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;VULN_PKGS_TO_TEST&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CI_PKG_TO_TEST&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;DEFAULT_PKGS_TO_TEST&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;endif&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="create-parallel-go-test-jobs-in-ci"&gt;&lt;a href="#create-parallel-go-test-jobs-in-ci" class="header-anchor"&gt;&lt;/a&gt;Create parallel Go test jobs in CI
&lt;/h2&gt;&lt;p&gt;The major CI tools provide a way to start multiple jobs in parallel. In GitHub, this is done with a
&lt;a class="link" href="https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/running-variations-of-jobs-in-a-workflow" target="_blank" rel="noopener"
&gt;matrix strategy&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In the previous step, we gave an example of named test suites. Now, we feed those names into the GitHub matrix job:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;jobs&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;test-go&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;strategy&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;matrix&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;suite&lt;/span&gt;: [&lt;span style="color:#e6db74"&gt;&amp;#34;fast&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;fleetctl&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;main&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;mysql&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;scripts&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;service&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;vuln&amp;#34;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;os&lt;/span&gt;: [&lt;span style="color:#ae81ff"&gt;ubuntu-latest]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;runs-on&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;${{ matrix.os }}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;steps&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;Checkout Code&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;uses&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;actions/checkout@c85c95e3d7251135ab7dc9ce3241c5835cc595a9&lt;/span&gt; &lt;span style="color:#75715e"&gt;# v3.5.3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;Install Go&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;uses&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;actions/setup-go@0a12ed9d6a96ab950c8f026ed9f722fe0da7ef32&lt;/span&gt; &lt;span style="color:#75715e"&gt;# v5.0.2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;with&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;go-version-file&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#39;go.mod&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;Run Go Tests&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;run&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;CI_TEST_PKG=${{ matrix.suite }} make test-go&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The above workflow runs our test suites in parallel, speeding up our overall CI cycle time.&lt;/p&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;p&gt;Recently, we covered &lt;a class="link" href="../analyze-go-build/" &gt;analyzing Go build times&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In the past, we reviewed &lt;a class="link" href="../fuzz-testing-with-go/" &gt;the state of fuzz testing in Go&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="watch-how-to-break-apart-a-large-go-test-suite"&gt;&lt;a href="#watch-how-to-break-apart-a-large-go-test-suite" class="header-anchor"&gt;&lt;/a&gt;Watch how to break apart a large Go test suite
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/AFVlbf5LZwc"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>6 business benefits of software modularity and cohesion</title><link>https://victoronsoftware.com/posts/software-modularity/</link><pubDate>Wed, 19 Mar 2025 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/software-modularity/</guid><description>&lt;img src="https://victoronsoftware.com/posts/software-modularity/software-modularity-headline.png" alt="Featured image of post 6 business benefits of software modularity and cohesion" /&gt;&lt;p&gt;&lt;em&gt;This article is part of a series on &lt;strong&gt;technical debt&lt;/strong&gt;. Check out the previous articles:&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="../readable-code/" &gt;Why readable code is essential&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="../scaling-codebase-evolutionary-architecture/" &gt;Incrementally scaling a codebase with evolutionary architecture&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="../code-complexity-metrics/" &gt;Top software code complexity metrics&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="introduction"&gt;&lt;a href="#introduction" class="header-anchor"&gt;&lt;/a&gt;Introduction
&lt;/h2&gt;&lt;p&gt;Modularity and cohesion are key software engineering concepts that software engineers frequently misunderstand.
Frequently, software developers know that modularity is good in some vague general sense, but they can&amp;rsquo;t quantify the
benefits. This lack of understanding leads to poor decisions when adding new functionality or fixing system bugs, often
leading to the proverbial big ball of mud codebase. Sometimes, engineers feel like it is their manager or software
architect&amp;rsquo;s job to define the modules of a system, and they are simply responsible for implementing the details in the
quickest way they know how.&lt;/p&gt;
&lt;p&gt;This article provides
&lt;a class="link" href="#business-benefits-of-a-modular-codebase" &gt;specific reasons why using or adding modularity to your existing growing codebase is a good business decision&lt;/a&gt;.
Sometimes, engineers intuitively know how to do a good job, but they can&amp;rsquo;t explain it to business stakeholders. We try
to explain.&lt;/p&gt;
&lt;h2 id="its-all-about-complexity"&gt;&lt;a href="#its-all-about-complexity" class="header-anchor"&gt;&lt;/a&gt;It&amp;rsquo;s all about complexity
&lt;/h2&gt;&lt;p&gt;One of the challenging problems in software engineering is managing complexity. Modularity is a tool for managing
complexity. When we speak of complexity, we are referring to a mature, growing codebase with 10 or more software
developers. A young codebase with a couple of developers will benefit from modularity but not as much as a bigger, more
complex codebase.&lt;/p&gt;
&lt;p&gt;Bigger organizations must manage the complexity of both people and systems. People must be able to work independently at
maximum velocity without being slowed down by others. Systems must be simple enough to think about without being
overwhelmed. Complexity increases the cost of ownership of software because:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;engineers cannot move at maximum velocity due to coupling to other teams or parts of the codebase&lt;/li&gt;
&lt;li&gt;engineers cannot understand the code, leading to slow development and more bugs&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="the-hero-engineer-anti-pattern"&gt;&lt;a href="#the-hero-engineer-anti-pattern" class="header-anchor"&gt;&lt;/a&gt;The &amp;ldquo;hero engineer&amp;rdquo; anti-pattern
&lt;/h3&gt;&lt;p&gt;Complex codebases often have &amp;ldquo;hero developers&amp;rdquo; who know the codebase and become the go-to people for solving critical
issues or implementing complex features. The prevalence of such heroes may be a sign that your codebase is too complex
and that you must change things to scale your business.&lt;/p&gt;
&lt;p&gt;The &amp;ldquo;hero engineer&amp;rdquo; may be contributing to the complexity issue by:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;focusing on quick fixes rather than long-term solutions&lt;/li&gt;
&lt;li&gt;insisting that the current codebase is just fine because &amp;ldquo;that&amp;rsquo;s how we&amp;rsquo;ve always done it&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="what-is-modularity-and-cohesion"&gt;&lt;a href="#what-is-modularity-and-cohesion" class="header-anchor"&gt;&lt;/a&gt;What is modularity and cohesion
&lt;/h2&gt;&lt;p&gt;Modularity is the process of breaking up a complex system into smaller, independent, and interchangeable modules. Small
means small enough to easily understand. Independent means that we can compile and test the module independently of all
the other modules. Interchangeable means that we can substitute other implementations of modules in our system, which
often happens during testing.&lt;/p&gt;
&lt;p&gt;Cohesion refers to the degree to which the functionality inside a module belongs together. It is the metric we use for
creating modules. A good module has high cohesion. Logical changes in that module should generally not leak to other
modules. This metric means that a module comprising random functions is not a good one.&lt;/p&gt;
&lt;h2 id="business-benefits-of-a-modular-codebase"&gt;&lt;a href="#business-benefits-of-a-modular-codebase" class="header-anchor"&gt;&lt;/a&gt;Business benefits of a modular codebase
&lt;/h2&gt;&lt;h3 id="1-faster-development-and-easier-maintenance"&gt;&lt;a href="#1-faster-development-and-easier-maintenance" class="header-anchor"&gt;&lt;/a&gt;1. Faster development and easier maintenance
&lt;/h3&gt;&lt;p&gt;Modularity increases engineering velocity, which in turn lowers labor costs and reduces time to market. Since modules
are cohesive and easy to understand, engineers focus their changes on a limited set of modules without wading through
the whole codebase.&lt;/p&gt;
&lt;p&gt;Since modules are independent and interchangeable, they are easier to test. Writing tests becomes faster and easier.&lt;/p&gt;
&lt;h3 id="2-risk-reduction"&gt;&lt;a href="#2-risk-reduction" class="header-anchor"&gt;&lt;/a&gt;2. Risk reduction
&lt;/h3&gt;&lt;p&gt;A frequent occurrence in a complex codebase is that a change in one place introduces a bug in another seemingly
unrelated functionality. Because modules are cohesive and independent, a bug in one module is less likely to bring down
the entire system. Also, since modules are more straightforward to test, they are less likely to have bugs in the first
place.&lt;/p&gt;
&lt;h3 id="3-organizational-scalability"&gt;&lt;a href="#3-organizational-scalability" class="header-anchor"&gt;&lt;/a&gt;3. Organizational scalability
&lt;/h3&gt;&lt;p&gt;Management expects the software output to scale proportionally as the engineering organization scales. However, this is
not always the case. Adding more people to a codebase causes merge conflicts, ownership confusion, duplicated effort,
and communication overheads.&lt;/p&gt;
&lt;p&gt;Modularity allows engineers to work in parallel. Each person or team can work in parallel on their modules, minimizing
organizational coupling.&lt;/p&gt;
&lt;p&gt;The main reason microservices have become so popular is that engineers can work on them in parallel. The organizational
scalability benefits outweigh the added complexity of microservices.&lt;/p&gt;
&lt;h3 id="4-faster-onboarding"&gt;&lt;a href="#4-faster-onboarding" class="header-anchor"&gt;&lt;/a&gt;4. Faster onboarding
&lt;/h3&gt;&lt;p&gt;When new developers join the team, the engineering velocity often dips as senior developers help with onboarding.&lt;/p&gt;
&lt;p&gt;Since modules are small, they can &amp;ldquo;fit in your head&amp;rdquo; without having to understand all other parts of the system. New
developers can contribute more quickly by focusing their initial contributions on a limited set of modules. This
&amp;ldquo;simplicity&amp;rdquo; of the codebase means fewer distractions and less hand-holding for senior staff.&lt;/p&gt;
&lt;h3 id="5-flexibility"&gt;&lt;a href="#5-flexibility" class="header-anchor"&gt;&lt;/a&gt;5. Flexibility
&lt;/h3&gt;&lt;p&gt;Modularity gives the business more options for the product&amp;rsquo;s future direction since small modules are more
straightforward to modify or replace with new functionality.&lt;/p&gt;
&lt;p&gt;Modularity also allows engineers to experiment with newer and potentially better approaches. For example, an engineer
can try a different JSON library on one module. Engineering management would not consider such a library change in a
monolithic codebase since it would pose too much risk to existing functionality.&lt;/p&gt;
&lt;h3 id="6-professional-growth-for-software-engineers"&gt;&lt;a href="#6-professional-growth-for-software-engineers" class="header-anchor"&gt;&lt;/a&gt;6. Professional growth for software engineers
&lt;/h3&gt;&lt;p&gt;What about the engineers who have been with the company for years and are comfortable with (or used to) the current
monolithic approach?&lt;/p&gt;
&lt;p&gt;Modular software architectures are becoming the norm in the software industry. Building and maintaining a genuinely
modular codebase provides a valuable experience that engineers can carry to future projects within and beyond the
current company. If we interviewed a candidate whose preferred working style was to minimize the number of modules in
the codebase, that would be a serious red flag.&lt;/p&gt;
&lt;h2 id="downsides-of-a-modular-codebase"&gt;&lt;a href="#downsides-of-a-modular-codebase" class="header-anchor"&gt;&lt;/a&gt;Downsides of a modular codebase
&lt;/h2&gt;&lt;h3 id="1-initial-module-creation-overhead"&gt;&lt;a href="#1-initial-module-creation-overhead" class="header-anchor"&gt;&lt;/a&gt;1. Initial module creation overhead
&lt;/h3&gt;&lt;p&gt;Creating a new module requires defining its interface and directory structure and writing a new test harness. These
steps require more up-front work than simply dumping the code into an existing package.&lt;/p&gt;
&lt;h3 id="2-ci-complexity"&gt;&lt;a href="#2-ci-complexity" class="header-anchor"&gt;&lt;/a&gt;2. CI complexity
&lt;/h3&gt;&lt;p&gt;We can compile and test modules independently. To maximize the development speed of modules, each one can have its own
CI run. However, as the number of modules grows, this process can become complicated over time.&lt;/p&gt;
&lt;h3 id="3-cross-cutting-features-can-become-trickier"&gt;&lt;a href="#3-cross-cutting-features-can-become-trickier" class="header-anchor"&gt;&lt;/a&gt;3. Cross-cutting features can become trickier
&lt;/h3&gt;&lt;p&gt;Some features, such as security and auditing, affect multiple modules. Ensuring consistency while keeping modules
independent can require extra thought and coordination.&lt;/p&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../modular-monolith-attempt/" &gt;The modular monolith that wasn&amp;rsquo;t&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
A real-world account of attempting to modularize a 500K-line codebase and the lessons learned.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Check out our other articles in the &lt;strong&gt;technical debt&lt;/strong&gt; series. Links are at the top of this article.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="and-also"&gt;&lt;a href="#and-also" class="header-anchor"&gt;&lt;/a&gt;And also
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Recently, examined &lt;a class="link" href="../mermaid-intro/" &gt;the 4 key Mermaid diagrams for software developers&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Previously, we &lt;a class="link" href="../go-modules-and-packages/" &gt;explained the difference between Go modules and Go packages&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="watch-us-explain-the-business-benefits-of-software-modularity"&gt;&lt;a href="#watch-us-explain-the-business-benefits-of-software-modularity" class="header-anchor"&gt;&lt;/a&gt;Watch us explain the business benefits of software modularity
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/UmSsmGFufTg"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>6 lessons from literate programming</title><link>https://victoronsoftware.com/posts/literate-programming-lessons/</link><pubDate>Wed, 12 Mar 2025 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/literate-programming-lessons/</guid><description>&lt;img src="https://victoronsoftware.com/posts/literate-programming-lessons/literate-programming-headline.png" alt="Featured image of post 6 lessons from literate programming" /&gt;&lt;p&gt;This article examines the literate programming paradigm introduced in 1984 by
&lt;a class="link" href="https://en.wikipedia.org/wiki/Donald_Knuth" target="_blank" rel="noopener"
&gt;Donald Knuth&lt;/a&gt;. We go through a &amp;ldquo;Hello World&amp;rdquo; example and extract the key
lessons relevant to making today&amp;rsquo;s software more readable and maintainable.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="#literate-programming-hello-world-example" &gt;Literate programming example&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#key-takeaways-from-literate-programming" &gt;Key takeaways from literate programming&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="what-is-literate-programming"&gt;&lt;a href="#what-is-literate-programming" class="header-anchor"&gt;&lt;/a&gt;What is literate programming
&lt;/h2&gt;&lt;p&gt;Literate programming is a paradigm in which a computer program is written in a natural language, such as English. The
programming language source code is embedded into the program&amp;rsquo;s description. The aim was to create an artifact that a
human can easily read without jumping back and forth between different sections of the code file. The writer completely
controls the flow of the document, which can be reorganized in any fashion.&lt;/p&gt;
&lt;p&gt;Knuth called his implementation of literate programming &lt;a class="link" href="https://en.wikipedia.org/wiki/Web_%28programming_system%29" target="_blank" rel="noopener"
&gt;WEB&lt;/a&gt;
to emphasize that a computer program is built from many different pieces. He picked the name before the World Wide Web
was prominent. To produce source code, the user runs the &lt;strong&gt;tangle&lt;/strong&gt; command. To create documentation, the user runs the
&lt;strong&gt;weave&lt;/strong&gt; command.&lt;/p&gt;
&lt;h2 id="literate-programming-hello-world-example"&gt;&lt;a href="#literate-programming-hello-world-example" class="header-anchor"&gt;&lt;/a&gt;Literate programming &amp;ldquo;Hello World&amp;rdquo; example
&lt;/h2&gt;&lt;h3 id="writing-a-literate-program"&gt;&lt;a href="#writing-a-literate-program" class="header-anchor"&gt;&lt;/a&gt;Writing a literate program
&lt;/h3&gt;&lt;p&gt;To demonstrate literate programming, we will use the &lt;a class="link" href="https://github.com/nrnrnr/noweb" target="_blank" rel="noopener"
&gt;noweb&lt;/a&gt; literate programming tool
to write a simple program in Go.&lt;/p&gt;
&lt;p&gt;We create a &lt;code&gt;hello.nw&lt;/code&gt; file and start it with:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;This program teaches us how to print to the screen using:
&amp;lt;&amp;lt;print&amp;gt;&amp;gt;=
fmt.Println(message)
@
To print &amp;#34;Hello World&amp;#34;, pass a literal string to the function:
&amp;lt;&amp;lt;message&amp;gt;&amp;gt;=
&amp;#34;Hello World&amp;#34;
@
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;We wrote the program in text with embedded code starting with &lt;code&gt;&amp;lt;&amp;lt;name&amp;gt;&amp;gt;=&lt;/code&gt; and ending with &lt;code&gt;@&lt;/code&gt;. The &lt;code&gt;&amp;lt;&amp;lt;name&amp;gt;&amp;gt;&lt;/code&gt; sections
are macros that we can reuse in other sections of the document, such as:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Now, we can create a function that prints a message:
&amp;lt;&amp;lt;mypackage_print&amp;gt;&amp;gt;=
func Print(message string) {
&amp;lt;&amp;lt;print&amp;gt;&amp;gt;
}
@
Finally, we can call this function from the main function:
&amp;lt;&amp;lt;main_call&amp;gt;&amp;gt;=
mypackage.Print(&amp;lt;&amp;lt;message&amp;gt;&amp;gt;)
@
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;See &lt;a class="link" href="https://github.com/getvictor/noweb_example/blob/main/hello.nw" target="_blank" rel="noopener"
&gt;the complete literate program&lt;/a&gt; on GitHub.&lt;/p&gt;
&lt;h3 id="generating-code-and-documentation-from-the-literate-program"&gt;&lt;a href="#generating-code-and-documentation-from-the-literate-program" class="header-anchor"&gt;&lt;/a&gt;Generating code and documentation from the literate program
&lt;/h3&gt;&lt;p&gt;To install the noweb tool with &lt;code&gt;brew&lt;/code&gt; on macOS, run the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew install noweb
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To generate the Go source code (tangle):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;notangle -Rgo.mod hello.nw &amp;gt; go.mod
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir -p mypackage
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;notangle -R&lt;span style="color:#e6db74"&gt;&amp;#39;mypackage/mypackage.go&amp;#39;&lt;/span&gt; hello.nw &amp;gt; mypackage/mypackage.go
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;notangle -Rmain.go hello.nw &amp;gt; main.go
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now we can run the program: &lt;code&gt;go run main.go&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;To generate the HTML documentation (weave):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;noweave -html hello.nw &amp;gt; hello.html
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We can open the &lt;code&gt;hello.html&lt;/code&gt; documentation in our web browser.&lt;/p&gt;
&lt;h2 id="key-takeaways-from-literate-programming"&gt;&lt;a href="#key-takeaways-from-literate-programming" class="header-anchor"&gt;&lt;/a&gt;Key takeaways from literate programming
&lt;/h2&gt;&lt;h3 id="1-the-developer-orders-the-code-for-maximum-readability"&gt;&lt;a href="#1-the-developer-orders-the-code-for-maximum-readability" class="header-anchor"&gt;&lt;/a&gt;1. The developer orders the code for maximum readability
&lt;/h3&gt;&lt;p&gt;Most of today&amp;rsquo;s programming languages were not designed with readability as their top guiding principle. They often
require the developer to put code in specific file sections, distracting the reader trying to understand the code. Some
examples include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;imports&lt;/li&gt;
&lt;li&gt;function and variable declarations, including nested functions&lt;/li&gt;
&lt;li&gt;error handling&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Today&amp;rsquo;s IDEs (Integrated Development Environments) have tried to help with the situation by automatically collapsing
boilerplate sections. However, we have not seen them take the next step of entirely hiding or virtually relocating
distracting code. This area is where today&amp;rsquo;s programming languages and IDEs need to improve.&lt;/p&gt;
&lt;h3 id="2-comments-are-first-class-citizens"&gt;&lt;a href="#2-comments-are-first-class-citizens" class="header-anchor"&gt;&lt;/a&gt;2. Comments are first-class citizens
&lt;/h3&gt;&lt;p&gt;In literate programming, comments (natural language) are the main body of the program. Source code, on the other hand,
is delegated to macros. Comments are easy to write and can be enhanced with additional processing, such as Markdown,
Mermaid diagrams, etc.&lt;/p&gt;
&lt;p&gt;Many of today&amp;rsquo;s language toolchains also have processors that generate HTML documentation from the comments. However,
none can mix arbitrary pieces of code with their documentation.&lt;/p&gt;
&lt;p&gt;Linting requirements to include comments often lead to meaningless comments that make the code less readable:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// This is a class.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Today, the closest mainstream approaches to literate programming are computational notebooks such as
&lt;a class="link" href="https://jupyter.org/" target="_blank" rel="noopener"
&gt;Jupyter&lt;/a&gt; and various online tutorials. These are great for sharing examples and small programs
with others but not sufficient for larger software projects.&lt;/p&gt;
&lt;p&gt;Some IDEs support rendering comments in a different style than the rest of the code, including rendering diagrams.
However, no standard works across IDEs and version control hosting systems like GitHub.&lt;/p&gt;
&lt;h3 id="3-code-from-multiple-source-files-can-be-present-in-one-place"&gt;&lt;a href="#3-code-from-multiple-source-files-can-be-present-in-one-place" class="header-anchor"&gt;&lt;/a&gt;3. Code from multiple source files can be present in one place
&lt;/h3&gt;&lt;p&gt;Literate programming allows us to include arbitrary source files in one program file. This behavior is helpful when you
want to keep related code in one place, such as an interface (abstract class) and its implementation.&lt;/p&gt;
&lt;p&gt;Modern IDEs can find all the implementations of an interface and often have a quick shortcut, allowing the developer to
jump between the two.&lt;/p&gt;
&lt;p&gt;Developers may also write their own preprocessors that split a single file into several modules or compile units.&lt;/p&gt;
&lt;p&gt;Although having more code in one file is sometimes useful, today&amp;rsquo;s developers typically have issues with splitting and
decoupling code files that have become too large and are no longer scalable.&lt;/p&gt;
&lt;h3 id="4-writing-code-is-more-difficult"&gt;&lt;a href="#4-writing-code-is-more-difficult" class="header-anchor"&gt;&lt;/a&gt;4. Writing code is more difficult
&lt;/h3&gt;&lt;p&gt;The main issue with literate programming is that it makes writing code much more difficult for the developer. It
introduces another level of abstraction and another set of tools and concepts that the software developer must be
familiar with.&lt;/p&gt;
&lt;p&gt;This general lesson applies to any system that tries to enhance the coding experience by adding another layer between
the user and the code. The new system must provide overwhelming benefits for software developers to switch to it.
TypeScript is an example of a successful layer over JavaScript.&lt;/p&gt;
&lt;h3 id="5-macros-make-reading-code-more-difficult"&gt;&lt;a href="#5-macros-make-reading-code-more-difficult" class="header-anchor"&gt;&lt;/a&gt;5. Macros make reading code more difficult
&lt;/h3&gt;&lt;p&gt;The literate program contains macros with their own names, adding to the namespace of functions and variables already
present in the computer program. These additional names increase the cognitive load of both reading and creating
literate programs.&lt;/p&gt;
&lt;p&gt;Today&amp;rsquo;s standard guidance is to make your variable and function names descriptive so the reader knows what they do
without additional comments. We can effectively replicate much of literate programming by replacing the literate
programming macros with our own well-named functions and ordering these functions in a file for maximum comprehension.&lt;/p&gt;
&lt;h3 id="6-no-tooling-support"&gt;&lt;a href="#6-no-tooling-support" class="header-anchor"&gt;&lt;/a&gt;6. No tooling support
&lt;/h3&gt;&lt;p&gt;Since literate programming is not widely used, it has little to no tooling support, syntax highlighting, or IDE support.
There is also no standard build system. Instead, the literate programming user must maintain their own custom build
system for the &amp;ldquo;tangle&amp;rdquo; and &amp;ldquo;weave&amp;rdquo; flows.&lt;/p&gt;
&lt;h2 id="see-literate-programming-example-code-on-github"&gt;&lt;a href="#see-literate-programming-example-code-on-github" class="header-anchor"&gt;&lt;/a&gt;See literate programming example code on GitHub
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://github.com/getvictor/noweb_example" target="_blank" rel="noopener"
&gt;Literate programming example using noweb&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Previously, we explained &lt;a class="link" href="../readable-code/" &gt;what readable code is and why it is important&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;We also reviewed &lt;a class="link" href="../code-complexity-metrics/" &gt;the top code complexity metrics&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="watch-the-literate-programming-example-and-takeaways"&gt;&lt;a href="#watch-the-literate-programming-example-and-takeaways" class="header-anchor"&gt;&lt;/a&gt;Watch the literate programming example and takeaways
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/8cwxxioVbfA"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>Top code complexity metrics every software dev should know</title><link>https://victoronsoftware.com/posts/code-complexity-metrics/</link><pubDate>Wed, 05 Mar 2025 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/code-complexity-metrics/</guid><description>&lt;img src="https://victoronsoftware.com/posts/code-complexity-metrics/code-complexity-headline.png" alt="Featured image of post Top code complexity metrics every software dev should know" /&gt;&lt;p&gt;&lt;em&gt;This article is part of a series on &lt;strong&gt;technical debt&lt;/strong&gt;. Check out the previous articles:&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="../readable-code/" &gt;Ways to improve your code for readability&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="../scaling-codebase-evolutionary-architecture/" &gt;How to scale a codebase with evolutionary architecture&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="intro-to-code-complexity-metrics"&gt;&lt;a href="#intro-to-code-complexity-metrics" class="header-anchor"&gt;&lt;/a&gt;Intro to code complexity metrics
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="#code-style" &gt;Code style&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#code-size" &gt;Code size&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#cyclomatic-complexity" &gt;Cyclomatic complexity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#cognitive-complexity" &gt;Cognitive complexity&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In the previous article on &lt;a class="link" href="../readable-code/" &gt;readable code&lt;/a&gt;, we discussed a few metrics for measuring unreadable code.
In this article, we will expand on some of those ideas and specifically focus on code complexity.&lt;/p&gt;
&lt;p&gt;Code complexity primarily refers to the difficulty of understanding a piece of code or a piece of the codebase, such as
a module. Complex code is difficult to modify because engineers must spend considerable mental energy to understand it.
Frequently, engineers will not understand the code well enough, so they&amp;rsquo;ll make a change to fix a bug, and the change
will introduce a new bug somewhere else. Lack of understanding also leads to
&lt;a class="link" href="https://victoronsoftware.com/posts/common-refactorings/#why-are-engineers-afraid-of-refactoring" target="_blank" rel="noopener"
&gt;a fear of refactoring&lt;/a&gt;,
because engineers don&amp;rsquo;t want to break the codebase.&lt;/p&gt;
&lt;h2 id="code-complexity-metrics"&gt;&lt;a href="#code-complexity-metrics" class="header-anchor"&gt;&lt;/a&gt;Code complexity metrics
&lt;/h2&gt;&lt;p&gt;Many code complexity measures overlap since they all try to measure the same thing.&lt;/p&gt;
&lt;h3 id="code-style"&gt;&lt;a href="#code-style" class="header-anchor"&gt;&lt;/a&gt;Code style
&lt;/h3&gt;&lt;p&gt;A standard code style is helpful for readability. For example, if I opened a file and saw that it had no indentation,
the max line length was 20, and somebody named all the variables with a leading &lt;code&gt;iwuzhere&lt;/code&gt;, I would be confused. I would
have to stop and carefully process the file. I would not have to slow down if the code style were consistent.&lt;/p&gt;
&lt;p&gt;The metric to track is the number of code style violations or the number of files violating the code style. Most
companies enforce a code style with their CI pipeline. Modern tooling can automatically reformat code to match the
agreed-upon code style, so code style should no longer be a complexity or readability issue.&lt;/p&gt;
&lt;h3 id="code-size"&gt;&lt;a href="#code-size" class="header-anchor"&gt;&lt;/a&gt;Code size
&lt;/h3&gt;&lt;p&gt;How much code is there? The more code there is, the longer it takes to read and understand it. The common metrics are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;program size or lines of code (LOC)
&lt;ul&gt;
&lt;li&gt;in a function&lt;/li&gt;
&lt;li&gt;in a file&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;number of functions/classes/modules/files&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The motivation for tracking these metrics is to help engineers split their functions/files/projects into smaller, more
manageable pieces. James Lewis from ThoughtWorks said that &amp;ldquo;a microservice should be as big as my head.&amp;rdquo; His idea is
that one person should be able to understand the entire codebase. The smaller the piece of code, the easier it is to
understand.&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="https://en.wikipedia.org/wiki/Halstead_complexity_measures" target="_blank" rel="noopener"
&gt;Halstead introduced a set of software complexity measures&lt;/a&gt;
in 1977, and one of his metrics was the Halstead volume, which is directly related to code size. We can approximate the
Halstead volume by ignoring all comments and whitespace, then multiplying the average code line length by the number of
lines of code. This approximation is a good enough metric for our purposes.&lt;/p&gt;
&lt;h3 id="cyclomatic-complexity"&gt;&lt;a href="#cyclomatic-complexity" class="header-anchor"&gt;&lt;/a&gt;Cyclomatic complexity
&lt;/h3&gt;&lt;p&gt;&lt;a class="link" href="https://en.wikipedia.org/wiki/Cyclomatic_complexity" target="_blank" rel="noopener"
&gt;Cyclomatic complexity&lt;/a&gt; measures the number of linearly independent
paths through a program&amp;rsquo;s source code. It is often used as the master metric for code complexity, uncovering
maintainability and hard-to-test parts of the codebase.&lt;/p&gt;
&lt;p&gt;A typical calculation of cyclomatic complexity is as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1 is the base complexity for a function&lt;/li&gt;
&lt;li&gt;for each &lt;code&gt;if&lt;/code&gt;, &lt;code&gt;case&lt;/code&gt;, &lt;code&gt;while&lt;/code&gt;, &lt;code&gt;for&lt;/code&gt;, or other branching statement, add 1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A good cyclomatic complexity is 10 or less. A score of 20 or more is generally considered difficult to understand. This
metric encourages us to write smaller functions.&lt;/p&gt;
&lt;h3 id="cognitive-complexity"&gt;&lt;a href="#cognitive-complexity" class="header-anchor"&gt;&lt;/a&gt;Cognitive complexity
&lt;/h3&gt;&lt;p&gt;An alternative to cyclomatic complexity is
&lt;a class="link" href="https://www.sonarsource.com/docs/CognitiveComplexity.pdf" target="_blank" rel="noopener"
&gt;cognitive complexity&lt;/a&gt;. This metric tries to adjust the
cyclomatic complexity metric to focus on the human reader&amp;rsquo;s mental load &amp;ndash; on the maintainability, and not on the
testability, of the code.&lt;/p&gt;
&lt;p&gt;The key differences in the calculation are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;for nested structures, extra incremental penalties are added&lt;/li&gt;
&lt;li&gt;recursion is penalized&lt;/li&gt;
&lt;li&gt;jumps to labels, such as &lt;code&gt;goto LABEL&lt;/code&gt;, are penalized&lt;/li&gt;
&lt;li&gt;&lt;code&gt;switch&lt;/code&gt; is preferred over nested &lt;code&gt;if&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;groups of similar logical operators are NOT penalized
&lt;ul&gt;
&lt;li&gt;for example, &lt;code&gt;a &amp;amp;&amp;amp; b &amp;amp;&amp;amp; c &amp;amp;&amp;amp; d&lt;/code&gt; is easier to understand than &lt;code&gt;a &amp;amp;&amp;amp; b || c &amp;amp;&amp;amp; d&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This metric is more difficult to calculate than cyclomatic complexity, but it is generally considered a better
approximation of code complexity. Many companies are adopting this metric.&lt;/p&gt;
&lt;h2 id="tool-and-language-specific-considerations"&gt;&lt;a href="#tool-and-language-specific-considerations" class="header-anchor"&gt;&lt;/a&gt;Tool and language-specific considerations
&lt;/h2&gt;&lt;p&gt;Modern tools can help with code maintainability issues. For example, AI tools that index the codebase can help explain
how a piece of code (or a feature) works. IDEs can also help by collapsing boilerplate code or improving readability in
other ways.&lt;/p&gt;
&lt;p&gt;In the Go programming language, the idiomatic way to check for errors is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;err&lt;/span&gt; &lt;span style="color:#f92672"&gt;!=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The above code is repeated everywhere and is typically collapsed by modern IDEs. However, cyclomatic complexity and
cognitive complexity metrics penalize it.&lt;/p&gt;
&lt;p&gt;We need a complexity tool where the user can adjust the penalties. This way, an engineering team can agree on what is
considered complex code based on their experience, language, and code style.&lt;/p&gt;
&lt;h3 id="go-complexity-metrics"&gt;&lt;a href="#go-complexity-metrics" class="header-anchor"&gt;&lt;/a&gt;Go complexity metrics
&lt;/h3&gt;&lt;p&gt;For measuring cyclomatic complexity, Go has &lt;a class="link" href="https://github.com/fzipp/gocyclo" target="_blank" rel="noopener"
&gt;gocyclo&lt;/a&gt;. For measuring cognitive
complexity, there is &lt;a class="link" href="https://github.com/uudashr/gocognit" target="_blank" rel="noopener"
&gt;gocognit&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id="what-is-modularity-and-why-is-it-important"&gt;&lt;a href="#what-is-modularity-and-why-is-it-important" class="header-anchor"&gt;&lt;/a&gt;What is modularity and why is it important
&lt;/h3&gt;&lt;p&gt;In the next article of this &lt;strong&gt;technical debt&lt;/strong&gt; series, we
&lt;a class="link" href="../software-modularity/" &gt;explain what is modularity and why it is important for modern scalable software systems&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../engineering-metrics-no-cost/" &gt;Track your team‚Äôs engineering performance with open-source tools&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
A step-by-step guide to setting up meaningful metrics using free-tier infrastructure‚Äîno SaaS subscriptions required.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../modular-monolith-attempt/" &gt;The modular monolith that wasn&amp;rsquo;t&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
A real-world account of attempting to modularize a 500K-line codebase and the lessons learned.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Recently, we &lt;a class="link" href="../literate-programming-lessons/" &gt;showed an example and key takeaways from literate programming&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;We also wrote &lt;a class="link" href="../ai-for-software-developers/" &gt;an overview of using AI in software development&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="watch-us-discuss-and-show-examples-of-code-complexity-metrics"&gt;&lt;a href="#watch-us-discuss-and-show-examples-of-code-complexity-metrics" class="header-anchor"&gt;&lt;/a&gt;Watch us discuss and show examples of code complexity metrics
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/HzZQqrhX3cg"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>How to use AI for software development (2025)</title><link>https://victoronsoftware.com/posts/ai-for-software-developers/</link><pubDate>Wed, 26 Feb 2025 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/ai-for-software-developers/</guid><description>&lt;img src="https://victoronsoftware.com/posts/ai-for-software-developers/ai-building-software.png" alt="Featured image of post How to use AI for software development (2025)" /&gt;&lt;p&gt;The AI landscape is changing rapidly. A new tool seems to come out weekly, or we hear about a breakthrough. As a
software engineer, it is hard to keep up with all the latest developments and even harder to figure out what is relevant
to your day-to-day work. Many tech leaders claim that AI is helping them achieve greater engineering velocity, improving
the quality of their code, and enhancing the engineering experience, to name a few. But how can you leverage AI to
improve your work as a software engineer? And, most importantly, what is the most effective way to use AI right now?&lt;/p&gt;
&lt;p&gt;We have followed AI since the early 2000s, when Jeff Hawkins published
&lt;a class="link" href="https://en.wikipedia.org/wiki/On_Intelligence" target="_blank" rel="noopener"
&gt;On Intelligence&lt;/a&gt;. AI has come a long way since then. Today, most
software engineers can benefit from some AI.&lt;/p&gt;
&lt;p&gt;The top AI use cases for software engineers are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="#code-completion" &gt;Code completion&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#code-generation" &gt;Code generation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#summarizing-or-explaining-code" &gt;Summarizing or explaining code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#agentic-coding" &gt;Agentic coding&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Some software developers have other use cases for AI, such as image generation, but this article will focus on the above
ones.&lt;/p&gt;
&lt;h2 id="code-completion"&gt;&lt;a href="#code-completion" class="header-anchor"&gt;&lt;/a&gt;Code completion
&lt;/h2&gt;&lt;p&gt;The original GitHub Copilot popularized AI code completion. It is a tool that can be integrated into your IDE and can
perform multi-line code completions. GitHub Copilot and similar tools have been extremely popular with software
developers. We found AI code completion extremely helpful, even though it occasionally generates function signatures and
other code that is not quite right.&lt;/p&gt;
&lt;p&gt;For example, after creating the &lt;code&gt;PubSubMessage&lt;/code&gt; struct in our code, Copilot recommended the &lt;code&gt;PubSubMessageAttributes&lt;/code&gt;
struct. Opening the completions window shows other multi-line suggestions.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/ai-for-software-developers/copilot-example.png"&gt;&lt;figcaption&gt;
&lt;h4&gt;GitHub Copilot code completion example&lt;/h4&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;The code completion is not only for software code. We used it for documentation, such as writing a user guide for a new
feature. AI is most useful for boilerplate introductory content. However, beware that some search engines may be able to
detect the use of AI in your documentation and reduce your search ranking.&lt;/p&gt;
&lt;h2 id="code-generation"&gt;&lt;a href="#code-generation" class="header-anchor"&gt;&lt;/a&gt;Code generation
&lt;/h2&gt;&lt;p&gt;Code generation is similar to code completion, but the desired result is a complete function or code block. Typically,
engineers use a chat interface such as ChatGPT and provide it with a description of the desired function. Providing a
detailed description along with inputs and outputs is key to getting the best results.&lt;/p&gt;
&lt;p&gt;For example, given the following prompt:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Write a Golang function that takes path.URL, makes a GET request to that URL, parses the JSON response, and returns
the &amp;ldquo;attributes&amp;rdquo; and &amp;ldquo;data&amp;rdquo; fields of the response.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ChatGPT o1 model generated the following code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// FetchAttributesAndData makes a GET request to the provided URL, parses&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// the JSON response, and returns the &amp;#34;attributes&amp;#34; and &amp;#34;data&amp;#34; fields.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;func&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;FetchAttributesAndData&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;u&lt;/span&gt; &lt;span style="color:#f92672"&gt;*&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;url&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;URL&lt;/span&gt;) (&lt;span style="color:#66d9ef"&gt;map&lt;/span&gt;[&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;]&lt;span style="color:#66d9ef"&gt;interface&lt;/span&gt;{}, &lt;span style="color:#66d9ef"&gt;interface&lt;/span&gt;{}, &lt;span style="color:#66d9ef"&gt;error&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;resp&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;err&lt;/span&gt; &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;http&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Get&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;u&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;String&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;err&lt;/span&gt; &lt;span style="color:#f92672"&gt;!=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;nil&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;nil&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;defer&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;resp&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Body&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Close&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// You may also check resp.StatusCode for error handling if desired&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;resp&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;StatusCode&lt;/span&gt; &lt;span style="color:#f92672"&gt;!=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;http&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;StatusOK&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;nil&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;nil&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;fmt&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Errorf&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;unexpected status code: %d&amp;#34;&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;resp&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;StatusCode&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Define a struct to capture the JSON structure&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;result&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Attributes&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;map&lt;/span&gt;[&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;]&lt;span style="color:#66d9ef"&gt;interface&lt;/span&gt;{} &lt;span style="color:#e6db74"&gt;`json:&amp;#34;attributes&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Data&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;interface&lt;/span&gt;{} &lt;span style="color:#e6db74"&gt;`json:&amp;#34;data&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;err&lt;/span&gt; &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;json&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;NewDecoder&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;resp&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Body&lt;/span&gt;).&lt;span style="color:#a6e22e"&gt;Decode&lt;/span&gt;(&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;result&lt;/span&gt;); &lt;span style="color:#a6e22e"&gt;err&lt;/span&gt; &lt;span style="color:#f92672"&gt;!=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;nil&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;nil&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;result&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Attributes&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;result&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Data&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ChatGPT also provided some documentation and a usage example.&lt;/p&gt;
&lt;p&gt;Previously, software engineers would accomplish this task by searching Google or StackOverflow for similar code
snippets. Now, they can use AI chatbots to generate this code. This approach is most useful when you need to generate
code that&amp;rsquo;s not your area of expertise.&lt;/p&gt;
&lt;p&gt;Some programming languages have dedicated AI code-generation tools. For example, you can create Go functions and
packages online with &lt;a class="link" href="https://sketch.dev/" target="_blank" rel="noopener"
&gt;sketch.dev&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="summarizing-or-explaining-code"&gt;&lt;a href="#summarizing-or-explaining-code" class="header-anchor"&gt;&lt;/a&gt;Summarizing or explaining code
&lt;/h2&gt;&lt;p&gt;When software engineers work on a large codebase, they often need to understand code written by other engineers, some of
whom may have left the company, and they may also need to find a specific piece of code in the codebase.&lt;/p&gt;
&lt;p&gt;AI can help by reading the codebase and adding it to its context. This is an example of Retrieval-Augmented Generation
(RAG), where AI combines its general knowledge with the specific context of the codebase.&lt;/p&gt;
&lt;p&gt;To understand the codebase, the AI tool needs to add the code to its context or to index the codebase. Then, the tool
can use a combination of AI and deterministic search to find the relevant code. Below is an example of a question we
asked &lt;a class="link" href="https://www.cursor.com/" target="_blank" rel="noopener"
&gt;Cursor&lt;/a&gt; IDE about our codebase:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In which Go files is macOS disk encryption code located?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Cursor provided a list of files and additional information on the top hits.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/ai-for-software-developers/cursor-example.png"&gt;&lt;figcaption&gt;
&lt;h4&gt;Cursor codebase search example&lt;/h4&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Codebase-wide queries are a great way to find information yourself before asking the broader team. They are also a
decent way to learn the codebase.&lt;/p&gt;
&lt;h2 id="agentic-coding"&gt;&lt;a href="#agentic-coding" class="header-anchor"&gt;&lt;/a&gt;Agentic coding
&lt;/h2&gt;&lt;p&gt;Agentic coding refers to using an AI agent to write code and perform tasks on your behalf. Using agents is a more
advanced use case, requiring you to know the AI tools, processes, and LLMs well. A good AI agent can:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Write code, including creating and moving files&lt;/li&gt;
&lt;li&gt;Write and run tests, including Browser UI tests&lt;/li&gt;
&lt;li&gt;Write, read, and follow documentation&lt;/li&gt;
&lt;li&gt;Do terminal operations such as installing applications&lt;/li&gt;
&lt;li&gt;Do Git operations such as pushing&lt;/li&gt;
&lt;li&gt;Connect to other servers with SSH&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Currently, the top agentic coding tools are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://github.com/RooVetGit/Roo-Code" target="_blank" rel="noopener"
&gt;Roo Code&lt;/a&gt; (VSCode plugin)&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://cline.bot/" target="_blank" rel="noopener"
&gt;Cline&lt;/a&gt; (VSCode plugin)&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.cursor.com/" target="_blank" rel="noopener"
&gt;Cursor&lt;/a&gt; (IDE built on top of VSCode)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There are many other tools and platforms available. GitHub Copilot also announced Agent mode, which is available in
preview as of this writing. JetBrains has announced &lt;a class="link" href="https://www.jetbrains.com/junie/" target="_blank" rel="noopener"
&gt;Junie&lt;/a&gt;, which is only available
via the Early Access Program.&lt;/p&gt;
&lt;p&gt;As the agentic coding tools are still in their early stages, changing rapidly, and require a lot of handholding, it is
reasonable to wait 6 to 12 months before revisiting them.&lt;/p&gt;
&lt;h3 id="ai-coding-agent-workflows"&gt;&lt;a href="#ai-coding-agent-workflows" class="header-anchor"&gt;&lt;/a&gt;AI coding agent workflows
&lt;/h3&gt;&lt;p&gt;The following are some workflow suggestions for using an AI coding agent to create a small application.&lt;/p&gt;
&lt;p&gt;First, start with some context regarding what you want to build. Create a README or a plan outlining how you want to
structure the application and the steps to implement it. You can use another general-purse AI, such as ChatGPT, to help
you create the high-level plan.&lt;/p&gt;
&lt;p&gt;For example, we asked ChatGPT to create a high-level plan with the following prompt:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We want to create a mock Google Android Management API server using an AI agent. The server is written in Golang and
will interact with our MDM solution during testing. It should hold the state for enterprises, profiles, and fake
devices enrolled in it. The server should have a mock PubSub webhook that will push notifications regarding ENROLLMENT
and STATUS_REPORTs. Please create a plan that another AI agent can implement in several steps.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Next, ask the AI agent to read the plan, update it, and create a more detailed plan. It may make sense to break the plan
into smaller parts and treat each part as a separate project. In effect, you act as the AI agent&amp;rsquo;s project manager.&lt;/p&gt;
&lt;p&gt;Make sure to have documentation and have the AI agent update it regularly. In addition to the README, you can have API
specs, secrets, and other documentation files.&lt;/p&gt;
&lt;p&gt;Tell the AI agent to initialize a git repo, create the project structure, and start implementing the plan. For each
step, ask the AI agent to create tests. After each step, ask the AI agent to update the documentation and commit the
changes. This way, you can easily rollback if the AI agent gets stuck or goes off the rails.&lt;/p&gt;
&lt;p&gt;Try to be as precise as possible in your prompts.&lt;/p&gt;
&lt;p&gt;When adding a new feature, you can start a new session with the AI agent and ask it to read all the documentation. This
will &amp;ldquo;initialize&amp;rdquo; the AI agent with the project context.&lt;/p&gt;
&lt;p&gt;Work in small development iterations with your AI agent.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/ai-for-software-developers/ai-agent-workflow.png"&gt;&lt;figcaption&gt;
&lt;h4&gt;AI agent workflow&lt;/h4&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Learn about your AI agent&amp;rsquo;s specific features to level up your skills. Often, there are ways to provide context to the
agent or give special meaning to certain words or files.&lt;/p&gt;
&lt;p&gt;At some point, you may want to take over the maintenance of the code from the AI agent. For example, check the code into
your main repository and maintain it as any other human-written code.&lt;/p&gt;
&lt;h3 id="ai-coding-agent-issues"&gt;&lt;a href="#ai-coding-agent-issues" class="header-anchor"&gt;&lt;/a&gt;AI coding agent issues
&lt;/h3&gt;&lt;p&gt;The main issue with AI coding agents is that they make mistakes. If you spot their mistake, you can tell them about it,
and they will generally correct it. However, if you can&amp;rsquo;t spot their mistake, the agent may end up in a loop where it
keeps trying to fix the issue, but your application still doesn&amp;rsquo;t work. That is why it is essential to work in small
iterations where you can roll back and start over.&lt;/p&gt;
&lt;p&gt;The other issue is that AI agents are slow. Often, they need to take several steps to make progress, and the human is
left waiting‚Äîbeing there just in case they need help or go off track. Theoretically, a single human could manage
multiple AI agents, but in practice, it is hard for people to frequently switch between multiple cognitively demanding
tasks.&lt;/p&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../will-ai-agents-replace-developers/" &gt;Will AI agents replace software developers?&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
A realistic look at how AI coding agents are reshaping software development and what engineers need to do to stay ahead.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../introducing-mcp/" &gt;Introducing MCP: Lessons from building an AI-driven server&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Our lessons learned from building an AI-driven MCP server and how we taught an AI agent to use our product.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../multitasking-with-ai-agents/" &gt;Multitasking with AI agents: When it works and when it fails&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Practical tips on managing AI agent workflows and balancing focus with efficiency.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../scaling-codebase-evolutionary-architecture/" &gt;How to scale your codebase with incremental design&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Learn evolutionary architecture patterns that help your codebase grow without becoming unmaintainable.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../readable-code/" &gt;What is readable code and why is it important?&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Understand how code clarity impacts team velocity and why readability should be a priority.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="watch-how-to-use-ai-for-software-development"&gt;&lt;a href="#watch-how-to-use-ai-for-software-development" class="header-anchor"&gt;&lt;/a&gt;Watch how to use AI for software development
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/PVdqwcwc2_o"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>How to analyze Go build times</title><link>https://victoronsoftware.com/posts/analyze-go-build/</link><pubDate>Wed, 19 Feb 2025 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/analyze-go-build/</guid><description>&lt;img src="https://victoronsoftware.com/posts/analyze-go-build/analyze-go-build-headline.png" alt="Featured image of post How to analyze Go build times" /&gt;&lt;p&gt;Go is designed for fast compilation. However, sometimes, you notice that your builds have gotten slower or that certain
code changes cause an unexpectedly long recompile time. In this article, we show how to analyze your compilation times
and take steps to improve them.&lt;/p&gt;
&lt;h2 id="turn-on-the-go-build-cache"&gt;&lt;a href="#turn-on-the-go-build-cache" class="header-anchor"&gt;&lt;/a&gt;Turn on the Go build cache
&lt;/h2&gt;&lt;p&gt;First, you must know that Go is very good at caching build artifacts. If you make a small change and rerun the build,
the rerun will be significantly faster because Go will reuse the cached artifacts from the previous build. However, if
you update the Go version, change the build flags, or pull in new or different dependencies, Go may rebuild everything
from scratch.&lt;/p&gt;
&lt;p&gt;The first step in improving your build time is to make sure you are using a build cache. The cache is enabled by default
on your development machine, but that may not be true on your CI/CD system. Ensure you use a build cache across multiple
CI/CD runs. For example, the GitHub Actions
&lt;a class="link" href="https://github.com/actions/setup-go?tab=readme-ov-file#caching-dependency-files-and-build-outputs" target="_blank" rel="noopener"
&gt;&lt;code&gt;setup-go&lt;/code&gt; action has caching turned on by default&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="analyze-a-go-build"&gt;&lt;a href="#analyze-a-go-build" class="header-anchor"&gt;&lt;/a&gt;Analyze a Go build
&lt;/h2&gt;&lt;p&gt;We can clear the build cache with the following:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;go clean -cache
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Now, we can run a clean build with the &lt;code&gt;-debug-trace&lt;/code&gt; flag:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;time go build -debug-trace=debug-trace.json ./cmd/fleet
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;We use the &lt;code&gt;time&lt;/code&gt; command to measure the time the build takes. It is good practice to always use the &lt;code&gt;time&lt;/code&gt; command when
measuring performance. The &lt;code&gt;time&lt;/code&gt; command is built into our Z shell (zsh), but a similar command is available in other
shells and OSes.&lt;/p&gt;
&lt;p&gt;In the time output, we see how long our build took:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;79.25s user 20.13s system 518% cpu 19.183 total
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The total time (19.183s) is the wall clock time we waited for the build to finish. The user and system times are spent
executing user and system code. They are larger than the wall clock time because we use a multi-core machine.&lt;/p&gt;
&lt;p&gt;The debug trace is in
&lt;a class="link" href="https://docs.google.com/document/d/1CvAClvFfyA5R-PhYUmn5OOQtYMH4h6I0nSsKchNAySU/preview" target="_blank" rel="noopener"
&gt;Trace Event Format&lt;/a&gt; and looks
like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{&lt;span style="color:#f92672"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;Running build command&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ph&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;B&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ts&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;1739801608027038&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;pid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;tid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;,{&lt;span style="color:#f92672"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;load.PackagesAndErrors&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ph&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;B&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ts&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;1739801608027222&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;pid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;tid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;,{&lt;span style="color:#f92672"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;modfetch.download github.com/WatchBeam/clock@v0.0.0-20170901150240-b08e6b4da7ea&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ph&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;B&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ts&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;1739801608038996&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;pid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;tid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;,{&lt;span style="color:#f92672"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;modfetch.download github.com/WatchBeam/clock@v0.0.0-20170901150240-b08e6b4da7ea&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ph&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;E&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ts&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;1739801608039035&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;pid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;tid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;,{&lt;span style="color:#f92672"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;modfetch.download github.com/briandowns/spinner@v1.23.1&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ph&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;B&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ts&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;1739801608039382&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;pid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;tid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;,{&lt;span style="color:#f92672"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;modfetch.download github.com/briandowns/spinner@v1.23.1&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ph&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;E&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ts&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;1739801608039410&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;pid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;tid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;,{&lt;span style="color:#f92672"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;modfetch.download github.com/e-dard/netbug@v0.0.0-20151029172837-e64d308a0b20&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ph&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;B&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ts&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;1739801608039643&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;pid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;tid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;,{&lt;span style="color:#f92672"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;modfetch.download github.com/e-dard/netbug@v0.0.0-20151029172837-e64d308a0b20&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ph&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;E&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ts&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;1739801608039808&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;pid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;tid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;,{&lt;span style="color:#f92672"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;modfetch.download github.com/getsentry/sentry-go@v0.18.0&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ph&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;B&amp;#34;&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;ts&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;1739801608053496&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;pid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;,&lt;span style="color:#f92672"&gt;&amp;#34;tid&amp;#34;&lt;/span&gt;:&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;...&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;and&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;so&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;on&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;A widespread tool for visualizing Trace Event Format is &lt;a class="link" href="https://ui.perfetto.dev/" target="_blank" rel="noopener"
&gt;Perfetto&lt;/a&gt;. Click &lt;code&gt;Open trace file&lt;/code&gt;
and upload your trace. Use &lt;code&gt;Ctrl&lt;/code&gt; + &lt;code&gt;Scroll&lt;/code&gt; to zoom in and out and &lt;code&gt;Shift&lt;/code&gt; + &lt;code&gt;Scroll&lt;/code&gt; to move right or left. The &lt;code&gt;WASD&lt;/code&gt;
keyboard keys also work.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/analyze-go-build/debug-trace-clean.png"&gt;&lt;figcaption&gt;
&lt;h4&gt;The Perfetto tool showing a Go build debug trace&lt;/h4&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;The trace shows that our &lt;a class="link" href="https://github.com/mattn/go-sqlite3" target="_blank" rel="noopener"
&gt;https://github.com/mattn/go-sqlite3&lt;/a&gt; dependency is taking most of the build time. The fact that
we have 16 cores doesn&amp;rsquo;t help because Go is not parallelizing the build for this dependency. This dependency uses CGO,
so the build takes time to compile C files.&lt;/p&gt;
&lt;p&gt;We attempted to speed up the build by adding the &lt;code&gt;go-sqlite3&lt;/code&gt; dependency to our top &lt;code&gt;./cmd/fleet&lt;/code&gt; package, assuming the
build tool would start compiling it first. However, the total build took longer because the subsequent link step became
much slower.&lt;/p&gt;
&lt;p&gt;As we mentioned above, the initial compile time is usually not a big concern if you are using a build cache. So, let&amp;rsquo;s
try making a small change and analyzing the recompile time. We make a change to a frequently modified package.&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;echo &amp;#39;var _ = &amp;#34;bozo&amp;#34;&amp;#39; &amp;gt;&amp;gt; ./server/datastore/mysql/mysql.go
time go build -debug-trace=debug-trace-recompile.json ./cmd/fleet
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The total recompile time is 1.229s, and the trace looks like this:&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/analyze-go-build/debug-trace-recompile.png"&gt;&lt;figcaption&gt;
&lt;h4&gt;The Perfetto tool showing a Go recompile debug trace&lt;/h4&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;We see that the &lt;code&gt;mysql&lt;/code&gt; package we modified is taking about half the recompile time. The &lt;code&gt;load.PackagesAndErrors&lt;/code&gt; step
takes ~300ms and is not parallelized. This step is part of the Go toolchain. Modifying a smaller package would reduce
the recompile time. If you have a large package that is frequently modified, you can improve the build time by splitting
it into smaller packages.&lt;/p&gt;
&lt;h2 id="find-why-dependencies"&gt;&lt;a href="#find-why-dependencies" class="header-anchor"&gt;&lt;/a&gt;Find why dependencies are included in the build
&lt;/h2&gt;&lt;p&gt;In a previous article, we described &lt;a class="link" href="../go-package-dependencies" &gt;how to find Go package dependencies&lt;/a&gt;. A way to analyze
the build and see why a dependency is being pulled in is to use the &lt;code&gt;-debug-actiongraph&lt;/code&gt; flag:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;go clean -cache
time go build -debug-actiongraph=actiongraph.json ./cmd/fleet
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The resulting &lt;code&gt;actiongraph.json&lt;/code&gt; is a JSON file containing an array of entries such as:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;ID&amp;#34;&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;27&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Mode&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;build&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Package&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/fleetdm/fleet/v4/server/datastore/filesystem&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Deps&amp;#34;&lt;/span&gt;: [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;4&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;11&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;23&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;33&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;93&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;97&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;180&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;103&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Objdir&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;/var/folders/r6/br06kz3s6lxb_75zz6dkjvvc0000gn/T/go-build3105381437/b845/&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Priority&amp;#34;&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;843&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;NeedBuild&amp;#34;&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;ActionID&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;JGOAJdypDJJbwlHvaUPE&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;BuildID&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;JGOAJdypDJJbwlHvaUPE/B47ZHL3FCDKdll6TubU2&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;TimeReady&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2025-02-18T09:02:54.257806-06:00&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;TimeStart&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2025-02-18T09:02:54.272756-06:00&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;TimeDone&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2025-02-18T09:02:54.293356-06:00&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Cmd&amp;#34;&lt;/span&gt;: [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;/opt/homebrew/Cellar/go/1.23.4/libexec/pkg/tool/darwin_arm64/compile -o /var/folders/r6/br06kz3s6lxb_75zz6dkjvvc0000gn/T/go-build3105381437/b845/_pkg_.a -trimpath \&amp;#34;/var/folders/r6/br06kz3s6lxb_75zz6dkjvvc0000gn/T/go-build3105381437/b845=\u003e\&amp;#34; -p github.com/fleetdm/fleet/v4/server/datastore/filesystem -lang=go1.23 -complete -buildid JGOAJdypDJJbwlHvaUPE/JGOAJdypDJJbwlHvaUPE -goversion go1.23.4 -c=4 -shared -nolocalimports -importcfg /var/folders/r6/br06kz3s6lxb_75zz6dkjvvc0000gn/T/go-build3105381437/b845/importcfg -pack /Users/victor/work/fleet/server/datastore/filesystem/software_installer.go&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;CmdReal&amp;#34;&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;17479792&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;CmdUser&amp;#34;&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;17327000&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;CmdSys&amp;#34;&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;5692000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;span style="color:#960050;background-color:#1e0010"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;CmdReal&lt;/code&gt;, &lt;code&gt;CmdUser&lt;/code&gt;, and &lt;code&gt;CmdSys&lt;/code&gt; fields show the real, user, and system time spent executing the command. The
&lt;code&gt;Deps&lt;/code&gt; field shows the package&amp;rsquo;s dependencies.&lt;/p&gt;
&lt;p&gt;Although we can write our own tool to analyze the &lt;code&gt;actiongraph.json&lt;/code&gt; file, we can also use the
&lt;a class="link" href="https://github.com/icio/actiongraph" target="_blank" rel="noopener"
&gt;https://github.com/icio/actiongraph&lt;/a&gt; tool. Install the tool with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;go install github.com/icio/actiongraph@latest
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We can find the longest compile steps with:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;actiongraph -f actiongraph.json top
13.786s 16.14% build github.com/mattn/go-sqlite3
1.396s 17.78% build runtime/cgo
1.327s 19.33% build github.com/aws/aws-sdk-go/service/s3
1.295s 20.85% build github.com/aws/aws-sdk-go/aws/endpoints
1.095s 22.13% build github.com/google/go-github/v37/github
1.078s 23.39% build github.com/elastic/go-sysinfo/providers/darwin
0.983s 24.55% build github.com/open-policy-agent/opa/ast
0.975s 25.69% build github.com/klauspost/compress/zstd
0.916s 26.76% build github.com/shoenig/go-m1cpu
0.755s 27.64% build crypto/tls
0.742s 28.51% build github.com/fleetdm/fleet/v4/server/fleet
0.722s 29.36% build github.com/shirou/gopsutil/v3/process
0.664s 30.14% build net
0.626s 30.87% build github.com/open-policy-agent/opa/topdown
0.625s 31.60% build runtime
0.622s 32.33% build google.golang.org/protobuf/internal/impl
0.609s 33.04% build github.com/fleetdm/fleet/v4/server/datastore/mysql
0.605s 33.75% build golang.org/x/net/http2
0.577s 34.43% build github.com/aws/aws-sdk-go/service/lambda
0.576s 35.10% build github.com/spf13/pflag
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The tool also has a &lt;code&gt;graph&lt;/code&gt; subcommand to highlight all import paths from the build target to the package indicated by
&lt;code&gt;--why&lt;/code&gt;. We can convert the &lt;code&gt;.dot&lt;/code&gt; file to an SVG file with the &lt;a class="link" href="https://graphviz.org/" target="_blank" rel="noopener"
&gt;Graphviz&lt;/a&gt; &lt;code&gt;dot&lt;/code&gt; command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;actiongraph -f actiongraph.json graph --why github.com/mattn/go-sqlite3 &amp;gt; actiongraph-sqlite3.dot
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;dot -Tsvg &amp;lt; actiongraph-sqlite3.dot &amp;gt; actiongraph-sqlite3.svg
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/analyze-go-build/actiongraph-sqlite3.svg"&gt;&lt;figcaption&gt;
&lt;h4&gt;Why the go-sqlite3 package is included in the build&lt;/h4&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;We can use this knowledge to refactor the codebase or, perhaps, hide the problematic dependency behind a build flag.&lt;/p&gt;
&lt;p&gt;There is no official documentation for the above debug flags. However, they can be found in the
&lt;a class="link" href="https://go.dev/src/cmd/go/internal/work/build.go" target="_blank" rel="noopener"
&gt;Go source code&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Undocumented, unstable debugging flags.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;cmd&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Flag&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;StringVar&lt;/span&gt;(&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;cfg&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;DebugActiongraph&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;debug-actiongraph&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;cmd&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Flag&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;StringVar&lt;/span&gt;(&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;cfg&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;DebugRuntimeTrace&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;debug-runtime-trace&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;cmd&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Flag&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;StringVar&lt;/span&gt;(&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;cfg&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;DebugTrace&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;debug-trace&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Previously, we explained &lt;a class="link" href="../go-test-execution-time/" &gt;how to accurately measure the execution time of Go tests&lt;/a&gt; and
&lt;a class="link" href="../large-go-test-suite/" &gt;how to break apart a large Go test suite&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;We also &lt;a class="link" href="../common-refactorings/" &gt;demonstrated some common code refactorings that can be done with your IDE&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="watch-how-to-analyze-go-builds"&gt;&lt;a href="#watch-how-to-analyze-go-builds" class="header-anchor"&gt;&lt;/a&gt;Watch how to analyze Go builds
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/fs81KvxhwhI"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>How to scale your codebase with evolutionary architecture</title><link>https://victoronsoftware.com/posts/scaling-codebase-evolutionary-architecture/</link><pubDate>Wed, 29 Jan 2025 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/scaling-codebase-evolutionary-architecture/</guid><description>&lt;img src="https://victoronsoftware.com/posts/scaling-codebase-evolutionary-architecture/evolutionary-architecture-headline.png" alt="Featured image of post How to scale your codebase with evolutionary architecture" /&gt;&lt;p&gt;&lt;em&gt;This article is part of a series on &lt;strong&gt;technical debt&lt;/strong&gt;. Check out the previous article:&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="../readable-code/" &gt;Why readable code is important and how to refactor code for readability&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="intro-to-evolutionary-architecture"&gt;&lt;a href="#intro-to-evolutionary-architecture" class="header-anchor"&gt;&lt;/a&gt;Intro to evolutionary architecture
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="#current-architecture" &gt;Current architecture&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#problems-with-the-current-architecture" &gt;Problems with the current architecture&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#good-architecture" &gt;Good architecture&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#evolutionary-architecture" &gt;Evolutionary architecture&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Evolutionary architecture refers to a software design approach that embraces change as a fundamental aspect of system
development. Instead of aiming to create a fixed and perfect architecture upfront, it allows the system to evolve in
response to new requirements, technologies, and insights. Evolutionary architecture is a critical tool for reducing
technical debt.&lt;/p&gt;
&lt;p&gt;Evolutionary design, or incremental design, is another term for this approach. Generally, evolutionary design refers to
changes on a smaller scale, such as refactoring code or adding new features. On the other hand, evolutionary
architecture refers to changes on a larger scale, such as reorganizing the codebase or splitting a monolithic
application into microservices. That said, there is no strict boundary between the two terms. We will use the term
evolutionary architecture.&lt;/p&gt;
&lt;p&gt;In this article, we provide an example of scaling your codebase to accommodate a growing number of features and
developers.&lt;/p&gt;
&lt;h2 id="current-architecture"&gt;&lt;a href="#current-architecture" class="header-anchor"&gt;&lt;/a&gt;Current architecture
&lt;/h2&gt;&lt;p&gt;We base our example on a theoretical codebase, but real-world experiences inspire it. The problems and solutions we
discuss are common in software development, especially in startups and small companies.&lt;/p&gt;
&lt;p&gt;The initial state of our example codebase is a web application developed in a mono-repository. The application was built
from the ground up with a simple architecture, focusing on adding new features and finding product-market fit.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/scaling-codebase-evolutionary-architecture/current-design.png"&gt;&lt;figcaption&gt;
&lt;h4&gt;Current design with a few large modules.&lt;/h4&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;The current design divides the codebase into a few large modules. We use the term &lt;em&gt;module&lt;/em&gt; to mean a logical grouping of
code in the same files and directories.&lt;/p&gt;
&lt;p&gt;However, after a couple of years, the application has grown significantly in features, complexity, and team size. The
organization now has three product teams working on different functional areas of the application. No one has updated
the initial architecture, which is insufficient to support the growing codebase and development team.&lt;/p&gt;
&lt;h2 id="problems-with-the-current-architecture"&gt;&lt;a href="#problems-with-the-current-architecture" class="header-anchor"&gt;&lt;/a&gt;Problems with the current architecture
&lt;/h2&gt;&lt;p&gt;A significant problem that the engineering team has been facing is &lt;strong&gt;an increase in bugs and a longer time to fix
them&lt;/strong&gt;. The code for each feature is sprinkled throughout the codebase and tightly coupled to other seemingly unrelated
features. This complexity makes it difficult to understand, test, and keep existing features working as new ones are
added.&lt;/p&gt;
&lt;p&gt;Speaking of new features, the team has been struggling to add them on time. The codebase has become a tangled web of
dependencies, and any change in one part of the codebase can have unintended consequences in other parts. Adding a
feature requires modifying many parts of the codebase, which requires understanding the entire codebase, which many
developers lack. The lack of knowledge and the changes to many parts of the codebase have led to &lt;strong&gt;features taking
significantly longer to implement&lt;/strong&gt; than initially estimated.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Maintaining feature branches&lt;/strong&gt; for over a few days and making patch fixes to existing releases has become impossible.
The codebase is so intertwined that any changes may cause merge conflicts. The increased likelihood of merge conflicts
has discouraged developers from refactoring and cleaning up the code base. This tendency to leave the code as-is has
perpetuated the slide in code quality.&lt;/p&gt;
&lt;p&gt;Tests have also become a problem. The &lt;strong&gt;test suite has been in a frequent state of disrepair&lt;/strong&gt;. There is no clear
ownership of tests, so engineers have been reluctant to fix them. Some engineers have stopped paying attention to
failing CI alerts, figuring that the problems are caused by one of the other two teams.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tests have also become slower&lt;/strong&gt; and slower, especially the integration tests that test the API and include the service
layer, the datastore layer, and an actual database. These tests do not run in parallel; every additional feature slows
down the compile and increases test time. Test files have become bloated with tests for multiple features, making them
slow to load in the editor, difficult to navigate, and impossible to diff for PR reviews.&lt;/p&gt;
&lt;p&gt;Finally, the &lt;strong&gt;onboarding time for new developers has been growing&lt;/strong&gt;. It takes weeks for new developers to understand
the codebase and start contributing.&lt;/p&gt;
&lt;h2 id="good-architecture"&gt;&lt;a href="#good-architecture" class="header-anchor"&gt;&lt;/a&gt;Good architecture
&lt;/h2&gt;&lt;p&gt;At this point in the company&amp;rsquo;s life, an exemplary architecture would be separate groups of modules corresponding to the
three product teams.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/scaling-codebase-evolutionary-architecture/ideal-design.png"&gt;&lt;figcaption&gt;
&lt;h4&gt;Good design with dedicated modules for each product team.&lt;/h4&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Each team would be responsible for its own set of modules, which aligns with Agile principles. The modules would be
loosely coupled, and the teams would be able to work independently on their features without affecting other teams. The
amount of code that each engineer has to understand and change would be drastically reduced.&lt;/p&gt;
&lt;p&gt;This architecture would have eliminated or significantly reduced the problems that the engineering team has been facing.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The reduced complexity and increased understanding of the codebase would lead to fewer and faster to fix bugs&lt;/li&gt;
&lt;li&gt;Faster feature development due to cleaner code and fewer dependencies&lt;/li&gt;
&lt;li&gt;Reduced merge conflicts for PRs, especially for database migrations and schema changes&lt;/li&gt;
&lt;li&gt;Rarely failing test suite due to clear ownership of tests&lt;/li&gt;
&lt;li&gt;Faster tests due to each team focusing on testing their slice of the product. Limited complete product integration
tests would still be present.&lt;/li&gt;
&lt;li&gt;Faster onboarding time for new developers&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;However, the company does not have this architecture. Building this architecture upfront would have been foolish since
it would have consumed critical engineering time. Yes, there was value in creating this structure upfront because it
would have saved time in the long run, but this value was insufficient for a young company that may not be around in a
few months.&lt;/p&gt;
&lt;h2 id="evolutionary-architecture"&gt;&lt;a href="#evolutionary-architecture" class="header-anchor"&gt;&lt;/a&gt;Evolutionary architecture
&lt;/h2&gt;&lt;p&gt;Many companies and engineers find themselves in this situation. They have a codebase with poor architecture for today&amp;rsquo;s
reality, blame the organization for not thinking about these problems earlier, and feel like they can&amp;rsquo;t improve the
situation.&lt;/p&gt;
&lt;p&gt;Evolutionary architecture is a way to incrementally improve the architecture of a codebase without having to do a big
rewrite. It is a way to make the codebase better today than it was yesterday and better tomorrow than it is today.&lt;/p&gt;
&lt;p&gt;This situation is not unique to this company. It is the norm. Most companies start with a simple architecture and
codebase that is good enough for the first few features. As the company grows, the architecture becomes a bottleneck.
Instead of worrying about not making the right decisions in the past, consider where the architecture needs to be a year
or two from now and start moving towards that.&lt;/p&gt;
&lt;p&gt;For example, when adding a new prominent feature to the product, decouple it from the rest of the codebase.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/scaling-codebase-evolutionary-architecture/evolutionary-design.png"&gt;&lt;figcaption&gt;
&lt;h4&gt;Evolutionary design with big features going into dedicated modules.&lt;/h4&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Our example shows all the modules decoupled, but it may be OK to decouple one or two.&lt;/p&gt;
&lt;p&gt;Decoupling a feature from the rest of the codebase has many benefits similar to those we listed above for &amp;ldquo;good
architecture.&amp;rdquo; Additional benefits include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Most of the feature can be tested by itself, reducing test time.&lt;/li&gt;
&lt;li&gt;The business gets the option to create a new team dedicated to the feature quickly &amp;ndash; the code is already
separate/independent&lt;/li&gt;
&lt;li&gt;Engineering can scale the feature separately from the rest of the product. For example, assign a dedicated database or
split the feature into a microservice.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="code-example-of-splitting-the-database-schema"&gt;&lt;a href="#code-example-of-splitting-the-database-schema" class="header-anchor"&gt;&lt;/a&gt;Code example of splitting the database schema
&lt;/h2&gt;&lt;p&gt;It is nice to read about a theoretical example, but seeing an actual code example is even better. In this code example,
we begin with a monolithic application that has a single database schema. We then split the schema into two separate
schemas. It is the starting point and a reference for decoupling a new feature from the rest of the codebase. Since this
code example is a bit long and requires some context regarding the current implementation, we will not cover it in this
article. Instead, &lt;a class="link" href="https://www.youtube.com/watch?v=Li1GZzQVXWw&amp;amp;t=1070s" target="_blank" rel="noopener"
&gt;jump to the code example section&lt;/a&gt; of the video
below.&lt;/p&gt;
&lt;p&gt;Link to the
&lt;a class="link" href="https://github.com/fleetdm/fleet/compare/main...victor/feature-set-up" target="_blank" rel="noopener"
&gt;source code example decoupling a new backend feature from the rest of the codebase&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="track-code-complexity-metrics"&gt;&lt;a href="#track-code-complexity-metrics" class="header-anchor"&gt;&lt;/a&gt;Track code complexity metrics
&lt;/h2&gt;&lt;p&gt;In the next article of this &lt;strong&gt;technical debt&lt;/strong&gt; series, we
&lt;a class="link" href="../code-complexity-metrics/" &gt;go over the top code complexity metrics every software engineer should know&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a class="link" href="../modular-monolith-attempt/" &gt;The modular monolith that wasn&amp;rsquo;t&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
A real-world account of attempting to modularize a 500K-line codebase and the lessons learned.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="and-also"&gt;&lt;a href="#and-also" class="header-anchor"&gt;&lt;/a&gt;And also
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Recently, we covered &lt;a class="link" href="../track-engineering-metrics/" &gt;how to easily track engineering metrics&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Previously, we demonstrated
&lt;a class="link" href="../github-code-review-issues/" &gt;the most significant issues with GitHub&amp;rsquo;s code review process&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;We also showed &lt;a class="link" href="../go-package-dependencies/" &gt;how to create an architectural test that finds Go package dependencies&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;We also published an article on &lt;a class="link" href="../common-refactorings/" &gt;the common code refactorings to improve code readability&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;In addition, we summarized &lt;a class="link" href="../ai-for-software-developers/" &gt;what every software engineer should know about AI&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Lastly, we &lt;a class="link" href="../mermaid-intro/" &gt;introduced the top Mermaid diagrams for software developers&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="watch-how-to-scale-your-codebase-with-evolutionary-architecture"&gt;&lt;a href="#watch-how-to-scale-your-codebase-with-evolutionary-architecture" class="header-anchor"&gt;&lt;/a&gt;Watch how to scale your codebase with evolutionary architecture
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/Li1GZzQVXWw"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>What is readable code and why is it important?</title><link>https://victoronsoftware.com/posts/readable-code/</link><pubDate>Wed, 22 Jan 2025 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/readable-code/</guid><description>&lt;img src="https://victoronsoftware.com/posts/readable-code/readable-code-headline.png" alt="Featured image of post What is readable code and why is it important?" /&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="#metrics-for-unreadable-code" &gt;Metrics for unreadable code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#how-to-make-your-codebase-more-readable" &gt;How to make your codebase more readable&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="#fix-poor-software-structure" &gt;Fix poor software structure&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#refactor-local-code-for-understanding" &gt;Refactor local code for understanding&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#use-unit-and-integration-tests" &gt;Use unit and integration tests&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#useful-comments" &gt;Useful comments&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Readable code is software code that is easy to understand and easy to change.&lt;/p&gt;
&lt;p&gt;Unreadable code is a common complaint among software developers and one of the main contributors to technical debt.
Abandoning unreadable code is one of the reasons engineers love to work on greenfield projects‚Äîthere is no legacy code
to deal with.&lt;/p&gt;
&lt;p&gt;You&amp;rsquo;ve probably heard comments like, &amp;ldquo;It would take me longer to understand this code than to rewrite it from scratch.&amp;rdquo;
This sentiment illustrates the problem with unreadable code: it slows down the development process.&lt;/p&gt;
&lt;p&gt;Some engineers refer to readable code as &amp;ldquo;clean code.&amp;rdquo; In our opinion, &amp;ldquo;readable code&amp;rdquo; and &amp;ldquo;clean code&amp;rdquo; are synonymous,
and the term &amp;ldquo;readable code&amp;rdquo; is easier to understand and, therefore, more &amp;ldquo;readable.&amp;rdquo;&lt;/p&gt;
&lt;h2 id="why-is-unreadable-code-a-problem"&gt;&lt;a href="#why-is-unreadable-code-a-problem" class="header-anchor"&gt;&lt;/a&gt;Why is unreadable code a problem?
&lt;/h2&gt;&lt;p&gt;Although the &amp;ldquo;unreadable code&amp;rdquo; claim feels like a subjective opinion, it has a concrete business impact on software
projects.&lt;/p&gt;
&lt;p&gt;We want our code to be readable to speed up adding new features and bug fixes.&lt;/p&gt;
&lt;p&gt;For example, we recently spent three hours figuring out how a feature worked, only to realize there was a documentation
bug. Unfortunately, we made no improvements to make the code more readable, and the next developer will likely have the
same problem. This next developer may be ourselves one year from now when we will have forgotten everything we learned
about the feature.&lt;/p&gt;
&lt;h3 id="metrics-for-unreadable-code"&gt;&lt;a href="#metrics-for-unreadable-code" class="header-anchor"&gt;&lt;/a&gt;Metrics for unreadable code
&lt;/h3&gt;&lt;p&gt;You can use several metrics to measure your code&amp;rsquo;s readability. The ideal metric would be the time it takes to
understand the code, but this isn&amp;rsquo;t easy to measure. Instead, you can use the following proxies:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Time to fix a bug&lt;/strong&gt;‚ÄîMeasure the time from when a developer starts working on a bug until the bug fix is ready for code
review. Alternatively, measure the time from when a developer starts working on a bug until their first commit. A first
commit is a good proxy for understanding the bug and starting to fix it.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Time to add a new feature&lt;/strong&gt;‚ÄîMeasure the time from when a developer starts working on a new feature until it is ready
for code review.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Time to onboard a new team member&lt;/strong&gt;‚ÄîMeasure the time it takes for a new team member to make their first commit.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Code style violations&lt;/strong&gt;‚ÄîMeasure the codebase&amp;rsquo;s number of code style violations. Code style violations can be measured
using linters or static analysis tools. Some examples of code style violations relevant to readability are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Long functions&lt;/li&gt;
&lt;li&gt;Long files&lt;/li&gt;
&lt;li&gt;Deeply nested control structures&lt;/li&gt;
&lt;li&gt;Poorly named variables, such as 1-character variable names&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Instead of measuring these style code violations, you can also enforce them in your CI pipeline. Most languages have
linters that update your code to match a standard style. For example, Go has &lt;a class="link" href="https://pkg.go.dev/cmd/gofmt" target="_blank" rel="noopener"
&gt;&lt;code&gt;gofmt&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="how-to-make-your-codebase-more-readable"&gt;&lt;a href="#how-to-make-your-codebase-more-readable" class="header-anchor"&gt;&lt;/a&gt;How to make your codebase more readable
&lt;/h2&gt;&lt;p&gt;Readability is not a goal but a process. You can&amp;rsquo;t make your codebase readable overnight, but you can start making
incremental improvements. Whenever you touch a piece of code, try to make it more readable.&lt;/p&gt;
&lt;h3 id="fix-poor-software-structure"&gt;&lt;a href="#fix-poor-software-structure" class="header-anchor"&gt;&lt;/a&gt;Fix poor software structure
&lt;/h3&gt;&lt;p&gt;One pattern we see frequently is that the functionality of a core feature is spread across multiple software modules.
The first problem this creates is that the software developer trying to understand the feature has to discover all the
modules that implement the feature. Often, this requires grepping the codebase for key names &amp;ndash; a tedious and
error-prone process. The second problem is that the developer has to jump between files and directories to understand
how the feature works, files that often have tons of other unrelated and distracting code.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/readable-code/readable-code-before.png"&gt;&lt;figcaption&gt;
&lt;h4&gt;Hard to understand feature due to poor software design&lt;/h4&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Poor software structure often arises when we hurry to implement a feature and don&amp;rsquo;t consider future developers needing
to make changes. This behavior is reactive software design‚Äîone developer reacts to the immediate need to implement a
feature. Later, when implementing new features becomes almost impossible due to unreadable code, they react again by
restructuring the code or rewriting old functionality from scratch. This process makes sense for prototypes or early
products looking for product-market fit, but it is not sustainable for mature long-term software projects.&lt;/p&gt;
&lt;p&gt;Often, developers may not be able to create a good software design when they start working on a new feature because they
don&amp;rsquo;t understand all its ramifications. However, they should restructure their work before moving on to the next
task‚Äîthe best time to improve code is when you have all the context in your head.&lt;/p&gt;
&lt;p&gt;We can restructure the above code example to move all the feature&amp;rsquo;s functionality into one or two modules. This
reorganization makes it easier to understand the feature because we have to look at a much smaller number of files and
are not distracted by unrelated code.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/readable-code/readable-code-after.png"&gt;&lt;figcaption&gt;
&lt;h4&gt;Easier to understand feature encapsulated in separate modules&lt;/h4&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3 id="refactor-local-code-for-understanding"&gt;&lt;a href="#refactor-local-code-for-understanding" class="header-anchor"&gt;&lt;/a&gt;Refactor local code for understanding
&lt;/h3&gt;&lt;p&gt;When entering a function, you should quickly understand what it does. The function code should be readable. If an
engineer who first sees the function can&amp;rsquo;t understand it, it is too complex and should be refactored.&lt;/p&gt;
&lt;p&gt;Long functions are difficult to understand because they require the developer to simultaneously keep a lot of
information in their head. Oftentimes, the function presents implementation details to the developer before they can
grasp the big picture. This process is cognitively demanding and error-prone.&lt;/p&gt;
&lt;p&gt;Instead, we can refactor extended functions into smaller functions that each do one thing. This refactoring makes the
code easier to understand because we can understand each small function in isolation. Hide complex logic in functions
with descriptive names.&lt;/p&gt;
&lt;p&gt;In addition, use descriptive names for variables. Good names make the code self-documenting and reduce the need for
comments.&lt;/p&gt;
&lt;p&gt;As an example of a function before and after refactoring, see this
&lt;a class="link" href="https://gist.github.com/getvictor/740c940ec06735ee02bc652f1093e0b8" target="_blank" rel="noopener"
&gt;refactoring example gist&lt;/a&gt;. For a full explanation,
you can &lt;a class="link" href="https://www.youtube.com/watch?v=HCGyWuE9zbY&amp;amp;t=720s" target="_blank" rel="noopener"
&gt;jump to the refactoring section&lt;/a&gt; of the video below.&lt;/p&gt;
&lt;p&gt;For more examples of common refactorings, see our article on
&lt;a class="link" href="../common-refactorings/" &gt;top refactorings every software developer should know&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id="use-unit-and-integration-tests"&gt;&lt;a href="#use-unit-and-integration-tests" class="header-anchor"&gt;&lt;/a&gt;Use unit and integration tests
&lt;/h3&gt;&lt;p&gt;From a readability perspective, tests are a form of documentation. They show how the code is supposed to work. When
reading a test, you can see how the code is supposed to behave in different scenarios.&lt;/p&gt;
&lt;p&gt;Tests should also be readable. The same restructuring and refactoring principles apply to tests.&lt;/p&gt;
&lt;p&gt;Another essential benefit of tests is that they allow developers to refactor code with confidence. When you refactor
code, you can run the tests to ensure that the code still works as expected. Unfortunately, this means that when you
want to make a change in legacy code without tests, you either have to write tests first or do a lot of manual testing
to ensure that the code still works.&lt;/p&gt;
&lt;h3 id="useful-comments"&gt;&lt;a href="#useful-comments" class="header-anchor"&gt;&lt;/a&gt;Useful comments
&lt;/h3&gt;&lt;p&gt;Comments should explain why the code is written the way it is, not what the code does. The code should be
self-explanatory with descriptive variable and function names and encapsulated implementation details.&lt;/p&gt;
&lt;p&gt;Sometimes, it is hard to tell the difference between &amp;ldquo;why&amp;rdquo; and &amp;ldquo;what,&amp;rdquo; so feel free to err on the side of commenting.&lt;/p&gt;
&lt;p&gt;You can remove the comment if you renamed a variable or a function, and now the comment duplicates the code. One problem
with comments is that they can get out of date, which is worse than no comments.&lt;/p&gt;
&lt;p&gt;For example, before refactoring, you had this code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// figure out which declarations we should not delete, and put those into keepNames list&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;keepNames&lt;/span&gt; &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; make([]&lt;span style="color:#66d9ef"&gt;string&lt;/span&gt;, &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;, len(&lt;span style="color:#a6e22e"&gt;existingDecls&lt;/span&gt;)&lt;span style="color:#f92672"&gt;+&lt;/span&gt;len(&lt;span style="color:#a6e22e"&gt;fleetmdm&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;ListFleetReservedMacOSDeclarationNames&lt;/span&gt;()))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;_&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;p&lt;/span&gt; &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;range&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;existingDecls&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;newP&lt;/span&gt; &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;incomingDecls&lt;/span&gt;[&lt;span style="color:#a6e22e"&gt;p&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Name&lt;/span&gt;]; &lt;span style="color:#a6e22e"&gt;newP&lt;/span&gt; &lt;span style="color:#f92672"&gt;!=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;keepNames&lt;/span&gt; = append(&lt;span style="color:#a6e22e"&gt;keepNames&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;p&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Name&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;keepNames&lt;/span&gt; = append(&lt;span style="color:#a6e22e"&gt;keepNames&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;fleetmdm&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;ListFleetReservedMacOSDeclarationNames&lt;/span&gt;()&lt;span style="color:#f92672"&gt;...&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After refactoring, the comment is a duplicate and no longer needed. It is even worse in this case because we renamed the
variable, but the comment still refers to the old name. The comment is not only a duplicate but also misleading:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// figure out which declarations we should not delete, and put those into keepNames list&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;namesToKeep&lt;/span&gt; &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;namesOfDeclarationsToNotDelete&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;existingDecls&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;enrichedDeclarations&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="language-features-that-make-the-code-less-readable"&gt;&lt;a href="#language-features-that-make-the-code-less-readable" class="header-anchor"&gt;&lt;/a&gt;Language features that make the code less readable
&lt;/h2&gt;&lt;p&gt;Some language features can make the code less readable. We will give an example from Go because we are familiar with Go,
but the same principles apply to other languages.&lt;/p&gt;
&lt;h3 id="go-nested-functions"&gt;&lt;a href="#go-nested-functions" class="header-anchor"&gt;&lt;/a&gt;Go nested functions
&lt;/h3&gt;&lt;p&gt;Go supports nested functions like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;func&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;outer&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;foo&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Foo&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;bar&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Bar&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;inner&lt;/span&gt; &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;func&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;item&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Item&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// many lines&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// of implementation details&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// many lines&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// of additional code&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;_&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;i&lt;/span&gt; &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;range&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;something&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;inner&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;i&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// more code&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Upon entering the function as a reader, the first thing you see is the &lt;code&gt;inner&lt;/code&gt; function. The reader is presented with
specific implementation details before understanding the big picture. Instead, the reader should know where the nested
function is used before reading these implementation details.&lt;/p&gt;
&lt;p&gt;One way to solve this issue is to forbid nested functions in your style guide. Always extract nested functions to the
struct level or file level. However, this approach loses the benefits of closures and increases the number of functions
at the struct/file level.&lt;/p&gt;
&lt;p&gt;We hope that the Go team will improve the readability of nested functions in the future. For example, they could allow
nested functions to be defined at the end of the function after the primary implementation:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;func&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;outer&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;foo&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Foo&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;bar&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Bar&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// many lines&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// of additional code&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;_&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;i&lt;/span&gt; &lt;span style="color:#f92672"&gt;:=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;range&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;something&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;inner&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;i&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// more code&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// nested functions&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;func&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;inner&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;item&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Item&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// many lines&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// of implementation details&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Alternatively, IDE vendors can improve readability by entirely hiding nested functions by default.&lt;/p&gt;
&lt;h2 id="additional-benefits-of-readable-code"&gt;&lt;a href="#additional-benefits-of-readable-code" class="header-anchor"&gt;&lt;/a&gt;Additional benefits of readable code
&lt;/h2&gt;&lt;p&gt;As you improve the readability of your code, you will notice several side effects:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Many bugs will be easier to spot&lt;/li&gt;
&lt;li&gt;Other developers will be less likely to interrupt you with questions about your code&lt;/li&gt;
&lt;li&gt;If your code is open source, you may get more contributions&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="make-bigger-improvements-to-your-codebase-with-evolutionary-architecture"&gt;&lt;a href="#make-bigger-improvements-to-your-codebase-with-evolutionary-architecture" class="header-anchor"&gt;&lt;/a&gt;Make bigger improvements to your codebase with evolutionary architecture
&lt;/h2&gt;&lt;p&gt;In the following article, we
&lt;a class="link" href="../scaling-codebase-evolutionary-architecture" &gt;discuss how to make bigger improvements to your codebase with evolutionary architecture&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../engineering-transparency/" &gt;Why transparency beats everything else in engineering&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
How making work visible transforms teams from frustrated to high-performing through organizational transparency.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../first-conference-talk/" &gt;My first conference talk experience&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Lessons learned from presenting about readable code at a major software engineering conference.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../engineering-metrics-no-cost/" &gt;Build beautiful engineering dashboards‚Äîwithout paying a dime&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Learn how to use GitHub, Grafana, and SQL to create powerful, drill-down metrics using only free tools.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../literate-programming-lessons/" &gt;Key takeaways from literate programming&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Discover how Donald Knuth&amp;rsquo;s literate programming principles can improve your code documentation practices.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../track-engineering-metrics/" &gt;How to easily track engineering metrics with GitHub Actions and Google APIs&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Build automated systems to measure and visualize your team&amp;rsquo;s engineering performance over time.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../go-test-execution-time/" &gt;Measuring and improving the execution time of Go tests&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Optimize your test suite performance and reduce CI/CD pipeline duration with practical techniques.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../github-code-review-issues/" &gt;Top 3 issues with GitHub&amp;rsquo;s code review process&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Understand the scalability and developer experience problems with GitHub&amp;rsquo;s default review workflow.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../ai-for-software-developers/" &gt;Common use cases of AI for today&amp;rsquo;s software developers&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Explore how AI tools can enhance productivity without replacing the need for readable, maintainable code.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="watch-us-discuss-why-readable-code-is-important"&gt;&lt;a href="#watch-us-discuss-why-readable-code-is-important" class="header-anchor"&gt;&lt;/a&gt;Watch us discuss why readable code is important
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/HCGyWuE9zbY"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>How to create a custom GitHub Action using TypeScript</title><link>https://victoronsoftware.com/posts/typescript-github-action/</link><pubDate>Wed, 23 Oct 2024 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/typescript-github-action/</guid><description>&lt;img src="https://victoronsoftware.com/posts/typescript-github-action/typescript-github-action-headline.png" alt="Featured image of post How to create a custom GitHub Action using TypeScript" /&gt;&lt;p&gt;In this article, we&amp;rsquo;ll create a custom reusable GitHub Action using TypeScript. As covered in our article on
&lt;a class="link" href="../github-reusable-workflows-and-steps/" &gt;reusing GitHub workflows and steps&lt;/a&gt;, GitHub Actions allow you to automate your
software development workflows. By creating a custom GitHub Action, you can extend the functionality of GitHub Actions
to suit your specific needs.&lt;/p&gt;
&lt;p&gt;We will create a simple GitHub Action to replace
&lt;a class="link" href="../github-code-review-issues/" &gt;GitHub&amp;rsquo;s broken Pull Request review process&lt;/a&gt;. This custom GitHub Action will
automatically approve Pull Requests that meet specific criteria.&lt;/p&gt;
&lt;h2 id="start-with-githubs-action-template"&gt;&lt;a href="#start-with-githubs-action-template" class="header-anchor"&gt;&lt;/a&gt;Start with GitHub&amp;rsquo;s Action template
&lt;/h2&gt;&lt;p&gt;GitHub provides a
&lt;a class="link" href="https://github.com/actions/typescript-action" target="_blank" rel="noopener"
&gt;template for creating a new GitHub Action using TypeScript&lt;/a&gt;. You can use
this template to get started quickly. The template includes the necessary files and structure to create a new GitHub
Action. Anything unnecessary can be removed or modified to suit your requirements.&lt;/p&gt;
&lt;p&gt;Follow the instructions in the template&amp;rsquo;s README to set up your action.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Click the &lt;strong&gt;Use this template&lt;/strong&gt; button at the top of the repository&lt;/li&gt;
&lt;li&gt;Select &lt;strong&gt;Create a new repository&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Select an owner and name for your new repository&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;Create repository&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Clone your new repository&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Check out your new repository, go to the cloned repo directory, and make sure your node version matches the one in the
&lt;code&gt;.node-version&lt;/code&gt; file. If you&amp;rsquo;re using &lt;a class="link" href="https://github.com/nvm-sh/nvm/blob/master/README.md" target="_blank" rel="noopener"
&gt;nvm (Node Version Manager)&lt;/a&gt;,
you can run:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cp .node-version .nvmrc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;nvm install
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;node --version
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Our example is based on
&lt;a class="link" href="https://github.com/actions/typescript-action/tree/0467e124e81b527a246cabdaef9c3b433febf9a8" target="_blank" rel="noopener"
&gt;this commit of the template repository&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="implement-your-custom-github-action"&gt;&lt;a href="#implement-your-custom-github-action" class="header-anchor"&gt;&lt;/a&gt;Implement your custom GitHub Action
&lt;/h2&gt;&lt;p&gt;Install the template&amp;rsquo;s dependencies with &lt;code&gt;npm install&lt;/code&gt;. In addition, install the &lt;code&gt;@actions/github&lt;/code&gt; package with
&lt;code&gt;npm install @actions/github&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The template provides a basic structure for your GitHub Action. Update the &lt;code&gt;action.yml&lt;/code&gt; file with your action&amp;rsquo;s name,
description, author, and updated inputs/outputs.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#39;Code review&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;description&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#39;Improved code review process&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;author&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#39;Victor on Software&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Add your action&amp;#39;s branding here. This will appear on the GitHub Marketplace.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;branding&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;icon&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#39;heart&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;color&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#39;red&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Define your inputs here.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;inputs&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;github-token&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;description&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#39;GitHub secret token&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;required&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;runs&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;using&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;node20&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;main&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;dist/index.js&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In this example, our new action will have a single input, &lt;code&gt;github-token&lt;/code&gt;, the GitHub secret token to use the GitHub API.&lt;/p&gt;
&lt;p&gt;Next, we can modify the code in the &lt;code&gt;src/main.ts&lt;/code&gt; file to implement our custom logic.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-typescript" data-lang="typescript"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; &lt;span style="color:#f92672"&gt;*&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;core&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;from&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;@actions/core&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; &lt;span style="color:#f92672"&gt;*&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;github&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;from&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;@actions/github&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; { &lt;span style="color:#a6e22e"&gt;readFileSync&lt;/span&gt; } &lt;span style="color:#66d9ef"&gt;from&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;fs&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * The main function of the action.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @returns {Promise&amp;lt;void&amp;gt;} Resolves when the action is complete.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;export&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;async&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;run&lt;/span&gt;()&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Promise&lt;/span&gt;&amp;lt;&lt;span style="color:#f92672"&gt;void&lt;/span&gt;&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;try&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Get the PR number from the payload. This action is only intended for PRs.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;prNumber&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;github&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;context&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;payload&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;pull_request&lt;/span&gt;&lt;span style="color:#f92672"&gt;?&lt;/span&gt;.&lt;span style="color:#66d9ef"&gt;number&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#f92672"&gt;!&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;prNumber&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Get the required reviewer from the REVIEWERS file.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// This simplified example assumes that the REVIEWERS file contains a single reviewer.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// In a real-world scenario, we would need to parse the REVIEWERS file at the top directory
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// of our changed files to get the reviewers.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;reviewer&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;readFileSync&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;REVIEWERS&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;utf8&amp;#39;&lt;/span&gt;).&lt;span style="color:#a6e22e"&gt;trim&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#f92672"&gt;!&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;reviewer&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;core&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;setFailed&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;No reviewer found in REVIEWERS file&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Get all the reviews for this PR.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;githubToken&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;core&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;getInput&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;github-token&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;octokit&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;github&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;getOctokit&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;githubToken&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;reviews&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;await&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;octokit&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;rest&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;pulls&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;listReviews&lt;/span&gt;({
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;owner&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;github.context.repo.owner&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;repo&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;github.context.repo.repo&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;pull_number&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;prNumber&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Check if the required reviewer has approved the PR.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// This action does not require the reviewer to re-approve the PR if new changes are pushed.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;let&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;approved&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;reviews&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;data&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;forEach&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;review&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#a6e22e"&gt;review&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;user&lt;/span&gt;&lt;span style="color:#f92672"&gt;?&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;login&lt;/span&gt; &lt;span style="color:#f92672"&gt;===&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;reviewer&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;review&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;state&lt;/span&gt; &lt;span style="color:#f92672"&gt;===&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;APPROVED&amp;#39;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;approved&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Fail the workflow run if the required reviewer has not approved the PR.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#f92672"&gt;!&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;approved&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;core&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;setFailed&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;`Reviewer &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;reviewer&lt;/span&gt;&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt; needs to approve the PR`&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; } &lt;span style="color:#66d9ef"&gt;catch&lt;/span&gt; (&lt;span style="color:#a6e22e"&gt;error&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Fail the workflow run if an error occurs
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#a6e22e"&gt;error&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;instanceof&lt;/span&gt; Error) &lt;span style="color:#a6e22e"&gt;core&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;setFailed&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;error&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;message&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We read the &lt;code&gt;REVIEWERS&lt;/code&gt; file to get the required reviewer for the PR. We then retrieve all the reviews for the pull
request and check if the needed reviewer has approved the PR. If the reviewer has not approved the PR, we fail the run.&lt;/p&gt;
&lt;h2 id="build-your-custom-github-action"&gt;&lt;a href="#build-your-custom-github-action" class="header-anchor"&gt;&lt;/a&gt;Build your custom GitHub Action
&lt;/h2&gt;&lt;p&gt;To build your action, run &lt;code&gt;npm run bundle&lt;/code&gt;. This will compile the TypeScript code in the &lt;code&gt;src/&lt;/code&gt; directory and output the
JavaScript code in the &lt;code&gt;dist/&lt;/code&gt; directory. The exact command for &lt;code&gt;bundle&lt;/code&gt; is defined in the &lt;code&gt;package.json&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;bundle&lt;/code&gt; step is required before you can test your action locally or use it in a workflow because the &lt;code&gt;action.yml&lt;/code&gt;
file points at the &lt;code&gt;dist/index.js&lt;/code&gt; bundled version of your code.&lt;/p&gt;
&lt;p&gt;This step can easily be forgotten, and you may wonder why your changes are not reflected in the action. You can
configure our IDE to do &lt;code&gt;npm run bundle&lt;/code&gt; automatically on save, create a check as a
&lt;a class="link" href="https://git-scm.com/book/ms/v2/Customizing-Git-Git-Hooks" target="_blank" rel="noopener"
&gt;git pre-commit hook&lt;/a&gt; to ensure the &lt;code&gt;dist/&lt;/code&gt; directory is
up-to-date, or rely on the &lt;code&gt;Check Transpiled Javascript&lt;/code&gt; workflow in the &lt;code&gt;.github/workflows/&lt;/code&gt; directory.&lt;/p&gt;
&lt;p&gt;Now, commit your changes and push them to your repository.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; We will not cover testing in this article, but you should add tests to the &lt;code&gt;__tests__/&lt;/code&gt; directory for your
source code. For this example, we must refactor the code to make it more testable.&lt;/p&gt;
&lt;h2 id="test-your-custom-github-action-in-another-repository"&gt;&lt;a href="#test-your-custom-github-action-in-another-repository" class="header-anchor"&gt;&lt;/a&gt;Test your custom GitHub Action in another repository
&lt;/h2&gt;&lt;h3 id="add-workflows-and-reviewers-file"&gt;&lt;a href="#add-workflows-and-reviewers-file" class="header-anchor"&gt;&lt;/a&gt;Add workflows and REVIEWERS file
&lt;/h3&gt;&lt;p&gt;You can use the &lt;code&gt;uses&lt;/code&gt; keyword in a workflow file to try your action in another repository. Create a new workflow file
in the repository&amp;rsquo;s &lt;code&gt;.github/workflows/&lt;/code&gt; directory where you want to test your action. For example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;Code review&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;on&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;workflow_dispatch&lt;/span&gt;: &lt;span style="color:#75715e"&gt;# Manual (for debug)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;pull_request&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;jobs&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;code-review&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;Code review&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;runs-on&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;ubuntu-latest&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;steps&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;Checkout&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;id&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;checkout&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;uses&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;actions/checkout@v4&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;Code review action&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;id&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;test-action&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;uses&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;getvictor/code-review-demo@main&lt;/span&gt; &lt;span style="color:#75715e"&gt;# Your action goes here&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;with&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;github-token&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;${{ secrets.GITHUB_TOKEN }}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We are using &lt;code&gt;@main&lt;/code&gt; as the version of the action to test the latest code on the main branch. You can replace this with
a specific version tag or branch name.&lt;/p&gt;
&lt;p&gt;In addition, create a &lt;code&gt;REVIEWERS&lt;/code&gt; file at the repository&amp;rsquo;s root with the required reviewer&amp;rsquo;s GitHub username.&lt;/p&gt;
&lt;p&gt;Notice that the above workflow runs on &lt;code&gt;pull_request&lt;/code&gt; events but not on &lt;code&gt;pull_request_review&lt;/code&gt; events. This is because
GitHub Actions treats the &lt;code&gt;pull_request&lt;/code&gt; workflow runs and the &lt;code&gt;pull_request_review&lt;/code&gt; workflow runs as distinct. Instead,
we want the same workflow run to be triggered by both events. This is a common pitfall when working with GitHub Actions.
We need to add another workflow file that listens for &lt;code&gt;pull_request_review&lt;/code&gt; events and triggers the &lt;code&gt;pull_request&lt;/code&gt;
workflow run to fix this.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;Rerun checks after review&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;on&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;pull_request_review&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;types&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;submitted&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;dismissed&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;jobs&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;rerun_checks&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;Rerun specified checks&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;permissions&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;actions&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;write&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;runs-on&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;ubuntu-latest&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;steps&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;Rerun Checks&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;uses&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;shqear93/rerun-checks@v3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;with&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;github-token&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;${{ secrets.GITHUB_TOKEN }}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;check-names&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#39;Code review&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="configure-a-github-rule-to-require-code-review"&gt;&lt;a href="#configure-a-github-rule-to-require-code-review" class="header-anchor"&gt;&lt;/a&gt;Configure a GitHub rule to require code review
&lt;/h3&gt;&lt;p&gt;Create a branch protection rule in the repository settings that requires the above &lt;code&gt;Code review&lt;/code&gt; workflow to pass in a
PR before merging to your default branch.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/typescript-github-action/github-code-review-rule.png"
alt="Require a pull request before merging. Require the Code review status check to pass."&gt;
&lt;/figure&gt;
&lt;h3 id="create-a-pull-request"&gt;&lt;a href="#create-a-pull-request" class="header-anchor"&gt;&lt;/a&gt;Create a pull request
&lt;/h3&gt;&lt;p&gt;Commit your changes to a new branch and create a pull request. The &lt;code&gt;Code review&lt;/code&gt; workflow should run automatically and
show the Failed status.&lt;/p&gt;
&lt;p&gt;Once the required reviewer approves the PR, the &lt;code&gt;Rerun checks after review&lt;/code&gt; workflow will run and trigger the
&lt;code&gt;Code review&lt;/code&gt; workflow. The rerun should pass, and you should be able to merge the PR.&lt;/p&gt;
&lt;h2 id="clean-up-your-custom-github-action-repo"&gt;&lt;a href="#clean-up-your-custom-github-action-repo" class="header-anchor"&gt;&lt;/a&gt;Clean up your custom GitHub Action repo
&lt;/h2&gt;&lt;p&gt;As an optional step, you can clean up your custom GitHub Action repository:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Update README.md with instructions on how to use your new action&lt;/li&gt;
&lt;li&gt;Remove the &lt;code&gt;src/wait.ts&lt;/code&gt; file and associated tests&lt;/li&gt;
&lt;li&gt;Update workflows in the &lt;code&gt;.github/workflows/&lt;/code&gt; directory&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;p&gt;In a previous article, we described
&lt;a class="link" href="../git-merges-and-pull-requests/" &gt;what happens in a GitHub pull request after a &lt;code&gt;git merge&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In another article, we covered
&lt;a class="link" href="../use-github-actions-for-general-purpose-tasks/" &gt;how to use GitHub Actions for general-purpose tasks&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="example-code-on-github"&gt;&lt;a href="#example-code-on-github" class="header-anchor"&gt;&lt;/a&gt;Example code on GitHub
&lt;/h2&gt;&lt;p&gt;The code for our simple GitHub Action is available on GitHub: &lt;a class="link" href="https://github.com/getvictor/code-review-demo" target="_blank" rel="noopener"
&gt;https://github.com/getvictor/code-review-demo&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="watch-how-to-create-a-custom-github-action-using-typescript"&gt;&lt;a href="#watch-how-to-create-a-custom-github-action-using-typescript" class="header-anchor"&gt;&lt;/a&gt;Watch how to create a custom GitHub Action using TypeScript
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/NFIwPxz5La8"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>How to set up a remote development environment</title><link>https://victoronsoftware.com/posts/remote-development-environment/</link><pubDate>Sun, 22 Sep 2024 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/remote-development-environment/</guid><description>&lt;img src="https://victoronsoftware.com/posts/remote-development-environment/remote-dev-environment-headline.png" alt="Featured image of post How to set up a remote development environment" /&gt;&lt;h1 id="why-set-up-a-remote-development-environment"&gt;&lt;a href="#why-set-up-a-remote-development-environment" class="header-anchor"&gt;&lt;/a&gt;Why set up a remote development environment?
&lt;/h1&gt;&lt;p&gt;A remote development environment can be beneficial for several reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Offload processing power&lt;/strong&gt;: Your local machine may not have enough processing power to run resource-intensive tasks.
By using a remote development environment, you can use more powerful hardware.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Consistent environment&lt;/strong&gt;: A remote development environment ensures all team members can work in the same
environment, reducing configuration issues and ensuring consistent behavior across different machines. For example,
developers may be using a mix of macOS, Windows, and Linux machines, which can lead to differences in behavior due to
operating system-specific issues.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Multiple environments&lt;/strong&gt;: You can set up multiple environments for different projects or tasks without cluttering
your local machine.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Access from anywhere&lt;/strong&gt;: A remote development environment allows you to access your work from any device with an
internet connection.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Collaboration&lt;/strong&gt;: You can easily collaborate with team members by sharing the same development environment. For
example, after coding a feature, the developer can hand off the environment to another engineer for review or QA.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Security&lt;/strong&gt;: Keeping your code and development environment on a remote server reduces the risk of data loss in case
of local hardware failure or theft.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Scalability&lt;/strong&gt;: You can quickly scale your development environment up or down based on your needs without affecting
your local machine.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cost-effective&lt;/strong&gt;: A remote development environment can be more cost-effective than purchasing and maintaining
high-end hardware for your local machine.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="setting-up-a-remote-development-environment"&gt;&lt;a href="#setting-up-a-remote-development-environment" class="header-anchor"&gt;&lt;/a&gt;Setting up a remote development environment
&lt;/h1&gt;&lt;p&gt;For our development example, we will use a standalone server application connected to a database and a Redis cache. The
application uses a monolith repo with a frontend and a backend codebase.&lt;/p&gt;
&lt;h2 id="choose-a-cloud-provider"&gt;&lt;a href="#choose-a-cloud-provider" class="header-anchor"&gt;&lt;/a&gt;Choose a cloud provider
&lt;/h2&gt;&lt;p&gt;We used a &lt;a class="link" href="https://www.digitalocean.com/" target="_blank" rel="noopener"
&gt;Digital Ocean&lt;/a&gt; VM with 8GB of RAM, 4 CPUs, and a 160 GB disk, running Ubuntu
24.04 LTS for our remote development environment. We found that Digital Ocean provides VMs that are generally cheaper
than other cloud providers.&lt;/p&gt;
&lt;p&gt;Any other cloud provider, such as AWS, Google Cloud, or Azure, can also be used. Your choice of provider depends on your
specific requirements, budget, and familiarity with the platform.&lt;/p&gt;
&lt;p&gt;After spinning up the VM, we SSH&amp;rsquo;ed into the server, installed the necessary software for our application, and launched
the server.&lt;/p&gt;
&lt;p&gt;Since our server required multiple running processes, we used &lt;a class="link" href="https://github.com/tmux/tmux" target="_blank" rel="noopener"
&gt;tmux&lt;/a&gt; to manage multiple
terminal sessions. Tmux allowed us to create numerous panes and windows within a single terminal session, making it
easier to manage the server processes. We could disconnect from the server, and the tmux processes ran in the
background. When reconnected to the server, we could easily reattach to the tmux session and resume work. Additionally,
we used &lt;a class="link" href="https://iterm2.com/documentation-tmux-integration.html" target="_blank" rel="noopener"
&gt;iTerm2 tmux integration&lt;/a&gt; to enhance our terminal
experience.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/remote-development-environment/tmux-on-remote-server.png"
alt="4 open windows with running processes"&gt;&lt;figcaption&gt;
&lt;h4&gt;tmux running on remote dev server&lt;/h4&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id="connect-your-ide-to-the-remote-development-environment"&gt;&lt;a href="#connect-your-ide-to-the-remote-development-environment" class="header-anchor"&gt;&lt;/a&gt;Connect your IDE to the remote development environment
&lt;/h2&gt;&lt;p&gt;We used &lt;a class="link" href="https://www.jetbrains.com/" target="_blank" rel="noopener"
&gt;JetBrains IDE&lt;/a&gt; for development work and
&lt;a class="link" href="https://www.jetbrains.com/remote-development/gateway/" target="_blank" rel="noopener"
&gt;JetBrains Gateway&lt;/a&gt; to connect to our remote development server
using SSH. JetBrains Gateway automatically installed the IDE backend on the remote server and brought up a local client
of the IDE.&lt;/p&gt;
&lt;p&gt;In our case, we wanted to use one IDE for backend development (GoLand) and another IDE for frontend development
(WebStorm).&lt;/p&gt;
&lt;p&gt;We had trouble starting them up and could not run both IDEs simultaneously. Either one or both of them would disconnect
from the remote development server without an obvious way to fix the issue. We suspect the issue was due to insufficient
memory on the machine &amp;ndash; try to plan for around 4 GB of memory per IDE.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/remote-development-environment/jetbrains-disconnect.png"
alt="No Connection message in GoLand IDE"&gt;
&lt;/figure&gt;
&lt;p&gt;However, we could use one of the IDEs at a time, which was sufficient for most of our needs.&lt;/p&gt;
&lt;h1 id="using-a-remote-development-environment"&gt;&lt;a href="#using-a-remote-development-environment" class="header-anchor"&gt;&lt;/a&gt;Using a remote development environment
&lt;/h1&gt;&lt;p&gt;After setting up the remote development environment, we reviewed common development use cases to ensure that everything
was working as expected.&lt;/p&gt;
&lt;h2 id="make-a-code-change-and-restart-the-application-server"&gt;&lt;a href="#make-a-code-change-and-restart-the-application-server" class="header-anchor"&gt;&lt;/a&gt;Make a code change and restart the application server
&lt;/h2&gt;&lt;p&gt;We made a simple code change in the backend service, saved the file, and restarted the application server. We verified
that the change was reflected in the application.&lt;/p&gt;
&lt;p&gt;The compile time was slower than on our local machine, likely due to the remote server&amp;rsquo;s lower CPU count and total RAM
compared to our local machine.&lt;/p&gt;
&lt;h2 id="run-unit-tests"&gt;&lt;a href="#run-unit-tests" class="header-anchor"&gt;&lt;/a&gt;Run unit tests
&lt;/h2&gt;&lt;p&gt;We ran the unit tests for the backend service. The tests passed successfully.&lt;/p&gt;
&lt;h2 id="connect-to-the-database-and-redis-cache"&gt;&lt;a href="#connect-to-the-database-and-redis-cache" class="header-anchor"&gt;&lt;/a&gt;Connect to the database and Redis cache
&lt;/h2&gt;&lt;p&gt;From our local development machine, we connected to the development server&amp;rsquo;s database and Redis cache to verify that the
services were running correctly.&lt;/p&gt;
&lt;h2 id="reconnecting-to-remote-development-environment"&gt;&lt;a href="#reconnecting-to-remote-development-environment" class="header-anchor"&gt;&lt;/a&gt;Reconnecting to remote development environment
&lt;/h2&gt;&lt;p&gt;After opening up our local computer the next day, we found that the JetBrains Gateway and the IDE has disconnected from
the remote server. Refreshing the Gateway re-established the connection, and the IDE also showed as connected within 60
seconds or so.&lt;/p&gt;
&lt;h1 id="security-considerations"&gt;&lt;a href="#security-considerations" class="header-anchor"&gt;&lt;/a&gt;Security considerations
&lt;/h1&gt;&lt;p&gt;When setting up a remote development environment, consider the following security best practices:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;SSH key authentication&lt;/strong&gt;: For secure access to the remote server, use SSH key authentication instead of passwords.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Firewall rules&lt;/strong&gt;: Configure firewall rules to restrict access to the server to only necessary IP addresses.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Secure connections&lt;/strong&gt;: Use HTTPS for web applications and encrypted connections for database access.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Data encryption&lt;/strong&gt;: Encrypt sensitive data at rest and in transit. Always encrypt sensitive data in the database.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="docker-firewall-rules"&gt;&lt;a href="#docker-firewall-rules" class="header-anchor"&gt;&lt;/a&gt;Docker firewall rules
&lt;/h2&gt;&lt;p&gt;Docker containers use &lt;code&gt;iptables&lt;/code&gt; rules to open ports for incoming traffic. We can
&lt;a class="link" href="https://docs.docker.com/engine/network/packet-filtering-firewalls/#restrict-external-connections-to-containers" target="_blank" rel="noopener"
&gt;restrict external connections to containers&lt;/a&gt;
by adding rules to the &lt;code&gt;DOCKER-USER&lt;/code&gt; chain, such as:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;iptables -I DOCKER-USER -i eth0 ! -s &amp;lt;your local IP&amp;gt; -j DROP
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Where &lt;code&gt;eth0&lt;/code&gt; is the network interface connected to the internet and &lt;code&gt;&amp;lt;your local IP&amp;gt;&lt;/code&gt; is the IP address of your local
machine. This rule blocks all incoming traffic to Docker from the internet except for your local IP.&lt;/p&gt;
&lt;p&gt;After setting up and testing your rules, you can persist them across restarts with the &lt;code&gt;iptables-persistent&lt;/code&gt; package or
other methods.&lt;/p&gt;
&lt;h1 id="overall-impressions"&gt;&lt;a href="#overall-impressions" class="header-anchor"&gt;&lt;/a&gt;Overall impressions
&lt;/h1&gt;&lt;p&gt;After using the remote development environment for a few days, we found it usable but not as smooth as working on a
local machine. For our use case, it is an excellent option for a secondary development environment or for working on a
resource-intensive feature.&lt;/p&gt;
&lt;p&gt;Some issues we encountered included:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Latency&lt;/strong&gt;: Occasionally, clicking on an element or using a keyboard shortcut had a noticeable delay.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Missing features&lt;/strong&gt;: Some features, such as only searching inside text strings, were not available in the remote
development environment.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Issues with plugins&lt;/strong&gt;: GitHub Copilot did not work out of the box; it did not provide suggestions in the editor. We
did not drill down to the issue, but a potential workaround is to use JetBrains&amp;rsquo;s code assistant plugin.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;We recently explained &lt;a class="link" href="../secure-mysql-docker" &gt;how to secure a MySQL Docker container for Zero Trust&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;We also discussed &lt;a class="link" href="../github-code-review-issues" &gt;the issues with GitHub&amp;rsquo;s code review process&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;We wrote about &lt;a class="link" href="../google-sheets-api/" &gt;quickly editing a Google Sheets spreadsheet via the API&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;We also covered &lt;a class="link" href="../cloudfront-signed-urls/" &gt;creating secure signed URLs with AWS CloudFront&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="watch-how-to-set-up-a-remote-development-environment"&gt;&lt;a href="#watch-how-to-set-up-a-remote-development-environment" class="header-anchor"&gt;&lt;/a&gt;Watch how to set up a remote development environment
&lt;/h1&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/_VDtA9Tq-1E"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>Top 3 issues with GitHub code review process</title><link>https://victoronsoftware.com/posts/github-code-review-issues/</link><pubDate>Sun, 15 Sep 2024 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/github-code-review-issues/</guid><description>&lt;img src="https://victoronsoftware.com/posts/github-code-review-issues/developer-on-tightrope-headline.png" alt="Featured image of post Top 3 issues with GitHub code review process" /&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="#issue-1-codeowners-is-not-scalable" &gt;CODEOWNERS is not scalable&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#issue-2-re-approvals-for-every-push" &gt;Re-approvals for every push&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="#issue-3-impractical-to-maintain-a-protected-feature-branch" &gt;Impractical for protected feature branches&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Our team has been using GitHub to review the code for our open-source product. We have encountered several issues with
GitHub code reviews. The default GitHub code review process is not scalable and provides a poor developer experience.&lt;/p&gt;
&lt;h2 id="how-to-set-up-a-github-code-review-process"&gt;&lt;a href="#how-to-set-up-a-github-code-review-process" class="header-anchor"&gt;&lt;/a&gt;How to set up a GitHub code review process
&lt;/h2&gt;&lt;p&gt;GitHub admins can create a
&lt;a class="link" href="https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/managing-protected-branches/managing-a-branch-protection-rule" target="_blank" rel="noopener"
&gt;branch protection rule&lt;/a&gt;
that requires a code review before merging the code to the main branch.&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s a representative branch protection rule:&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/github-code-review-issues/pr-branch-protection-rule.png"
alt="Branch protection rule requiring code review before merging"&gt;&lt;figcaption&gt;
&lt;h4&gt;PR branch protection rule&lt;/h4&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;When a developer creates a pull request, GitHub requires code reviews from all relevant owners specified by the
&lt;code&gt;CODEOWNERS&lt;/code&gt; file in the repository. If someone makes a new push to the PR, all the owners need to re-approve the PR.&lt;/p&gt;
&lt;p&gt;In a previous article, we covered &lt;a class="link" href="../find-code-owners-for-pull-request" &gt;how to find the required code owners for a PR&lt;/a&gt;.
This is another issue, but we will not discuss it in this article.&lt;/p&gt;
&lt;h2 id="issue-1-codeowners-is-not-scalable"&gt;&lt;a href="#issue-1-codeowners-is-not-scalable" class="header-anchor"&gt;&lt;/a&gt;Issue 1: CODEOWNERS is not scalable
&lt;/h2&gt;&lt;p&gt;GitHub uses a
&lt;a class="link" href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners" target="_blank" rel="noopener"
&gt;&lt;code&gt;CODEOWNERS&lt;/code&gt; file to define individuals or teams responsible for each file in the repository&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;CODEOWNERS&lt;/code&gt; file format favors fine-grained code ownership, where the last matching pattern takes precedence over
previous patterns. Here is an example from the GitHub documentation:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# In this example, @octocat owns any file in the `/apps`
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# directory in the root of your repository except for the `/apps/github`
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# subdirectory, as this subdirectory has its own owner @doctocat
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/apps/ @octocat
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/apps/github @doctocat
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;CODEOWNERS&lt;/code&gt; file is not scalable for medium-to-large and even small organizations. As the number of code owners
grows, each pull request is likely to require approval from more code owners. Each code owner may request changes,
potentially leading to cycles and cycles of re-approvals.&lt;/p&gt;
&lt;p&gt;Tracking down multiple people to approve and re-approve a PR can be time-consuming and frustrating for developers. This
results in longer PR turnaround times, slower development velocity, and missed commitments.&lt;/p&gt;
&lt;p&gt;From a developer experience perspective, we want to make the code review process as smooth and efficient as possible,
which means one reviewer for one PR. This approach is feasible by manually inverting the
&lt;code&gt;last matching pattern takes precedence&lt;/code&gt; rule in the &lt;code&gt;CODEOWNERS&lt;/code&gt; file by always including the owner(s) from the
previous pattern. For example, we would rewrite the above owners as:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/apps/ @octocat
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/apps/github @octocat @doctocat
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Keeping the &lt;code&gt;CODEOWNERS&lt;/code&gt; file in this format may be cumbersome to do manually, but it can be done with a script.&lt;/p&gt;
&lt;h2 id="issue-2-re-approvals-for-every-push"&gt;&lt;a href="#issue-2-re-approvals-for-every-push" class="header-anchor"&gt;&lt;/a&gt;Issue 2: Re-approvals for every push
&lt;/h2&gt;&lt;p&gt;When a developer makes a new push to a PR, all the code owners need to re-approve it. This is a poor developer
experience, as it requires the code owners to review potentially the same code changes multiple times.&lt;/p&gt;
&lt;p&gt;The issue stems from the lack of fine-grained control over the following option:&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/github-code-review-issues/dismiss-stale-pr-approvals.png"
alt="Dismiss stale pull request approvals when new commits are pushed"&gt;
&lt;/figure&gt;
&lt;p&gt;With multiple code owners, every code owner must re-approve every change.&lt;/p&gt;
&lt;p&gt;A code owner should not need to re-review code that didn&amp;rsquo;t change &amp;ndash; this is a waste of time and effort.&lt;/p&gt;
&lt;p&gt;With a single code owner, the reviewer must re-approve trivial or irrelevant changes, such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;fixing a typo in a comment&lt;/li&gt;
&lt;li&gt;fully accepting a suggestion from the reviewer&lt;/li&gt;
&lt;li&gt;re-generating an auto-generated file, such as documentation&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The required re-approvals can be frustrating and time-consuming for developers and code owners. They make developers
feel untrusted and inefficient.&lt;/p&gt;
&lt;p&gt;The main argument for requiring re-approvals is security‚Äîwe don&amp;rsquo;t want to merge potentially malicious code. If that&amp;rsquo;s
the case, we should have a security review process in place, not a code review process. A security review can be done by
a separate individual and improved by automated tools.&lt;/p&gt;
&lt;p&gt;In addition, we should be able to completely exclude some files/directories from the code review process. For example,
generated files, such as documentation based on code changes, should not require code review. Other generated files,
such as testing mocks, may have CI/CD checks that ensure they are generated correctly, and they should not require code
review either.&lt;/p&gt;
&lt;h2 id="issue-3-impractical-to-maintain-a-protected-feature-branch"&gt;&lt;a href="#issue-3-impractical-to-maintain-a-protected-feature-branch" class="header-anchor"&gt;&lt;/a&gt;Issue 3: Impractical to maintain a protected feature branch
&lt;/h2&gt;&lt;p&gt;A protected feature branch requires code reviews before merging. Since all the commits on the feature branch have
already been reviewed and approved, it is considered safe to merge into the main branch.&lt;/p&gt;
&lt;p&gt;The main issue is that the developer cannot simply update this feature branch with the latest changes on the main
branch. They need PR approval from all the code owners who have already approved the same changes on the main branch.
This busy work is another example of a waste of time and effort.&lt;/p&gt;
&lt;p&gt;In addition, a feature branch may be long-lived and introduce changes across multiple areas of the code base. This means
that it may require approval from many code owners, which can be time-consuming and frustrating.&lt;/p&gt;
&lt;h2 id="solution-custom-github-action-to-manage-code-reviews"&gt;&lt;a href="#solution-custom-github-action-to-manage-code-reviews" class="header-anchor"&gt;&lt;/a&gt;Solution: Custom GitHub Action to manage code reviews
&lt;/h2&gt;&lt;p&gt;Instead of relying on the default GitHub code review process, we can create a custom GitHub Action to manage code
reviews. The custom GitHub Action can:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;automatically identify a single reviewer for a PR (or identify a small group of reviewers, each of whom can approve
the PR)&lt;/li&gt;
&lt;li&gt;automatically exclude specific files/directories from the code review process&lt;/li&gt;
&lt;li&gt;automatically maintain the approval state of the PR when new commits meeting explicit criteria are pushed&lt;/li&gt;
&lt;li&gt;enable a usable and practical protected feature branch&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Here is an example &lt;a class="link" href="../typescript-github-action/" &gt;GitHub Action to replace GitHub&amp;rsquo;s pull request review process&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../engineering-transparency/" &gt;Why transparency beats everything else in engineering&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
How making work visible transforms teams from frustrated to high-performing through organizational transparency.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../track-engineering-metrics/" &gt;How to track engineering metrics with GitHub Actions&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Implement automated tracking of engineering performance metrics using GitHub&amp;rsquo;s built-in tools and APIs.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../git-merges-and-pull-requests" &gt;How git merge works with PRs&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Understand the mechanics behind pull request merges and how to optimize your git workflow.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../github-reusable-workflows-and-steps" &gt;How to reuse GitHub workflows and steps&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Build maintainable CI/CD pipelines by creating reusable components for your GitHub Actions.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../readable-code/" &gt;What is clean, readable code and why it matters?&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Discover why code readability directly impacts team productivity and how to measure it effectively.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../scaling-codebase-evolutionary-architecture/" &gt;How to scale your codebase with evolutionary architecture&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Learn architectural patterns that help teams maintain velocity as codebases and organizations grow.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a class="link" href="../remote-development-environment" &gt;Set up a remote dev environment&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
Configure development environments that enhance team collaboration and reduce onboarding friction.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="watch-the-top-3-issues-with-github-code-reviews"&gt;&lt;a href="#watch-the-top-3-issues-with-github-code-reviews" class="header-anchor"&gt;&lt;/a&gt;Watch the top 3 issues with GitHub code reviews
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/RWnJ84vTK48"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item><item><title>How to measure the execution time of Go tests accurately</title><link>https://victoronsoftware.com/posts/go-test-execution-time/</link><pubDate>Wed, 04 Sep 2024 00:00:00 +0000</pubDate><guid>https://victoronsoftware.com/posts/go-test-execution-time/</guid><description>&lt;img src="https://victoronsoftware.com/posts/go-test-execution-time/crash-test-dummy-headline.png" alt="Featured image of post How to measure the execution time of Go tests accurately" /&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="#accurately-measuring-test-execution-time" &gt;Accurately measuring test execution time&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="why-measure-test-execution-time"&gt;&lt;a href="#why-measure-test-execution-time" class="header-anchor"&gt;&lt;/a&gt;Why measure test execution time?
&lt;/h2&gt;&lt;p&gt;By speeding up your test suite, you&amp;rsquo;re improving developer experience and productivity. Faster tests mean faster feedback, which leads to quicker iterations and better code quality.&lt;/p&gt;
&lt;p&gt;When you run tests, you want to know how long they take to execute. This information can help you optimize your test suite and make it run faster. By measuring the execution time of your tests, you can identify slow tests and improve their performance.&lt;/p&gt;
&lt;h2 id="problems-with-current-measurement-tools"&gt;&lt;a href="#problems-with-current-measurement-tools" class="header-anchor"&gt;&lt;/a&gt;Problems with current measurement tools
&lt;/h2&gt;&lt;p&gt;We have yet to find a tool that provides detailed, actionable insights into the performance of Go tests.&lt;/p&gt;
&lt;p&gt;For example, running the &lt;code&gt;gotestsum tool slowest&lt;/code&gt; command from the &lt;a class="link" href="https://github.com/gotestyourself/gotestsum" target="_blank" rel="noopener"
&gt;gotestsum&lt;/a&gt; tool gave us the following output for our test suite:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;github.com/fleetdm/fleet/v4/server/datastore/mysql TestMDMApple 6m9.65s
github.com/fleetdm/fleet/v4/server/datastore/mysql TestSoftware 4m8.9s
github.com/fleetdm/fleet/v4/server/datastore/mysql TestPolicies 3m31s
github.com/fleetdm/fleet/v4/server/datastore/mysql TestActivity 2m16.67s
github.com/fleetdm/fleet/v4/server/datastore/mysql TestMDMWindows 2m14.85s
github.com/fleetdm/fleet/v4/server/datastore/mysql TestMDMShared 2m10.27s
github.com/fleetdm/fleet/v4/server/datastore/mysql TestVulnerabilities 2m7.98s
github.com/fleetdm/fleet/v4/server/datastore/mysql TestPacks 1m59.2s
github.com/fleetdm/fleet/v4/server/worker TestAppleMDM 1m55.11s
github.com/fleetdm/fleet/v4/server/datastore/mysql TestTeams 1m47.82s
github.com/fleetdm/fleet/v4/server/datastore/mysql TestAppConfig 1m42.81s
github.com/fleetdm/fleet/v4/server/datastore/mysql TestHosts 1m41.79s
github.com/fleetdm/fleet/v4/server/datastore/mysql/migrations/tables TestUp_20240709183940 1m36.43s
github.com/fleetdm/fleet/v4/server/datastore/mysql/migrations/tables TestUp_20240709132642 1m36.34s
github.com/fleetdm/fleet/v4/server/datastore/mysql/migrations/tables TestUp_20240725182118 1m35.95s
github.com/fleetdm/fleet/v4/server/datastore/mysql/migrations/tables TestUp_20240730171504 1m35.73s
github.com/fleetdm/fleet/v4/server/vulnerabilities/nvd TestTranslateCPEToCVE/recent_vulns 1m34.87s
...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The first thing to notice is that the numbers don&amp;rsquo;t add up. Our test suite takes around 14 minutes to run, but the times in the report add up to more than 14 minutes. This discrepancy makes it hard to identify the slowest tests.&lt;/p&gt;
&lt;p&gt;The second thing to notice is that our tests contain many subtests. The &lt;code&gt;TestMDMApple&lt;/code&gt; test contains over 40 subtests. We want to know the execution time of each subtest, not just the total time for the test.&lt;/p&gt;
&lt;p&gt;The third thing to notice is that the output does not provide any information regarding parallelism. We want to know if our tests run in parallel and how many run concurrently. We want to run tests in parallel when possible to speed up the test suite.&lt;/p&gt;
&lt;h2 id="understanding-parallelism-in-go-tests"&gt;&lt;a href="#understanding-parallelism-in-go-tests" class="header-anchor"&gt;&lt;/a&gt;Understanding parallelism in Go tests
&lt;/h2&gt;&lt;p&gt;Before measuring the execution time of our tests, we need to understand how Go tests run in parallel.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://victoronsoftware.com/posts/go-test-execution-time/go-test-parallelism.svg"
alt="Sequence diagram of a go test run with two packages, two tests, and two subtests."&gt;
&lt;/figure&gt;
&lt;p&gt;When you run &lt;code&gt;go test&lt;/code&gt;, Go compiles each package in your test suite in a separate binary. It then runs each binary in parallel. The tests in different packages run concurrently. This behavior is controlled by the &lt;code&gt;-p&lt;/code&gt; flag, which defaults to &lt;code&gt;GOMAXPROCS&lt;/code&gt;, the number of CPUs on your machine.&lt;/p&gt;
&lt;p&gt;Within a package, tests run sequentially by default &amp;ndash; the tests in the same package run one after the other. However, you can run tests in parallel within a package by calling &lt;code&gt;t.Parallel()&lt;/code&gt; in your test functions. This behavior is controlled by the &lt;code&gt;-parallel&lt;/code&gt; flag, which also defaults to &lt;code&gt;GOMAXPROCS&lt;/code&gt;. So, in a system with 8 CPUs, running a test suite with many packages and parallel tests will run 8 packages concurrently and 8 tests within each package concurrently, for a total of 64 tests running concurrently.&lt;/p&gt;
&lt;p&gt;Each test function may have multiple subtests, which may have their own subtests, and so on. Subtests run sequentially by default. However, you can also run subtests in parallel by calling &lt;code&gt;t.Parallel()&lt;/code&gt; in your subtest functions.&lt;/p&gt;
&lt;h2 id="accurately-measuring-test-execution-time"&gt;&lt;a href="#accurately-measuring-test-execution-time" class="header-anchor"&gt;&lt;/a&gt;Accurately measuring test execution time
&lt;/h2&gt;&lt;p&gt;To measure the execution time of your tests, we must use the &lt;code&gt;-json&lt;/code&gt; flag with the &lt;code&gt;go test&lt;/code&gt; command. This flag outputs test results in JSON format, which we can parse and analyze.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;Action&lt;/code&gt; field in the JSON output shows the start and end times of each test and subtest.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Time&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2024-08-26T19:22:51.969606869Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Action&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;run&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Package&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/fleetdm/fleet/v4/cmd/cpe&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Test&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;TestCPEDB&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Time&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2024-08-26T19:22:51.96984165Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Action&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;run&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Package&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/fleetdm/fleet/v4/cmd/cpe&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Test&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;TestCPEDB/test1&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Time&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2024-08-26T19:22:51.969928132Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Action&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;pause&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Package&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/fleetdm/fleet/v4/cmd/cpe&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Test&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;TestCPEDB/test1&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Time&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2024-08-26T19:22:51.969983777Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Action&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;run&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Package&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/fleetdm/fleet/v4/cmd/cpe&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Test&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;TestCPEDB/test2&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Time&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2024-08-26T19:22:51.970052987Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Action&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;pause&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Package&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/fleetdm/fleet/v4/cmd/cpe&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Test&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;TestCPEDB/test2&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Time&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2024-08-26T19:22:51.970090377Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Action&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;cont&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Package&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/fleetdm/fleet/v4/cmd/cpe&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Test&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;TestCPEDB/test1&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Time&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2024-08-26T19:22:51.973464469Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Action&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;cont&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Package&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/fleetdm/fleet/v4/cmd/cpe&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Test&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;TestCPEDB/test2&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Time&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2024-08-26T19:22:52.015505184Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Action&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;pass&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Package&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/fleetdm/fleet/v4/cmd/cpe&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Test&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;TestCPEDB/test1&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Elapsed&amp;#34;&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;0.04&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Time&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2024-08-26T19:22:52.015523238Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Action&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;pass&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Package&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/fleetdm/fleet/v4/cmd/cpe&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Test&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;TestCPEDB/test2&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Elapsed&amp;#34;&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;0.04&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Time&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2024-08-26T19:22:52.015527907Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Action&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;pass&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Package&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/fleetdm/fleet/v4/cmd/cpe&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Test&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;TestCPEDB&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Elapsed&amp;#34;&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;While parsing the JSON output, we can track how many tests are running in parallel. We can then adjust the execution time of each test by dividing the total time by the number of tests running concurrently. Since we don&amp;rsquo;t have access to the actual CPU time each test used, this is the best approximation we can get.&lt;/p&gt;
&lt;p&gt;When tests run in parallel, we typically see the &lt;code&gt;pause&lt;/code&gt; and &lt;code&gt;cont&lt;/code&gt; actions. If we see these actions, we know that the test or subtest is running in parallel.&lt;/p&gt;
&lt;p&gt;We created a parser called &lt;a class="link" href="https://github.com/getvictor/goteststats" target="_blank" rel="noopener"
&gt;goteststats&lt;/a&gt; that does these calculations.&lt;/p&gt;
&lt;h2 id="accurate-test-execution-time-measurement-in-practice"&gt;&lt;a href="#accurate-test-execution-time-measurement-in-practice" class="header-anchor"&gt;&lt;/a&gt;Accurate test execution time measurement in practice
&lt;/h2&gt;&lt;p&gt;By running our &lt;a class="link" href="https://github.com/getvictor/goteststats" target="_blank" rel="noopener"
&gt;goteststats&lt;/a&gt; parser on the JSON output of our test suite, we gained actionable insights into our tests&amp;rsquo; performance.&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;WARNING: Stopped test not found in running tests: TestGenerateMDMApple/successful_run
github.com/fleetdm/fleet/v4/server/datastore/mysql/migrations/tables TestUp_20240709132642: 8.142s (total: 2m12.806s parallel: 16)
github.com/fleetdm/fleet/v4/server/cron TestCalendarEvents1KHosts: 7.853s (total: 36.158s parallel: 4)
github.com/fleetdm/fleet/v4/server/cron TestEventForDifferentHost: 7.853s (total: 36.158s parallel: 4)
github.com/fleetdm/fleet/v4/cmd/fleet TestCronVulnerabilitiesCreatesDatabasesPath: 6.878s (total: 30.232s parallel: 4)
github.com/fleetdm/fleet/v4/server/vulnerabilities/nvd TestTranslateCPEToCVE/find_vulns_on_cpes: 6.849s (total: 1m34.89s parallel: 13)
github.com/fleetdm/fleet/v4/server/vulnerabilities/nvd TestTranslateCPEToCVE/recent_vulns: 6.849s (total: 1m34.89s parallel: 13)
github.com/fleetdm/fleet/v4/server/vulnerabilities/oval TestOvalAnalyzer/#load/invalid_vuln_path: 5.844s (total: 1m25.152s parallel: 14)
github.com/fleetdm/fleet/v4/server/vulnerabilities/oval TestOvalAnalyzer/analyzing_RHEL_software: 5.844s (total: 1m25.152s parallel: 14)
github.com/fleetdm/fleet/v4/server/vulnerabilities/oval TestOvalAnalyzer/analyzing_Ubuntu_software: 5.844s (total: 1m25.151s parallel: 14)
github.com/fleetdm/fleet/v4/cmd/fleet TestAutomationsSchedule: 5.699s (total: 14.213s parallel: 2)
github.com/fleetdm/fleet/v4/server/datastore/mysql/migrations/tables TestUp_20240725182118: 5.623s (total: 1m37.577s parallel: 17)
github.com/fleetdm/fleet/v4/server/datastore/mysql/migrations/tables TestUp_20240709183940: 5.588s (total: 1m36.771s parallel: 17)
github.com/fleetdm/fleet/v4/server/datastore/mysql/migrations/tables TestUp_20240709124958: 5.52s (total: 1m35.622s parallel: 17)
github.com/fleetdm/fleet/v4/server/datastore/mysql/migrations/tables TestUp_20240730171504: 5.517s (total: 1m35.74s parallel: 17)
github.com/fleetdm/fleet/v4/server/datastore/mysql/migrations/tables TestUp_20240726100517: 5.418s (total: 1m33.987s parallel: 17)
...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;For a given test, we provide the adjusted time, the total time, and the average number of tests running concurrently with this test. The adjusted time is the time the test took to execute, which is also the time saved if we removed this test from the suite.&lt;/p&gt;
&lt;p&gt;The first thing to notice is that the numbers add up. The total time for the test suite is around 14 minutes, and the times in the report add up to around 14 minutes.&lt;/p&gt;
&lt;p&gt;The second thing to notice is that we now have the execution time of each subtest. This information is crucial for identifying slow tests and improving their performance.&lt;/p&gt;
&lt;p&gt;The third thing to notice is that we now have information about parallelism. We can see how many tests are running concurrently and how many tests are running in parallel. If we see a test with a low parallelism number, we know that this test is a bottleneck and should parallelized.&lt;/p&gt;
&lt;p&gt;The WARNING message indicates that the JSON output did not contain the start time of the test. This issue can happen if the console output of the code under test does not include a new line and gets mixed with the output of Go&amp;rsquo;s testing package. For example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Time&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;2024-08-26T19:23:17.8084601Z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Action&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;output&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Package&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/fleetdm/fleet/v4/cmd/fleetctl&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Test&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;TestGenerateMDMApple/CSR_API_call_fails&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;Output&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;requesting APNs CSR: GET /api/latest/fleet/mdm/apple/request_csr received status 502 Bad Gateway: FleetDM CSR request failed: bad request=== RUN TestGenerateMDMApple/successful_run\n&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="goteststats-on-github"&gt;&lt;a href="#goteststats-on-github" class="header-anchor"&gt;&lt;/a&gt;&lt;code&gt;goteststats&lt;/code&gt; on GitHub
&lt;/h2&gt;&lt;p&gt;&lt;a class="link" href="https://github.com/getvictor/goteststats" target="_blank" rel="noopener"
&gt;goteststats&lt;/a&gt; is available on GitHub. You can use it to get detailed performance data for your Go test suite.&lt;/p&gt;
&lt;h2 id="further-reading"&gt;&lt;a href="#further-reading" class="header-anchor"&gt;&lt;/a&gt;Further reading
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Recently, we wrote about &lt;a class="link" href="../optimizing-performance-of-go-app" &gt;optimizing the performance of Go applications&lt;/a&gt; and &lt;a class="link" href="../analyze-go-build/" &gt;analyzing Go build times&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;And &lt;a class="link" href="../readable-code/" &gt;how to measure and fix unreadable code&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;We also explored &lt;a class="link" href="../fuzz-testing-with-go" &gt;fuzz testing with Go&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;In addition, we showed &lt;a class="link" href="../exe-installer" &gt;how to create an EXE installer for a Go program&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;We also published an article on &lt;a class="link" href="../go-modules-and-packages" &gt;using Go modules and packages&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;And we wrote about &lt;a class="link" href="../track-engineering-metrics/" &gt;automatically tracking engineering metrics with Go&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="watch-how-to-measure-the-execution-time-of-go-tests-accurately"&gt;&lt;a href="#watch-how-to-measure-the-execution-time-of-go-tests-accurately" class="header-anchor"&gt;&lt;/a&gt;Watch how to measure the execution time of Go tests accurately
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/caTDvS5vCjA"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; If you want to comment on this article, please do so on the YouTube video.&lt;/p&gt;</description></item></channel></rss>