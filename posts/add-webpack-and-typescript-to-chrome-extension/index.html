<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Expand a basic Chrome extension with webpack and TypeScript development tooling"><title>Add webpack and TypeScript to a Chrome extension (2024)</title>
<link rel=canonical href=https://victoronsoftware.com/posts/add-webpack-and-typescript-to-chrome-extension/><link rel=stylesheet href=/scss/style.min.0304c6baf04e01a8fe70693791cb744d56a3578a3120a8796cefc66825aa39c7.css><meta property='og:title' content="Add webpack and TypeScript to a Chrome extension (2024)"><meta property='og:description' content="Expand a basic Chrome extension with webpack and TypeScript development tooling"><meta property='og:url' content='https://victoronsoftware.com/posts/add-webpack-and-typescript-to-chrome-extension/'><meta property='og:site_name' content='Victor on Software'><meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:tag' content='Chrome Extension'><meta property='article:tag' content='TypeScript'><meta property='article:tag' content='webpack'><meta property='article:tag' content='DevTools'><meta property='article:published_time' content='2024-05-23T00:00:00+00:00'><meta property='article:modified_time' content='2024-05-23T00:00:00+00:00'><meta property='og:image' content='https://victoronsoftware.com/posts/add-webpack-and-typescript-to-chrome-extension/chrome-typescript-webpack.png'><meta name=twitter:title content="Add webpack and TypeScript to a Chrome extension (2024)"><meta name=twitter:description content="Expand a basic Chrome extension with webpack and TypeScript development tooling"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://victoronsoftware.com/posts/add-webpack-and-typescript-to-chrome-extension/chrome-typescript-webpack.png'><script async src="https://www.googletagmanager.com/gtag/js?id=G-1XV381YSQ8"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1XV381YSQ8")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu02a35fbedf562a954847f1a0edade347_219789_300x0_resize_box_3.png width=300 height=297 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Victor on Software</a></h1><h2 class=site-description>Software engineering, security, and related topics</h2></div></header><ol class=menu-social><li><a href=https://fleetdm.com target=_blank title=Fleet rel=me><svg width="58.219mm" height="58.202mm" viewBox="0 0 58.219 58.202"><g stroke-width=".26458"><path d="m7.5963 14.823c3.954.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2053 7.1594 7.1594 7.1594z" fill="#63c740"/><path d="m29.075 14.823c3.9539.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.9541.0-7.1595 3.2053-7.1595 7.1594.0 3.954 3.2054 7.1594 7.1595 7.1594z" fill="#5cabdf"/><path d="m50.552 14.823c3.9542.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2052-7.1594-7.1594-7.1594-3.9539.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2054 7.1594 7.1594 7.1594z" fill="#d66c7b"/><path d="m7.5963 36.301c3.954.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.954.0-7.1594 3.2054-7.1594 7.1595.0 3.9539 3.2053 7.1594 7.1594 7.1594z" fill="#c98def"/><path d="m29.075 36.301c3.9539.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.9541.0-7.1595 3.2054-7.1595 7.1595.0 3.9539 3.2054 7.1594 7.1595 7.1594z" fill="#faa669"/><path d="m7.5963 57.779c3.954.0 7.1594-3.2052 7.1594-7.1594.0-3.9539-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2054-7.1594 7.1594.0 3.9542 3.2053 7.1594 7.1594 7.1594z" fill="#3aefc4"/></g></svg></a></li><li><a href=https://github.com/getvictor target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/lyuboslavsky/ target=_blank title=LinkedIn rel=me><svg width="16" height="16" fill="currentcolor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526.0 1.175.0h13.65C15.474.0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487.0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401m-1.2-8.212c.837.0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822.0-1.359.54-1.359 1.248.0.694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869.0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274.0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54.0 01.016-.025V6.169h-2.4c.03.678.0 7.225.0 7.225h2.4"/></svg></a></li><li><a href=http://www.youtube.com/@VictorOnSoftware target=_blank title=YouTube rel=me><svg height="800" width="800" id="Layer_1" viewBox="0 0 461.001 461.001"><g><path style="fill:#f61c0d" d="M365.257 67.393H95.744C42.866 67.393.0 110.259.0 163.137v134.728c0 52.878 42.866 95.744 95.744 95.744h269.513c52.878.0 95.744-42.866 95.744-95.744V163.137c0-52.878-42.866-95.744-95.744-95.744zM300.506 237.056l-126.06 60.123c-3.359 1.602-7.239-.847-7.239-4.568V168.607c0-3.774 3.982-6.22 7.348-4.514l126.06 63.881C304.363 229.873 304.298 235.248 300.506 237.056z"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/page/tools/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Software tools</span></a></li><li><a href=/page/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/page/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/posts/add-webpack-and-typescript-to-chrome-extension/><img src=/posts/add-webpack-and-typescript-to-chrome-extension/chrome-typescript-webpack_hu9184b01262dcaf0a34fa52a6019d1dcb_42080_800x0_resize_box_3.png srcset="/posts/add-webpack-and-typescript-to-chrome-extension/chrome-typescript-webpack_hu9184b01262dcaf0a34fa52a6019d1dcb_42080_800x0_resize_box_3.png 800w, /posts/add-webpack-and-typescript-to-chrome-extension/chrome-typescript-webpack_hu9184b01262dcaf0a34fa52a6019d1dcb_42080_1600x0_resize_box_3.png 1600w" width=800 height=419 loading=lazy alt="Featured image of post Add webpack and TypeScript to a Chrome extension (2024)"></a></div><div class=article-details><header class=article-category><a href=/categories/software-development/>Software Development</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/add-webpack-and-typescript-to-chrome-extension/>Add webpack and TypeScript to a Chrome extension (2024)</a></h2><h3 class=article-subtitle>Expand a basic Chrome extension with webpack and TypeScript development tooling</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>May 23, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>10 minute read</time></div></footer></div></header><section class=article-content><p>This article is part of a series on creating a production-ready Chrome extension. The previous article covered <a class=link href=../create-chrome-extension>creating a basic Chrome extension without any tooling</a>. For a list of all articles in the series, see the <a class=link href=../chrome-extension>Chrome extension series overview</a>.</p><ul><li><a class=link href=#what-is-webpack>Add webpack bundler</a></li><li><a class=link href=#what-is-typescript>Add TypeScript</a></li><li><a class=link href=#convert-webpack-configuration-from-javascript-to-typescript>Convert webpack configuration from JavaScript to TypeScript</a></li></ul><h1 id=introduction><a href=#introduction class=header-anchor></a>Introduction</h1><p>This article will add the webpack module bundler and TypeScript support to the Chrome extension we created in the previous article. This software tooling will allow us to use modern JavaScript features and development tools.</p><p>A module bundler and TypeScript are essential tools for modern web development. They improve the development experience for large or long-running projects.</p><h1 id=prerequisites---nodejs-and-npm><a href=#prerequisites---nodejs-and-npm class=header-anchor></a>Prerequisites - Node.js and npm</h1><p>Before we start, make sure you have <a class=link href=https://nodejs.org/ target=_blank rel=noopener>Node.js</a> and <a class=link href=https://www.npmjs.com/ target=_blank rel=noopener>npm</a> installed. Node.js is a JavaScript runtime. We will use it to run webpack and future development tools. npm is a JavaScript package manager.</p><p>You can check if you have them installed by running the following commands:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>node -v
</span></span><span style=display:flex><span>npm -v
</span></span></code></pre></div><h1 id=packagejson><a href=#packagejson class=header-anchor></a>package.json</h1><p>First, we will create a <code>package.json</code> file containing project and dependency info. We can use the <code>npm init</code> command to create the file. Or manually create one containing something like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;my-chrome-extension&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;0.1.0&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;repository&#34;</span>: <span style=color:#e6db74>&#34;https://github.com/getvictor/create-chrome-extension&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;author&#34;</span>: <span style=color:#e6db74>&#34;getvictor&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;license&#34;</span>: <span style=color:#e6db74>&#34;MIT&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=what-is-webpack><a href=#what-is-webpack class=header-anchor></a>What is webpack?</h1><p><a class=link href=https://webpack.js.org/ target=_blank rel=noopener>Webpack</a> is a module bundler for JavaScript applications. It takes modules with dependencies and generates static assets representing those modules. We will use webpack to bundle multiple JavaScript files into a single file.</p><p>A module bundler allows you to write modular code and bundle it into a single file. TypeScript is a superset of JavaScript that adds static typing and other features to the language.</p><p>We will install webpack with <code>npm</code>:</p><pre tabindex=0><code>npm install --save-dev webpack webpack-cli webpack-merge copy-webpack-plugin
</code></pre><ul><li><a class=link href=https://www.npmjs.com/package/webpack target=_blank rel=noopener>webpack</a> is the core module bundler</li><li><a class=link href=https://www.npmjs.com/package/webpack-cli target=_blank rel=noopener>webpack-cli</a> is the command-line interface for webpack</li><li><a class=link href=https://www.npmjs.com/package/webpack-merge target=_blank rel=noopener>webpack-merge</a> is a utility to merge multiple webpack configurations, which we will use to differentiate development and production configs</li><li><a class=link href=https://www.npmjs.com/package/copy-webpack-plugin target=_blank rel=noopener>copy-webpack-plugin</a> is a plugin to copy files and directories in webpack</li></ul><p>The above <code>npm</code> command will install the packages, create a <code>package-lock.json</code> file, and add them to the <code>devDependencies</code> section of the <code>package.json</code> file. The updated <code>package.json</code> should look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;my-chrome-extension&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;0.1.0&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;repository&#34;</span>: <span style=color:#e6db74>&#34;https://github.com/getvictor/create-chrome-extension&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;author&#34;</span>: <span style=color:#e6db74>&#34;getvictor&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;license&#34;</span>: <span style=color:#e6db74>&#34;MIT&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;devDependencies&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;copy-webpack-plugin&#34;</span>: <span style=color:#e6db74>&#34;^12.0.2&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;webpack&#34;</span>: <span style=color:#e6db74>&#34;^5.91.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;webpack-cli&#34;</span>: <span style=color:#e6db74>&#34;^5.1.4&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;webpack-merge&#34;</span>: <span style=color:#e6db74>&#34;^5.10.0&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=webpack-configuration><a href=#webpack-configuration class=header-anchor></a>webpack configuration</h1><p>Next, we will create webpack configuration files. Webpack uses a configuration file to define how to bundle the project. We will create two configurations: one for development and one for production. Initially, we will use JavaScript for the configuration files, but we will convert them to TypeScript later.</p><p>Create a <code>webpack.common.js</code> file with the shared configuration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>path</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;path&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>CopyWebpackPlugin</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;copy-webpack-plugin&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>background</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./src/background.js&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>content</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./src/content.js&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>popup</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./src/popup.js&#39;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;[name].js&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#a6e22e>__dirname</span>, <span style=color:#e6db74>&#39;dist&#39;</span>),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>clean</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// Clean the output directory before emit.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CopyWebpackPlugin</span>({
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>patterns</span><span style=color:#f92672>:</span> [{ <span style=color:#a6e22e>from</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;static&#39;</span> }],
</span></span><span style=display:flex><span>        }),
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Create a <code>webpack.dev.js</code> file with the development configuration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>merge</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;webpack-merge&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>common</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./webpack.common.js&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>merge</span>(<span style=color:#a6e22e>common</span>, {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;development&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>devtool</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;inline-source-map&#39;</span>,
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>Create a <code>webpack.prod.js</code> file with the production configuration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>merge</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;webpack-merge&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>common</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./webpack.common.js&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>merge</span>(<span style=color:#a6e22e>common</span>, {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;production&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>devtool</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;source-map&#39;</span>,
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><h2 id=refactoring-directory-structure><a href=#refactoring-directory-structure class=header-anchor></a>Refactoring directory structure</h2><p>We will refactor the directory structure to separate the source code from the static files. Create a <code>src</code> directory and move the JavaScript files (<code>background.js</code>, <code>content.js</code>, <code>popup.js</code>) into it. Create a <code>static</code> directory and move the <code>manifest.json</code>, <code>popup.html</code>, and <code>popup.css</code> file into it.</p><p>The directory structure should look like this (running <a class=link href=https://en.wikipedia.org/wiki/Tree_%28command%29 target=_blank rel=noopener>tree</a><code> . -I node_modules</code>):</p><pre tabindex=0><code>.
├── package-lock.json
├── package.json
├── src
│   ├── background.js
│   ├── content.js
│   └── popup.js
├── static
│   ├── manifest.json
│   ├── popup.css
│   └── popup.html
├── webpack.common.js
├── webpack.dev.js
└── webpack.prod.js
</code></pre><h2 id=running-webpack><a href=#running-webpack class=header-anchor></a>Running webpack</h2><p>Now, we can run the webpack bundler using the following command:</p><pre tabindex=0><code>./node_modules/.bin/webpack --watch --config webpack.dev.js
</code></pre><p>This command creates a <code>dist</code> directory with the bundled files. The <code>--watch</code> flag tells webpack to continue running, watch for changes, and recompile the files when changes occur. This recompilation is crucial for development, as it allows us to see our code changes in real time.</p><p>We can run the production build with:</p><pre tabindex=0><code>./node_modules/.bin/webpack --config webpack.prod.js
</code></pre><p>Now, we can add scripts to the <code>package.json</code> file to simplify how we run webpack:</p><pre tabindex=0><code>  ...
  &#34;scripts&#34;: {
    &#34;build&#34;: &#34;webpack --config webpack.prod.js&#34;,
    &#34;start&#34;: &#34;webpack --watch --config webpack.dev.js&#34;
  }
</code></pre><p>These scripts allow us to run <code>npm run build</code> to build the production version and <code>npm start</code> (or <code>npm run start</code>) to start the development version.</p><p>At this point, we can test the browser extension to ensure it is still working as before. Open the Chrome browser, go to <code>chrome://extensions</code>, enable <code>Developer mode</code>, click on <code>Load unpacked</code>, and select the <code>dist</code> directory.</p><h1 id=what-is-typescript><a href=#what-is-typescript class=header-anchor></a>What is TypeScript?</h1><p><a class=link href=https://www.typescriptlang.org/ target=_blank rel=noopener>TypeScript</a> is a superset of JavaScript that adds static typing and other features to the language. It compiles to plain JavaScript and can be used in any browser or JavaScript engine. Although TypeScript is not required for writing Chrome extensions, it
is highly recommended as it can help catch errors early and improve code quality.</p><p>We install TypeScript with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm install --save-dev typescript @tsconfig/recommended ts-node ts-loader @types/chrome
</span></span></code></pre></div><ul><li><a class=link href=https://www.npmjs.com/package/typescript target=_blank rel=noopener>typescript</a> is the core TypeScript compiler</li><li><a class=link href=https://www.npmjs.com/package/@tsconfig/recommended target=_blank rel=noopener>@tsconfig/recommended</a> is a recommended TypeScript configuration, which we will use</li><li><a class=link href=https://www.npmjs.com/package/ts-node target=_blank rel=noopener>ts-node</a> is a TypeScript execution environment for Node.js, which is needed for converting the webpack configuration to TypeScript</li><li><a class=link href=https://www.npmjs.com/package/ts-loader target=_blank rel=noopener>ts-loader</a> is a TypeScript loader for webpack, which is needed for webpack to understand TypeScript source files</li><li><a class=link href=https://www.npmjs.com/package/@types/chrome target=_blank rel=noopener>@types/chrome</a> is the TypeScript type definitions for the Chrome extension API</li></ul><h2 id=what-are-typescript-type-definitions><a href=#what-are-typescript-type-definitions class=header-anchor></a>What are TypeScript type definitions?</h2><p>We loaded the <code>@types/chrome</code> packages to provide TypeScript type definitions for the Chrome extension API.</p><p>TypeScript type definitions are files that describe the shape of a JavaScript library. They provide type information for JavaScript libraries that were not written in TypeScript. This information allows TypeScript to understand the library&rsquo;s API and provide type checking. With this information, TypeScript can check our code.</p><p><code>@types/chrome</code> provides a global <code>chrome</code> object representing the Chrome extension API. No additional code is needed to use it from the command line, as TypeScript automatically loads it. However, IDEs may need to be configured to recognize this global type definition.</p><h3 id=tsconfigjson><a href=#tsconfigjson class=header-anchor></a><code>tsconfig.json</code></h3><p>Next, we will create a <code>tsconfig.json</code> file to configure TypeScript. This file tells the TypeScript compiler how to compile the project. Create a <code>tsconfig.json</code> file with the recommended config:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span> <span style=color:#f92672>&#34;extends&#34;</span>: <span style=color:#e6db74>&#34;@tsconfig/recommended/tsconfig.json&#34;</span>,
</span></span><span style=display:flex><span> <span style=color:#f92672>&#34;compilerOptions&#34;</span>: {
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;sourceMap&#34;</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We added the <code>sourceMap</code> option to generate source maps, which help debug TypeScript code in the browser.</p><h2 id=convert-webpack-configuration-from-javascript-to-typescript><a href=#convert-webpack-configuration-from-javascript-to-typescript class=header-anchor></a>Convert webpack configuration from JavaScript to TypeScript</h2><p>First, rename the webpack configuration files to TypeScript files by changing the extension from <code>.js</code> to <code>.ts</code>. For example, <code>webpack.common.js</code> becomes <code>webpack.common.ts</code>. Then, update the contents of the files to TypeScript syntax.</p><p><code>webpack.common.ts</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>path</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;path&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>webpack</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;webpack&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>CopyWebpackPlugin</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;copy-webpack-plugin&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>config</span>: <span style=color:#66d9ef>webpack.Configuration</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>background</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./src/background.ts&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>content</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./src/content.ts&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>popup</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./src/popup.ts&#39;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;[name].js&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>path</span>: <span style=color:#66d9ef>path.resolve</span>(<span style=color:#a6e22e>__dirname</span>, <span style=color:#e6db74>&#39;dist&#39;</span>),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>clean</span>: <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// Clean the output directory before emit.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CopyWebpackPlugin</span>({
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>patterns</span><span style=color:#f92672>:</span> [{<span style=color:#66d9ef>from</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;static&#39;</span>}],
</span></span><span style=display:flex><span>        }),
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>config</span>
</span></span></code></pre></div><p>We made the following changes to the shared config:</p><ul><li>We changed the <code>require</code> statements to <code>import</code> statements</li><li>We changed the <code>module.exports</code> to <code>export default</code></li><li>We added the <code>webpack.Configuration</code> type from the <code>webpack</code> package</li></ul><p><code>webpack.dev.ts</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>Configuration</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;webpack&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>merge</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;webpack-merge&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>config</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;./webpack.common&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>merged</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>merge</span>&lt;<span style=color:#f92672>Configuration</span>&gt;(<span style=color:#a6e22e>config</span>,{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;development&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>devtool</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;inline-source-map&#39;</span>,
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>merged</span>
</span></span></code></pre></div><p><code>webpack.prod.ts</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>Configuration</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;webpack&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>merge</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;webpack-merge&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>config</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;./webpack.common&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>merged</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>merge</span>&lt;<span style=color:#f92672>Configuration</span>&gt;(<span style=color:#a6e22e>config</span>,{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;production&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>devtool</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;source-map&#39;</span>,
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>merged</span>
</span></span></code></pre></div><p>And update the <code>package.json</code> scripts to use the TypeScript configuration files:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>...</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;build&#34;</span>: <span style=color:#e6db74>&#34;webpack --config webpack.prod.ts&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;start&#34;</span>: <span style=color:#e6db74>&#34;webpack --watch --config webpack.dev.ts&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span></code></pre></div><p>We can test <code>npm run start</code> and <code>npm run build</code> to ensure the new webpack Typescript configurations are working correctly.</p><h2 id=convert-javascript-source-files-to-typescript><a href=#convert-javascript-source-files-to-typescript class=header-anchor></a>Convert JavaScript source files to TypeScript</h2><p>Finally, we will convert the JavaScript source files to TypeScript. Rename the <code>.js</code> files to <code>.ts</code> files. For example, <code>background.js</code> becomes <code>background.ts</code>. Update the contents of the files to TypeScript syntax.</p><p>Also, we will refactor the common <code>setBadgeText</code> function to a shared <code>common.ts</code> file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setBadgeText</span>(<span style=color:#a6e22e>enabled</span>: <span style=color:#66d9ef>boolean</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>text</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>enabled</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;ON&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;OFF&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>setBadgeText</span>({<span style=color:#a6e22e>text</span>: <span style=color:#66d9ef>text</span>})
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Updated <code>background.ts</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>setBadgeText</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./common&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>startUp() {</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#66d9ef>get</span>(<span style=color:#e6db74>&#34;enabled&#34;</span>, (<span style=color:#a6e22e>data</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>setBadgeText</span>(<span style=color:#f92672>!!</span><span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>enabled</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Ensure the background script always runs.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>runtime</span>.<span style=color:#a6e22e>onStartup</span>.<span style=color:#a6e22e>addListener</span>(<span style=color:#a6e22e>startUp</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>runtime</span>.<span style=color:#a6e22e>onInstalled</span>.<span style=color:#a6e22e>addListener</span>(<span style=color:#a6e22e>startUp</span>)
</span></span></code></pre></div><p>Updated <code>content.ts</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>blurFilter</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;blur(6px)&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>textToBlur</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Search this DOM node for text to blur and blur the parent element if found.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>processNode</span>(<span style=color:#a6e22e>node</span>: <span style=color:#66d9ef>Node</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>childNodes</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        Array.<span style=color:#66d9ef>from</span>(<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>childNodes</span>).<span style=color:#a6e22e>forEach</span>(<span style=color:#a6e22e>processNode</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>nodeType</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Node</span>.<span style=color:#a6e22e>TEXT_NODE</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>textContent</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>textContent</span>.<span style=color:#a6e22e>trim</span>().<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>parent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>parentElement</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>parent</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>parent</span>.<span style=color:#a6e22e>tagName</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;SCRIPT&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>parent</span>.<span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>filter</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>blurFilter</span>) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Already blurred
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>textContent</span>.<span style=color:#a6e22e>includes</span>(<span style=color:#a6e22e>textToBlur</span>)) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>blurElement</span>(<span style=color:#a6e22e>parent</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>blurElement</span>(<span style=color:#a6e22e>elem</span>: <span style=color:#66d9ef>HTMLElement</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>elem</span>.<span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>filter</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>blurFilter</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>debug</span>(<span style=color:#e6db74>&#34;blurred id:&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>elem</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; class:&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>elem</span>.<span style=color:#a6e22e>className</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34; tag:&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>elem</span>.<span style=color:#a6e22e>tagName</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; text:&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>elem</span>.<span style=color:#a6e22e>textContent</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Create a MutationObserver to watch for changes to the DOM.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>observer</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MutationObserver</span>((<span style=color:#a6e22e>mutations</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mutations</span>.<span style=color:#a6e22e>forEach</span>((<span style=color:#a6e22e>mutation</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mutation</span>.<span style=color:#a6e22e>addedNodes</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>mutation</span>.<span style=color:#a6e22e>addedNodes</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#a6e22e>processNode</span>)
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>processNode</span>(<span style=color:#a6e22e>mutation</span>.<span style=color:#a6e22e>target</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Enable the content script by default.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>enabled</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>keys</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;enabled&#34;</span>, <span style=color:#e6db74>&#34;item&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#66d9ef>get</span>(<span style=color:#a6e22e>keys</span>, (<span style=color:#a6e22e>data</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>enabled</span> <span style=color:#f92672>===</span> <span style=color:#66d9ef>false</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>enabled</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>item</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>textToBlur</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>item</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Only start observing the DOM if the extension is enabled and there is text to blur.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>enabled</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>textToBlur</span>.<span style=color:#a6e22e>trim</span>().<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>observer</span>.<span style=color:#a6e22e>observe</span>(document, {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>attributes</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>characterData</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>childList</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>subtree</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Loop through all elements on the page for initial processing.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>processNode</span>(document)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>Updated <code>popup.ts</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>setBadgeText</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./common&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Hello, world from popup!&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Handle the ON/OFF switch
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>checkbox</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#34;enabled&#34;</span>) <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>HTMLInputElement</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#66d9ef>get</span>(<span style=color:#e6db74>&#34;enabled&#34;</span>, (<span style=color:#a6e22e>data</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>checkbox</span>.<span style=color:#a6e22e>checked</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!!</span><span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>enabled</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setBadgeText</span>(<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>enabled</span>)
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#a6e22e>checkbox</span>.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;change&#34;</span>, (<span style=color:#a6e22e>event</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>HTMLInputElement</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#66d9ef>set</span>({<span style=color:#e6db74>&#34;enabled&#34;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>checked</span>})
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setBadgeText</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>checked</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Handle the input field
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>input</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#34;item&#34;</span>) <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>HTMLInputElement</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#66d9ef>get</span>(<span style=color:#e6db74>&#34;item&#34;</span>, (<span style=color:#a6e22e>data</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>item</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span><span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;change&#34;</span>, (<span style=color:#a6e22e>event</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>HTMLInputElement</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#66d9ef>set</span>({<span style=color:#e6db74>&#34;item&#34;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>})
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><h2 id=update-webpack-configuration-to-handle-typescript-source-files><a href=#update-webpack-configuration-to-handle-typescript-source-files class=header-anchor></a>Update webpack configuration to handle TypeScript source files</h2><p>Update <code>webpack.common.ts</code> to use the new TypeScript source files and add the <code>ts-loader</code> to the webpack configuration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>path</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;path&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>webpack</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;webpack&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>CopyWebpackPlugin</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;copy-webpack-plugin&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>config</span>: <span style=color:#66d9ef>webpack.Configuration</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>background</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./src/background.ts&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>content</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./src/content.ts&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>popup</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./src/popup.ts&#39;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>resolve</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>extensions</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;.ts&#34;</span>],
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>module</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>rules</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/\.ts$/</span>,
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>loader</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;ts-loader&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>exclude</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/node_modules/</span>,
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;[name].js&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>path</span>: <span style=color:#66d9ef>path.resolve</span>(<span style=color:#a6e22e>__dirname</span>, <span style=color:#e6db74>&#39;dist&#39;</span>),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>clean</span>: <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// Clean the output directory before emit.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CopyWebpackPlugin</span>({
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>patterns</span><span style=color:#f92672>:</span> [{<span style=color:#66d9ef>from</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;static&#39;</span>}],
</span></span><span style=display:flex><span>        }),
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>config</span>
</span></span></code></pre></div><h2 id=debug-our-typescript-extension-in-chrome><a href=#debug-our-typescript-extension-in-chrome class=header-anchor></a>Debug our TypeScript extension in Chrome</h2><p>Build the extension with <code>npm run start</code> and load it in Chrome.</p><p>Right-click the extension icon (<code>M</code>) and select <code>Inspect popup</code> to open the Chrome Developer Tools. By default, you can see the console logs from the <code>popup.ts</code> file.</p><p>Go to the <code>Sources</code> tab in the Chrome Developer Tools and open the <code>top/my-chrome-extension/src/popup.ts</code> file. You can set breakpoints and debug the popup script.</p><figure><img src=/posts/add-webpack-and-typescript-to-chrome-extension/chrome-extension-debug.png alt="Debugging Chrome extension popup"><figcaption><h4>Debugging Chrome extension popup</h4></figcaption></figure><p>The <code>popup.ts</code> file should exactly match the TypeScript code we wrote. You can set breakpoints, inspect variables, and step through the code.</p><h2 id=next-steps><a href=#next-steps class=header-anchor></a>Next steps</h2><p>In the next part of this series, we will add <a class=link href=../message-passing-in-chrome-extension>message passing between the content script, the background script, and the popup script</a>. This communication will allow us to make real-time changes across all parts of our Chrome extension.</p><h2 id=chrome-extension-with-webpack-and-typescript-code-on-github><a href=#chrome-extension-with-webpack-and-typescript-code-on-github class=header-anchor></a>Chrome extension with webpack and TypeScript code on GitHub</h2><p>The complete code is available on GitHub at: <a class=link href=https://github.com/getvictor/create-chrome-extension/tree/main/2-webpack-typescript target=_blank rel=noopener>https://github.com/getvictor/create-chrome-extension/tree/main/2-webpack-typescript</a></p><h2 id=add-webpack-and-typescript-to-a-chrome-extension-video><a href=#add-webpack-and-typescript-to-a-chrome-extension-video class=header-anchor></a>Add webpack and TypeScript to a Chrome extension video</h2><div class=video-wrapper><iframe loading=lazy src=https://www.youtube.com/embed/a3n-C-7u3VE allowfullscreen title="YouTube Video"></iframe></div><p><em>Note:</em> If you want to comment on this article, please do so on the YouTube video.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/chrome-extension/>Chrome Extension</a>
<a href=/tags/typescript/>TypeScript</a>
<a href=/tags/webpack/>webpack</a>
<a href=/tags/devtools/>DevTools</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/posts/create-chrome-extension/><div class=article-image><img src=/posts/create-chrome-extension/_hu7cf724450b4015658905efc628cab81b_42029_0858dde6f77e14c8510857c59334599f.png width=250 height=150 loading=lazy alt="Featured image of post Create a Chrome extension from scratch step-by-step (2024)" data-hash="md5-MnOynIrcq0SkAxd+ZcnNPA=="></div><div class=article-details><h2 class=article-title>Create a Chrome extension from scratch step-by-step (2024)</h2></div></a></article><article class=has-image><a href=/posts/react-hello-world/><div class=article-image><img src=/posts/react-hello-world/react-hello-world.114df3ffe4eaca64d6317811b540bfb6_hu84b0260e55078cc47c5a5b8b4b4901b4_85634_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post Build a React app from scratch: getting started (2024)" data-hash="md5-EU3z/+TqymTWMXgRtUC/tg=="></div><div class=article-details><h2 class=article-title>Build a React app from scratch: getting started (2024)</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2024 Victor on Software</section><section class=powerby></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>