<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Enable users to configure your Chrome extension's behavior and settings with a dedicated options page"><title>Adding options page to Chrome extension (2024)</title>
<link rel=canonical href=https://victoronsoftware.com/posts/add-options-to-chrome-extension/><link rel=stylesheet href=/scss/style.min.0304c6baf04e01a8fe70693791cb744d56a3578a3120a8796cefc66825aa39c7.css><meta property='og:title' content="Adding options page to Chrome extension (2024)"><meta property='og:description' content="Enable users to configure your Chrome extension's behavior and settings with a dedicated options page"><meta property='og:url' content='https://victoronsoftware.com/posts/add-options-to-chrome-extension/'><meta property='og:site_name' content='Victor on Software'><meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:tag' content='Chrome Extension'><meta property='article:tag' content='Configuration'><meta property='article:published_time' content='2024-07-03T00:00:00+00:00'><meta property='article:modified_time' content='2024-07-03T00:00:00+00:00'><meta property='og:image' content='https://victoronsoftware.com/posts/add-options-to-chrome-extension/chrome-extension-options-headline.png'><meta property='article:author' content='Victor Lyuboslavsky'><meta name=twitter:title content="Adding options page to Chrome extension (2024)"><meta name=twitter:description content="Enable users to configure your Chrome extension's behavior and settings with a dedicated options page"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://victoronsoftware.com/posts/add-options-to-chrome-extension/chrome-extension-options-headline.png'><script async src="https://www.googletagmanager.com/gtag/js?id=G-1XV381YSQ8"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1XV381YSQ8")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu02a35fbedf562a954847f1a0edade347_219789_300x0_resize_box_3.png width=300 height=297 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Victor on Software</a></h1><h2 class=site-description>Software engineering, security, and related topics</h2></div></header><ol class=menu-social><li><a href=https://fleetdm.com target=_blank title=Fleet rel=me><svg width="58.219mm" height="58.202mm" viewBox="0 0 58.219 58.202" xmlns="http://www.w3.org/2000/svg"><g stroke-width=".26458"><path d="m7.5963 14.823c3.954.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2053 7.1594 7.1594 7.1594z" fill="#63c740"/><path d="m29.075 14.823c3.9539.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.9541.0-7.1595 3.2053-7.1595 7.1594.0 3.954 3.2054 7.1594 7.1595 7.1594z" fill="#5cabdf"/><path d="m50.552 14.823c3.9542.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2052-7.1594-7.1594-7.1594-3.9539.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2054 7.1594 7.1594 7.1594z" fill="#d66c7b"/><path d="m7.5963 36.301c3.954.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.954.0-7.1594 3.2054-7.1594 7.1595.0 3.9539 3.2053 7.1594 7.1594 7.1594z" fill="#c98def"/><path d="m29.075 36.301c3.9539.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.9541.0-7.1595 3.2054-7.1595 7.1595.0 3.9539 3.2054 7.1594 7.1595 7.1594z" fill="#faa669"/><path d="m7.5963 57.779c3.954.0 7.1594-3.2052 7.1594-7.1594.0-3.9539-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2054-7.1594 7.1594.0 3.9542 3.2053 7.1594 7.1594 7.1594z" fill="#3aefc4"/></g></svg></a></li><li><a href=https://github.com/getvictor target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/lyuboslavsky/ target=_blank title=LinkedIn rel=me><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526.0 1.175.0h13.65C15.474.0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487.0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401m-1.2-8.212c.837.0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822.0-1.359.54-1.359 1.248.0.694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869.0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274.0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54.0 01.016-.025V6.169h-2.4c.03.678.0 7.225.0 7.225h2.4"/></svg></a></li><li><a href=http://www.youtube.com/@VictorOnSoftware target=_blank title=YouTube rel=me><svg height="800" width="800" id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 461.001 461.001"><g><path style="fill:#f61c0d" d="M365.257 67.393H95.744C42.866 67.393.0 110.259.0 163.137v134.728c0 52.878 42.866 95.744 95.744 95.744h269.513c52.878.0 95.744-42.866 95.744-95.744V163.137c0-52.878-42.866-95.744-95.744-95.744zM300.506 237.056l-126.06 60.123c-3.359 1.602-7.239-.847-7.239-4.568V168.607c0-3.774 3.982-6.22 7.348-4.514l126.06 63.881C304.363 229.873 304.298 235.248 300.506 237.056z"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/page/tools/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Software tools</span></a></li><li><a href=/page/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/page/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/posts/add-options-to-chrome-extension/><img src=/posts/add-options-to-chrome-extension/chrome-extension-options-headline_huf92c8489584674a78387b036c7cb3f4c_966643_800x0_resize_box_3.png srcset="/posts/add-options-to-chrome-extension/chrome-extension-options-headline_huf92c8489584674a78387b036c7cb3f4c_966643_800x0_resize_box_3.png 800w, /posts/add-options-to-chrome-extension/chrome-extension-options-headline_huf92c8489584674a78387b036c7cb3f4c_966643_1600x0_resize_box_3.png 1600w" width=800 height=419 loading=lazy alt="Featured image of post Adding options page to Chrome extension (2024)"></a></div><div class=article-details><header class=article-category><a href=/categories/software-development/>Software Development</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/add-options-to-chrome-extension/>Adding options page to Chrome extension (2024)</a></h2><h3 class=article-subtitle>Enable users to configure your Chrome extension's behavior and settings with a dedicated options page</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jul 03, 2024</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>4 minute read</time></div></footer></div></header><section class=article-content><p>This article is part of a series on <a class=link href=../chrome-extension>building a complete production-ready Chrome extension</a>.</p><p>In the first article of the series, we introduced
<a class=link href=../create-chrome-extension/#parts-of-a-chrome-extension>the main parts of a Chrome extension</a> &ndash; the service worker
(background script), content script, and popup. This article will add a fourth part to our Chrome extension &ndash; an
options page. This page will allow users to configure the extension&rsquo;s behavior and settings.</p><h2 id=why-add-an-options-page><a href=#why-add-an-options-page class=header-anchor></a>Why add an options page?</h2><p>An options page is a user-friendly way for users to customize the extension to their needs. It can be as simple as a few
checkboxes or as complex as a full settings page with multiple tabs. Users can access the options page from the Chrome
extension&rsquo;s popup or the Chrome extension&rsquo;s context menu.</p><h2 id=adding-an-options-page><a href=#adding-an-options-page class=header-anchor></a>Adding an options page</h2><p>To add an options page to our Chrome extension, we need to create a new HTML file and add it to the extension&rsquo;s
manifest. Our options page will be a simple HTML file with some JavaScript to handle user interactions.</p><p>Our example options page will allow a user to exclude a web host, like victoronsoftware.com, from the extension&rsquo;s
functionality. The extension will store the excluded host in the extension&rsquo;s local storage.</p><p>We will add several new files, update the extension&rsquo;s configuration, and update the existing files.</p><p>Add a new file <code>options.html</code> to the <code>static</code> folder:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!doctype html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>title</span>&gt;Advanced options&lt;/<span style=color:#f92672>title</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>link</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;stylesheet&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/css&#34;</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;options.css&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>h2</span>&gt;Advanced options&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>h3</span>&gt;Web host to exclude&lt;/<span style=color:#f92672>h3</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;exclude_host&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;options.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></div><p>Add a new file <code>options.css</code> to the <code>static</code> folder:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>#exclude_host {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>5</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>500</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Add a new file <code>options.ts</code> to the <code>src</code> folder, which will watch for changes on the options page:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>Message</span>, <span style=color:#a6e22e>StoredConfig</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./common&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#66d9ef>get</span>(<span style=color:#66d9ef>null</span>, (<span style=color:#a6e22e>data</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>config</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>StoredConfig</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>excludeHost</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>excludeHost</span> <span style=color:#f92672>??</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>input</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(
</span></span><span style=display:flex><span>        <span style=color:#e6db74>`exclude_host`</span>,
</span></span><span style=display:flex><span>    ) <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>HTMLInputElement</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>excludeHost</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;change&#34;</span>, (<span style=color:#a6e22e>event</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>HTMLInputElement</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>updatedExcludeWebsite</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>updatedConfig</span>: <span style=color:#66d9ef>StoredConfig</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>excludeHost</span>: <span style=color:#66d9ef>updatedExcludeWebsite</span>}
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#66d9ef>set</span>(<span style=color:#a6e22e>updatedConfig</span>)
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Send message to content script in all tabs
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>tabs</span>
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>query</span>({})
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>tabs</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>message</span>: <span style=color:#66d9ef>Message</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>excludeHost</span>: <span style=color:#66d9ef>updatedExcludeWebsite</span>}
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>tab</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>tabs</span>) {
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>tab</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>undefined</span>) {
</span></span><span style=display:flex><span>                            <span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>tabs</span>
</span></span><span style=display:flex><span>                                .<span style=color:#a6e22e>sendMessage</span>(<span style=color:#a6e22e>tab</span>.<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>message</span>)
</span></span><span style=display:flex><span>                                .<span style=color:#66d9ef>catch</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>                                    <span style=color:#75715e>// We ignore tabs without a proper URL, like chrome://extensions/
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                                    <span style=color:#75715e>// Do nothing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                                })
</span></span><span style=display:flex><span>                        }
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                })
</span></span><span style=display:flex><span>                .<span style=color:#66d9ef>catch</span>((<span style=color:#a6e22e>error</span>: <span style=color:#66d9ef>unknown</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#34;Could not query tabs&#34;</span>, <span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex><span>                })
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>The types in <code>src/common.ts</code> need to be updated to include the new <code>excludeHost</code> field:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Message</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>enabled?</span>: <span style=color:#66d9ef>boolean</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>excludeHost?</span>: <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>StoredConfig</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>enabled?</span>: <span style=color:#66d9ef>boolean</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>item?</span>: <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>excludeHost?</span>: <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The content script <code>src/content.ts</code> needs to be updated to handle the new <code>excludeHost</code> setting. See the updated file
<a class=link href=https://github.com/getvictor/create-chrome-extension/blob/main/5-options-page/src/content.ts target=_blank rel=noopener>here</a>.</p><p>We need to update the extension&rsquo;s manifest to include the new options page. Add the following to the <code>manifest.json</code>
file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;options_page&#34;</span>: <span style=color:#e6db74>&#34;static/options.html&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In addition, we need to tell webpack to compile the new <code>options.ts</code> file. Update the <code>webpack.common.ts</code> file to
include the new entry point:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span>  <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>background</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/background.ts&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>content</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/content.ts&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>popup</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/popup.ts&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>options</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/options.ts&#34;</span>,
</span></span><span style=display:flex><span>  },
</span></span></code></pre></div><h2 id=testing-the-options-page><a href=#testing-the-options-page class=header-anchor></a>Testing the options page</h2><p>To test the options page, load the extension in Chrome and right-click on its icon. You should see a new <code>Options</code> item.
Clicking on this item will open the options page.</p><figure><img src=/posts/add-options-to-chrome-extension/chrome-extension-dropdown.png alt="New Options selection"><figcaption><h4>New Options selection</h4></figcaption></figure><h2 id=adding-a-link-to-the-options-page><a href=#adding-a-link-to-the-options-page class=header-anchor></a>Adding a link to the options page</h2><p>We can add a link to the popup to make it easier for users to access the options page. Update the <code>popup.html</code> file to
include a link to the options page:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;go-to-options&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button-link&#34;</span>&gt;Advanced options&lt;/<span style=color:#f92672>button</span>&gt;
</span></span></code></pre></div><p>Add the CSS for the link:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>button-link</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>background</span>: <span style=color:#66d9ef>none</span> <span style=color:#75715e>!important</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>border</span>: <span style=color:#66d9ef>none</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>padding</span>: <span style=color:#ae81ff>0</span> <span style=color:#75715e>!important</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>font-family</span>: arial, <span style=color:#66d9ef>sans-serif</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>color</span>: <span style=color:#ae81ff>#069</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>text-decoration</span>: <span style=color:#66d9ef>underline</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>cursor</span>: <span style=color:#66d9ef>pointer</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And add the TypeScript in <code>popup.ts</code> to handle the link click:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// Options page
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>optionsElement</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>querySelector</span>(<span style=color:#e6db74>&#34;#go-to-options&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>optionsElement</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#34;Could not find options element&#34;</span>)
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>optionsElement</span>.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;click&#34;</span>, <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// This code is based on Chrome for Developers documentation
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>runtime</span>.<span style=color:#a6e22e>openOptionsPage</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>runtime</span>.<span style=color:#a6e22e>openOptionsPage</span>().<span style=color:#66d9ef>catch</span>((<span style=color:#a6e22e>error</span>: <span style=color:#66d9ef>unknown</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#34;Could not open options page&#34;</span>, <span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex><span>            })
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            window.<span style=color:#a6e22e>open</span>(<span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>runtime</span>.<span style=color:#a6e22e>getURL</span>(<span style=color:#e6db74>&#34;options.html&#34;</span>))
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We will now see the <code>Advanced options</code> link in the popup. Clicking on the link will take the user to the options page.</p><figure><img src=/posts/add-options-to-chrome-extension/chrome-extension-options-link.png alt="Popup with Advanced options link"><figcaption><h4>Popup with Advanced options link</h4></figcaption></figure><h2 id=embedded-options-page><a href=#embedded-options-page class=header-anchor></a>Embedded options page</h2><p>Instead of a full options page, Chrome extensions can use an embedded options page. However, this approach was confusing
and not user-friendly because Chrome takes the user to the extension details page. We recommend using a dedicated
options page. To try an embedded options page, add the following to the <code>manifest.json</code> file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;options_ui&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;page&#34;</span>: <span style=color:#e6db74>&#34;options.html&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;open_in_tab&#34;</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=next-steps><a href=#next-steps class=header-anchor></a>Next steps</h2><p>In the next part of this series, we will focus on the look of our popup and options page. We will add CSS to make it
visually appealing and user-friendly.</p><h2 id=options-page-code-on-github><a href=#options-page-code-on-github class=header-anchor></a>Options page code on GitHub</h2><p>The complete code is available on GitHub at:
<a class=link href=https://github.com/getvictor/create-chrome-extension/tree/main/5-options-page target=_blank rel=noopener>https://github.com/getvictor/create-chrome-extension/tree/main/5-options-page</a></p><h2 id=options-page-video><a href=#options-page-video class=header-anchor></a>Options page video</h2><div class=video-wrapper><iframe loading=lazy src=https://www.youtube.com/embed/PdfUQirKlJA allowfullscreen title="YouTube Video"></iframe></div><p><em>Note:</em> If you want to comment on this article, please do so on the YouTube video.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/chrome-extension/>Chrome Extension</a>
<a href=/tags/configuration/>Configuration</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/posts/linting-and-formatting-typescript/><div class=article-image><img src=/posts/linting-and-formatting-typescript/_hu32dff4e139c82c0ce5159261aa2e516e_34503_71d7a06092fb432e6f8a69296ffa19f3.png width=250 height=150 loading=lazy alt="Featured image of post Linting and formatting TypeScript in Chrome extension (2024)" data-hash="md5-9iobOh0iqOITWHYQyQx6hA=="></div><div class=article-details><h2 class=article-title>Linting and formatting TypeScript in Chrome extension (2024)</h2></div></a></article><article class=has-image><a href=/posts/message-passing-in-chrome-extension/><div class=article-image><img src=/posts/message-passing-in-chrome-extension/_hu1ed8561cedf8e23a106e917b9f219ce7_1364307_5aca879d5c44cedf4e0305c5b4c1a8d3.png width=250 height=150 loading=lazy alt="Featured image of post Message passing in Chrome extension (2024)" data-hash="md5-Gya1YwJZ3yB4V+CoMkJUzw=="></div><div class=article-details><h2 class=article-title>Message passing in Chrome extension (2024)</h2></div></a></article><article class=has-image><a href=/posts/chrome-extension/><div class=article-image><img src=/posts/chrome-extension/_hu7cf724450b4015658905efc628cab81b_42029_0858dde6f77e14c8510857c59334599f.png width=250 height=150 loading=lazy alt="Featured image of post Build a production-ready Chrome extension" data-hash="md5-MnOynIrcq0SkAxd+ZcnNPA=="></div><div class=article-details><h2 class=article-title>Build a production-ready Chrome extension</h2></div></a></article><article class=has-image><a href=/posts/add-webpack-and-typescript-to-chrome-extension/><div class=article-image><img src=/posts/add-webpack-and-typescript-to-chrome-extension/_hu9184b01262dcaf0a34fa52a6019d1dcb_42080_2fa4f5b454d25f319d9c1eac8eee74ac.png width=250 height=150 loading=lazy alt="Featured image of post Add webpack and TypeScript to a Chrome extension (2024)" data-hash="md5-mZy3qK+rHiLtZ1R7ts9T/g=="></div><div class=article-details><h2 class=article-title>Add webpack and TypeScript to a Chrome extension (2024)</h2></div></a></article><article class=has-image><a href=/posts/create-chrome-extension/><div class=article-image><img src=/posts/create-chrome-extension/_hu7cf724450b4015658905efc628cab81b_42029_0858dde6f77e14c8510857c59334599f.png width=250 height=150 loading=lazy alt="Featured image of post Create a Chrome extension from scratch step-by-step (2024)" data-hash="md5-MnOynIrcq0SkAxd+ZcnNPA=="></div><div class=article-details><h2 class=article-title>Create a Chrome extension from scratch step-by-step (2024)</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2024 Victor on Software</section><section class=powerby></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>