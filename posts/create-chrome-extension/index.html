<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Build a basic Chrome extension without any additional tooling"><title>Create a Chrome extension from scratch step-by-step (2024)</title><link rel=canonical href=https://victoronsoftware.com/posts/create-chrome-extension/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="Create a Chrome extension from scratch step-by-step (2024)"><meta property='og:description' content="Build a basic Chrome extension without any additional tooling"><meta property='og:url' content='https://victoronsoftware.com/posts/create-chrome-extension/'><meta property='og:site_name' content='Victor on Software'><meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:tag' content='Chrome Extension'><meta property='article:tag' content='JavaScript'><meta property='article:tag' content='Web Development'><meta property='article:tag' content='Hello World'><meta property='article:published_time' content='2024-05-15T00:00:00+00:00'><meta property='article:modified_time' content='2024-05-15T00:00:00+00:00'><meta property='og:image' content='https://victoronsoftware.com/posts/create-chrome-extension/chrome-extension-headline.png'><meta property='article:author' content='Victor Lyuboslavsky'><meta name=twitter:title content="Create a Chrome extension from scratch step-by-step (2024)"><meta name=twitter:description content="Build a basic Chrome extension without any additional tooling"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://victoronsoftware.com/posts/create-chrome-extension/chrome-extension-headline.png'><script async src="https://www.googletagmanager.com/gtag/js?id=G-1XV381YSQ8"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1XV381YSQ8")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_ef16a31ddbe86d54.png width=300 height=297 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Victor on Software</a></h1><h2 class=site-description>Software engineering, security, and related topics</h2></div></header><ol class=menu-social><li><a href=https://fleetdm.com target=_blank title=Fleet rel=me><svg width="58.219mm" height="58.202mm" viewBox="0 0 58.219 58.202"><g stroke-width=".26458"><path d="m7.5963 14.823c3.954.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2053 7.1594 7.1594 7.1594z" fill="#63c740"/><path d="m29.075 14.823c3.9539.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.9541.0-7.1595 3.2053-7.1595 7.1594.0 3.954 3.2054 7.1594 7.1595 7.1594z" fill="#5cabdf"/><path d="m50.552 14.823c3.9542.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2052-7.1594-7.1594-7.1594-3.9539.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2054 7.1594 7.1594 7.1594z" fill="#d66c7b"/><path d="m7.5963 36.301c3.954.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.954.0-7.1594 3.2054-7.1594 7.1595.0 3.9539 3.2053 7.1594 7.1594 7.1594z" fill="#c98def"/><path d="m29.075 36.301c3.9539.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.9541.0-7.1595 3.2054-7.1595 7.1595.0 3.9539 3.2054 7.1594 7.1595 7.1594z" fill="#faa669"/><path d="m7.5963 57.779c3.954.0 7.1594-3.2052 7.1594-7.1594.0-3.9539-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2054-7.1594 7.1594.0 3.9542 3.2053 7.1594 7.1594 7.1594z" fill="#3aefc4"/></g></svg></a></li><li><a href=https://github.com/getvictor target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/lyuboslavsky/ target=_blank title=LinkedIn rel=me><svg width="16" height="16" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526.0 1.175.0h13.65C15.474.0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487.0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401m-1.2-8.212c.837.0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822.0-1.359.54-1.359 1.248.0.694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869.0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274.0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54.0 01.016-.025V6.169h-2.4c.03.678.0 7.225.0 7.225h2.4"/></svg></a></li><li><a href=http://www.youtube.com/@VictorOnSoftware target=_blank title=YouTube rel=me><svg height="800" width="800" id="Layer_1" viewBox="0 0 461.001 461.001"><g><path style="fill:#f61c0d" d="M365.257 67.393H95.744C42.866 67.393.0 110.259.0 163.137v134.728c0 52.878 42.866 95.744 95.744 95.744h269.513c52.878.0 95.744-42.866 95.744-95.744V163.137c0-52.878-42.866-95.744-95.744-95.744zM300.506 237.056l-126.06 60.123c-3.359 1.602-7.239-.847-7.239-4.568V168.607c0-3.774 3.982-6.22 7.348-4.514l126.06 63.881C304.363 229.873 304.298 235.248 300.506 237.056z"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/page/tools/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Software tools</span></a></li><li><a href=/page/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/page/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/posts/create-chrome-extension/><img src=/posts/create-chrome-extension/chrome-extension-headline_hu_9b398a2b34a3ece4.png srcset="/posts/create-chrome-extension/chrome-extension-headline_hu_9b398a2b34a3ece4.png 800w, /posts/create-chrome-extension/chrome-extension-headline_hu_fc7b8f27dae2a407.png 1600w" width=800 height=419 loading=lazy alt="Featured image of post Create a Chrome extension from scratch step-by-step (2024)"></a></div><div class=article-details><header class=article-category><a href=/categories/software-development/>Software Development</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/create-chrome-extension/>Create a Chrome extension from scratch step-by-step (2024)</a></h2><h3 class=article-subtitle>Build a basic Chrome extension without any additional tooling</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>May 15, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>8 minute read</time></div></footer></div></header><section class=article-content><p>In this series, we will be building a production-ready Chrome extension. We will start with a basic extension and then
add more features.</p><h2 id=what-is-a-chrome-extension><a href=#what-is-a-chrome-extension class=header-anchor></a>What is a Chrome extension?</h2><p>A Chrome extension is a small software program that customizes the browsing experience. It can modify and enhance the
functionality of the Chrome browser. Extensions are written using web technologies such as HTML, CSS, and JavaScript.</p><h2 id=why-build-a-chrome-extension><a href=#why-build-a-chrome-extension class=header-anchor></a>Why build a Chrome extension?</h2><p>Users can utilize Chrome extensions to:</p><ul><li>Modify web pages</li><li>Automate tasks</li><li>Integrate with third-party services</li><li>Add new features to the browser</li><li>And much more</li></ul><h2 id=prerequisites><a href=#prerequisites class=header-anchor></a>Prerequisites</h2><p>For this tutorial, no additional tools are required. We will create the extension using a text editor and the Chrome
browser.</p><h2 id=parts-of-chrome-extension><a href=#parts-of-chrome-extension class=header-anchor></a>Three parts of a Chrome extension</h2><p>The three main parts of a Chrome extension are the background script, content script(s), and popup. All these parts are
optional.</p><figure><img src=/posts/create-chrome-extension/chrome-extension-parts.svg alt="Parts of a Chrome extension"><figcaption><h4>Parts of a Chrome extension</h4></figcaption></figure><ol><li><a class=link href=#create-background-script>background script</a>: Also known as a <strong>service worker</strong>, this is a long-running script
that runs in the background. It can listen for events and perform tasks.</li><li><a class=link href=#create-content-script>content script(s)</a>: This script runs in the context of a web page. It can interact with the
DOM and modify the page, including adding UI elements. The extension can statically inject this script or dynamically
inject it by the background script or the popup.</li><li><a class=link href=#create-popup>popup</a>: This small HTML page appears when a user clicks the extension icon. It can contain buttons,
forms, and other UI elements. This is the extension&rsquo;s user interface.</li></ol><p>These three parts of the extension run independently but can communicate with each other using message passing, events,
and storage.</p><p>Our first extension will have a popup with a turn-on/off switch and an input field. The extension will blur the page
elements containing the text in the input field.</p><h2 id=manifestjson-configuration-file><a href=#manifestjson-configuration-file class=header-anchor></a><code>manifest.json</code> configuration file</h2><p>Create a <code>src</code> directory for the extension. This directory will contain all the extension files.</p><p>The <code>manifest.json</code> file is the configuration file of a Chrome extension. It contains metadata about the extension, such
as its name, version, permissions, and scripts.</p><h2 id=create-popup><a href=#create-popup class=header-anchor></a>Creating the popup</h2><p>Add a <code>manifest.json</code> file with the following content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;manifest_version&#34;</span>: <span style=color:#ae81ff>3</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;My Chrome Extension&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;0.1.0&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;My first Chrome extension.&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;action&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;default_popup&#34;</span>: <span style=color:#e6db74>&#34;popup.html&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;permissions&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;storage&#34;</span>
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The <code>permissions</code> specify the permissions required by the extension. In this case, we need the <code>storage</code> permission to
store data in the Chrome storage so that the extension can remember the state of its configuration.</p><p>Create <code>popup.html</code> with the content below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>title</span>&gt;My popup&lt;/<span style=color:#f92672>title</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>link</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;stylesheet&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/css&#34;</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;popup.css&#34;</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;switch&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;enabled&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;checkbox&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;slider round&#34;</span>&gt;&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;secret&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;popup.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></div><p>Our <code>popup.html</code> includes a CSS file and a script. Create <code>popup.js</code> with the following content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#e6db74>&#34;use strict&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Hello, world from popup!&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setBadgeText</span>(<span style=color:#a6e22e>enabled</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>text</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>enabled</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;ON&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;OFF&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>setBadgeText</span>({<span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>text</span>})
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Handle the ON/OFF switch
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>checkbox</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#34;enabled&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;enabled&#34;</span>, (<span style=color:#a6e22e>data</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>checkbox</span>.<span style=color:#a6e22e>checked</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!!</span><span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>enabled</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setBadgeText</span>(<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>enabled</span>)
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#a6e22e>checkbox</span>.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;change&#34;</span>, (<span style=color:#a6e22e>event</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>HTMLInputElement</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#a6e22e>set</span>({<span style=color:#e6db74>&#34;enabled&#34;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>checked</span>})
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setBadgeText</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>checked</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Handle the input field
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>input</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#34;item&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;item&#34;</span>, (<span style=color:#a6e22e>data</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>item</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span><span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;change&#34;</span>, (<span style=color:#a6e22e>event</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>HTMLInputElement</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#a6e22e>set</span>({<span style=color:#e6db74>&#34;item&#34;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>})
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>The script listens for changes in the switch and the input field. It saves the switch&rsquo;s state and the input field&rsquo;s
value in Chrome storage.</p><p>Create <code>popup.css</code> with the following content to style the switch and the input field:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/* The switch - the box around the slider */</span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>switch</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin-left</span>: <span style=color:#ae81ff>30</span><span style=color:#66d9ef>%</span>; <span style=color:#75715e>/* Center the switch */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>position</span>: <span style=color:#66d9ef>relative</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>display</span>: <span style=color:#66d9ef>inline-block</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>60</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>34</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* Hide default HTML checkbox */</span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>switch</span> <span style=color:#f92672>input</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>opacity</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* The slider */</span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>slider</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>position</span>: <span style=color:#66d9ef>absolute</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>cursor</span>: <span style=color:#66d9ef>pointer</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>top</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>left</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>right</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>bottom</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>background-color</span>: <span style=color:#ae81ff>#ccc</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>slider</span>::<span style=color:#a6e22e>before</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>position</span>: <span style=color:#66d9ef>absolute</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>content</span>: <span style=color:#e6db74>&#34;&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>26</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>26</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>left</span>: <span style=color:#ae81ff>4</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>bottom</span>: <span style=color:#ae81ff>4</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>background-color</span>: <span style=color:#66d9ef>white</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>input</span>:<span style=color:#a6e22e>checked</span> <span style=color:#f92672>+</span> .<span style=color:#a6e22e>slider</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>background-color</span>: <span style=color:#ae81ff>#2196F3</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>input</span>:<span style=color:#a6e22e>checked</span> <span style=color:#f92672>+</span> .<span style=color:#a6e22e>slider</span>:<span style=color:#a6e22e>before</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>transform</span>: translateX(<span style=color:#ae81ff>26</span><span style=color:#66d9ef>px</span>); <span style=color:#75715e>/* Move the slider to the right when checked */</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* Rounded sliders */</span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>slider</span>.<span style=color:#a6e22e>round</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>border-radius</span>: <span style=color:#ae81ff>34</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>slider</span>.<span style=color:#a6e22e>round</span>::<span style=color:#a6e22e>before</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>border-radius</span>: <span style=color:#ae81ff>50</span><span style=color:#66d9ef>%</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>secret</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>5</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=loading-and-testing-the-extension-in-chrome><a href=#loading-and-testing-the-extension-in-chrome class=header-anchor></a>Loading and testing the extension in Chrome</h2><p>Even though we have not added the background script and content script, we can load the extension in Chrome.</p><ol><li>Open the Chrome browser.</li><li>Go to <code>chrome://extensions/</code>.</li><li>Enable the <strong>Developer mode</strong>.</li><li>Click on <strong>Load unpacked</strong>.</li><li>Select the <code>src</code> directory containing the extension files.</li><li>Click <strong>Select Folder</strong>.</li><li>The extension will be loaded.</li><li>Pin the extension to the toolbar by clicking the pin button in the extension dropdown. This pin will make it easier
to test the extension.</li><li>The popup page will appear when you click the <code>M</code> extension icon.</li></ol><figure><img src=/posts/create-chrome-extension/chrome-extension-popup.png alt="Chrome extension popup"><figcaption><h4>Chrome extension popup</h4></figcaption></figure><p>We can now do some basic testing:</p><ol><li>Test the switch and the input field. The state of the switch and the value of the input field should be saved in the
Chrome storage. The values should persist even after restarting the browser.</li><li>The badge text of the extension icon should change to &ldquo;ON&rdquo; or &ldquo;OFF&rdquo; based on the state of the switch.</li><li>To inspect the extension, right-click the extension icon and select <strong>Inspect popup</strong>. You should see a &ldquo;Hello,
world&rdquo; message in the <strong>Console</strong> tab.</li></ol><h2 id=create-content-script><a href=#create-content-script class=header-anchor></a>Creating the content script</h2><p>Update the <code>manifest.json</code> file to include the <code>content_scripts</code> section. The entire file should look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;manifest_version&#34;</span>: <span style=color:#ae81ff>3</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;My Chrome Extension&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;0.1.0&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;My first Chrome extension.&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;action&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;default_popup&#34;</span>: <span style=color:#e6db74>&#34;popup.html&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;permissions&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;storage&#34;</span>
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;content_scripts&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;matches&#34;</span>: [<span style=color:#e6db74>&#34;&lt;all_urls&gt;&#34;</span>],
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;js&#34;</span>: [<span style=color:#e6db74>&#34;content.js&#34;</span>]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Create the new file <code>content.js</code> with the following content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#e6db74>&#34;use strict&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>blurFilter</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;blur(6px)&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>textToBlur</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Search this DOM node for text to blur and blur the parent element if found.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>processNode</span>(<span style=color:#a6e22e>node</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>childNodes</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        Array.<span style=color:#a6e22e>from</span>(<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>childNodes</span>).<span style=color:#a6e22e>forEach</span>(<span style=color:#a6e22e>processNode</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>nodeType</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Node</span>.<span style=color:#a6e22e>TEXT_NODE</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>textContent</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>textContent</span>.<span style=color:#a6e22e>trim</span>().<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>parent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>parentElement</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>parent</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>            (<span style=color:#a6e22e>parent</span>.<span style=color:#a6e22e>tagName</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;SCRIPT&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>parent</span>.<span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>filter</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>blurFilter</span>)) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Already blurred
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>textContent</span>.<span style=color:#a6e22e>includes</span>(<span style=color:#a6e22e>textToBlur</span>)) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>blurElement</span>(<span style=color:#a6e22e>parent</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>blurElement</span>(<span style=color:#a6e22e>elem</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>elem</span>.<span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>filter</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>blurFilter</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>debug</span>(<span style=color:#e6db74>&#34;blurred id:&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>elem</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; class:&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>elem</span>.<span style=color:#a6e22e>className</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34; tag:&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>elem</span>.<span style=color:#a6e22e>tagName</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; text:&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>elem</span>.<span style=color:#a6e22e>textContent</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Create a MutationObserver to watch for changes to the DOM.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>observer</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MutationObserver</span>((<span style=color:#a6e22e>mutations</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mutations</span>.<span style=color:#a6e22e>forEach</span>((<span style=color:#a6e22e>mutation</span>) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mutation</span>.<span style=color:#a6e22e>addedNodes</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>mutation</span>.<span style=color:#a6e22e>addedNodes</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#a6e22e>processNode</span>)
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>processNode</span>(<span style=color:#a6e22e>mutation</span>.<span style=color:#a6e22e>target</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Enable the content script by default.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>enabled</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>keys</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;enabled&#34;</span>, <span style=color:#e6db74>&#34;item&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>keys</span>, (<span style=color:#a6e22e>data</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>enabled</span> <span style=color:#f92672>===</span> <span style=color:#66d9ef>false</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>enabled</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>item</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>textToBlur</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>item</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Only start observing the DOM if the extension is enabled and there is text to blur.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>enabled</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>textToBlur</span>.<span style=color:#a6e22e>trim</span>().<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>observer</span>.<span style=color:#a6e22e>observe</span>(document, {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>attributes</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>characterData</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>childList</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>subtree</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Loop through all elements on the page for initial processing.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>processNode</span>(document)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>The script listens for changes in the DOM and blurs elements that contain the text specified in the input field of the
popup.</p><p>At this point, we can test the extension by entering text in the input field and enabling it. After reloading the page,
the extension should blur elements that contain the text.</p><h2 id=create-background-script><a href=#create-background-script class=header-anchor></a>Creating the background script</h2><p>Our background script will update the badge text of the extension icon on startup.</p><p>Update the <code>manifest.json</code> file to include the <code>background</code> section. The complete file should look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;manifest_version&#34;</span>: <span style=color:#ae81ff>3</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;My Chrome Extension&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;0.1.0&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;My first Chrome extension.&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;action&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;default_popup&#34;</span>: <span style=color:#e6db74>&#34;popup.html&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;permissions&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;storage&#34;</span>
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;content_scripts&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;matches&#34;</span>: [<span style=color:#e6db74>&#34;&lt;all_urls&gt;&#34;</span>],
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;js&#34;</span>: [<span style=color:#e6db74>&#34;content.js&#34;</span>]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;background&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;service_worker&#34;</span>: <span style=color:#e6db74>&#34;background.js&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Create a new file <code>background.js</code> with the following content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#e6db74>&#34;use strict&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setBadgeText</span>(<span style=color:#a6e22e>enabled</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>text</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>enabled</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;ON&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;OFF&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>setBadgeText</span>({<span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>text</span>})
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>startUp</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>storage</span>.<span style=color:#a6e22e>sync</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;enabled&#34;</span>, (<span style=color:#a6e22e>data</span>) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>setBadgeText</span>(<span style=color:#f92672>!!</span><span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>enabled</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Ensure the background script always runs.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>runtime</span>.<span style=color:#a6e22e>onStartup</span>.<span style=color:#a6e22e>addListener</span>(<span style=color:#a6e22e>startUp</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>chrome</span>.<span style=color:#a6e22e>runtime</span>.<span style=color:#a6e22e>onInstalled</span>.<span style=color:#a6e22e>addListener</span>(<span style=color:#a6e22e>startUp</span>)
</span></span></code></pre></div><p>The script listens for the startup and installation events and sets the badge text based on the extension&rsquo;s saved state.</p><p>At this point, our basic extension is complete. We can test the extension.</p><h2 id=next-steps><a href=#next-steps class=header-anchor></a>Next steps</h2><p>In the next part of this series, we will
<a class=link href=../add-webpack-and-typescript-to-chrome-extension>add development tooling to the Chrome extension, such as TypeScript support, a bundling tool called webpack, and a development mode that will reload the extension automatically when changes are made</a>.</p><p>For a list of all articles in the series, see the
<a class=link href=../chrome-extension>production-ready Chrome extension series overview</a>.</p><h2 id=other-getting-started-guides><a href=#other-getting-started-guides class=header-anchor></a>Other getting started guides</h2><ul><li>Recently, we wrote about
<a class=link href=../react-hello-world>creating a React application from scratch while minimizing the amount of tools used</a>.</li><li>We also have a guide on <a class=link href=../using-c-and-go-with-cgo-is-tricky>getting started with CGO in Go</a>.</li></ul><h2 id=basic-extension-code-on-github><a href=#basic-extension-code-on-github class=header-anchor></a>Basic extension code on GitHub</h2><p>The complete code is available on GitHub at:
<a class=link href=https://github.com/getvictor/create-chrome-extension/tree/main/1-basic-extension target=_blank rel=noopener>https://github.com/getvictor/create-chrome-extension/tree/main/1-basic-extension</a></p><h2 id=create-a-chrome-extension-from-scratch-step-by-step-video><a href=#create-a-chrome-extension-from-scratch-step-by-step-video class=header-anchor></a>Create a Chrome extension from scratch step-by-step video</h2><div class=video-wrapper><iframe loading=lazy src=https://www.youtube.com/embed/2dQJYDAAU4I allowfullscreen title="YouTube Video"></iframe></div><p><em>Note:</em> If you want to comment on this article, please do so on the YouTube video.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/chrome-extension/>Chrome Extension</a>
<a href=/tags/javascript/>JavaScript</a>
<a href=/tags/web-development/>Web Development</a>
<a href=/tags/hello-world/>Hello World</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/posts/react-hello-world/><div class=article-image><img src=/posts/react-hello-world/react-hello-world.114df3ffe4eaca64d6317811b540bfb6_hu_678e4771a67d7880.png width=250 height=150 loading=lazy alt="Featured image of post Build a React app from scratch: getting started (2024)" data-hash="md5-EU3z/+TqymTWMXgRtUC/tg=="></div><div class=article-details><h2 class=article-title>Build a React app from scratch: getting started (2024)</h2></div></a></article><article class=has-image><a href=/posts/create-ipv6-only-linux-server/><div class=article-image><img src=/posts/create-ipv6-only-linux-server/ipv6-only.9ab4cc1c638e6b15da2ab2ff26b64103_hu_a323863b1e1aadfd.png width=250 height=150 loading=lazy alt="Featured image of post Create an IPv6-only Linux server in 3 easy steps" data-hash="md5-mrTMHGOOaxXaKrL/JrZBAw=="></div><div class=article-details><h2 class=article-title>Create an IPv6-only Linux server in 3 easy steps</h2></div></a></article><article class=has-image><a href=/posts/mtls-hello-world/><div class=article-image><img src=/posts/mtls-hello-world/mtls-handshake.3ef0a7e0079622040ec097fae24fb360_hu_55f8e4de13d4e82f.png width=250 height=150 loading=lazy alt="Featured image of post Mutual TLS intro and hands-on example" data-hash="md5-PvCn4AeWIgQOwJf64k+zYA=="></div><div class=article-details><h2 class=article-title>Mutual TLS intro and hands-on example</h2></div></a></article><article class=has-image><a href=/posts/using-c-and-go-with-cgo-is-tricky/><div class=article-image><img src=/posts/using-c-and-go-with-cgo-is-tricky/cgo-hello-world-fail.4dc7756d44340dd2d770d58e7e6e1628_hu_a2c12c8f3e9cc8ff.png width=250 height=150 loading=lazy alt="Featured image of post Using C and Go with CGO is tricky" data-hash="md5-Tcd1bUQ0DdLXcNWOfm4WKA=="></div><div class=article-details><h2 class=article-title>Using C and Go with CGO is tricky</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2025 Victor on Software</section><section class=powerby></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>