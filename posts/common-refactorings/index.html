<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Overcoming the fear of refactoring: How small, smart changes improve code without risk"><title>Top code refactorings every software engineer should know</title><link rel=canonical href=https://victoronsoftware.com/posts/common-refactorings/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="Top code refactorings every software engineer should know"><meta property='og:description' content="Overcoming the fear of refactoring: How small, smart changes improve code without risk"><meta property='og:url' content='https://victoronsoftware.com/posts/common-refactorings/'><meta property='og:site_name' content='Victor on Software'><meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:tag' content='Golang'><meta property='article:tag' content='Technical Debt'><meta property='article:published_time' content='2025-02-12T00:00:00+00:00'><meta property='article:modified_time' content='2025-02-12T00:00:00+00:00'><meta property='og:image' content='https://victoronsoftware.com/posts/common-refactorings/common-refactorings-headline.png'><meta property='article:author' content='Victor Lyuboslavsky'><meta name=twitter:title content="Top code refactorings every software engineer should know"><meta name=twitter:description content="Overcoming the fear of refactoring: How small, smart changes improve code without risk"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://victoronsoftware.com/posts/common-refactorings/common-refactorings-headline.png'><script async src="https://www.googletagmanager.com/gtag/js?id=G-1XV381YSQ8"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1XV381YSQ8")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_2a985bbd48e632da.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Victor on Software</a></h1><h2 class=site-description>Software engineering, security, and related topics</h2></div></header><ol class=menu-social><li><a href=https://fleetdm.com target=_blank title=Fleet rel=me><svg width="58.219mm" height="58.202mm" viewBox="0 0 58.219 58.202"><g stroke-width=".26458"><path d="m7.5963 14.823c3.954.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2053 7.1594 7.1594 7.1594z" fill="#63c740"/><path d="m29.075 14.823c3.9539.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.9541.0-7.1595 3.2053-7.1595 7.1594.0 3.954 3.2054 7.1594 7.1595 7.1594z" fill="#5cabdf"/><path d="m50.552 14.823c3.9542.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2052-7.1594-7.1594-7.1594-3.9539.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2054 7.1594 7.1594 7.1594z" fill="#d66c7b"/><path d="m7.5963 36.301c3.954.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.954.0-7.1594 3.2054-7.1594 7.1595.0 3.9539 3.2053 7.1594 7.1594 7.1594z" fill="#c98def"/><path d="m29.075 36.301c3.9539.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.9541.0-7.1595 3.2054-7.1595 7.1595.0 3.9539 3.2054 7.1594 7.1595 7.1594z" fill="#faa669"/><path d="m7.5963 57.779c3.954.0 7.1594-3.2052 7.1594-7.1594.0-3.9539-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2054-7.1594 7.1594.0 3.9542 3.2053 7.1594 7.1594 7.1594z" fill="#3aefc4"/></g></svg></a></li><li><a href=https://github.com/getvictor target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/lyuboslavsky/ target=_blank title=LinkedIn rel=me><svg width="16" height="16" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526.0 1.175.0h13.65C15.474.0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487.0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401m-1.2-8.212c.837.0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822.0-1.359.54-1.359 1.248.0.694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869.0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274.0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54.0 01.016-.025V6.169h-2.4c.03.678.0 7.225.0 7.225h2.4"/></svg></a></li><li><a href=http://www.youtube.com/@VictorOnSoftware target=_blank title=YouTube rel=me><svg height="800" width="800" id="Layer_1" viewBox="0 0 461.001 461.001"><g><path style="fill:#f61c0d" d="M365.257 67.393H95.744C42.866 67.393.0 110.259.0 163.137v134.728c0 52.878 42.866 95.744 95.744 95.744h269.513c52.878.0 95.744-42.866 95.744-95.744V163.137c0-52.878-42.866-95.744-95.744-95.744zM300.506 237.056l-126.06 60.123c-3.359 1.602-7.239-.847-7.239-4.568V168.607c0-3.774 3.982-6.22 7.348-4.514l126.06 63.881C304.363 229.873 304.298 235.248 300.506 237.056z"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/page/speaking/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 2m0 3a3 3 0 013-3h0a3 3 0 013 3v5a3 3 0 01-3 3h0a3 3 0 01-3-3z"/><path d="M5 10a7 7 0 0014 0"/><path d="M8 21h8"/><path d="M12 17v4"/></svg>
<span>Speaking</span></a></li><li><a href=/page/tools/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Software tools</span></a></li><li><a href=/page/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/page/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/posts/common-refactorings/><img src=/posts/common-refactorings/common-refactorings-headline_hu_123ae525574b682c.png srcset="/posts/common-refactorings/common-refactorings-headline_hu_123ae525574b682c.png 800w, /posts/common-refactorings/common-refactorings-headline_hu_a45db00afff6cc97.png 1600w" width=800 height=419 loading=lazy alt="Featured image of post Top code refactorings every software engineer should know"></a></div><div class=article-details><header class=article-category><a href=/categories/software-development/>Software Development</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/common-refactorings/>Top code refactorings every software engineer should know</a></h2><h3 class=article-subtitle>Overcoming the fear of refactoring: How small, smart changes improve code without risk</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Feb 12, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>6 minute read</time></div></footer></div></header><section class=article-content><ul><li><a class=link href=#extract-method-aka-extract-function>Extract method (aka extract function)</a></li><li><a class=link href=#inline-variable>Inline variable</a></li><li><a class=link href=#extract-variable>Extract variable</a></li><li><a class=link href=#inline-method-aka-inline-function>Inline method (aka inline function)</a></li></ul><h2 id=what-is-code-refactoring><a href=#what-is-code-refactoring class=header-anchor></a>What is code refactoring?</h2><p>Code refactoring involves modifying existing software code without changing its observable behavior. Refactoring improves the code base&rsquo;s readability and maintainability. See our previous article on <a class=link href=../readable-code/>why readable code is important</a>.</p><h2 id=why-are-engineers-afraid-of-refactoring><a href=#why-are-engineers-afraid-of-refactoring class=header-anchor></a>Why are engineers afraid of refactoring?</h2><p>Refactoring is essential to software development and should be done regularly as part of day-to-day work. Unfortunately, many engineers are afraid of refactoring, don&rsquo;t know how to do it, or don&rsquo;t consider it part of their job responsibilities.</p><p>Some engineers fear that refactoring will introduce bugs or break existing functionality. The root cause of this fear is the lack of automated tests. Without automated tests, ensuring that the refactored code behaves as expected is difficult. A code base without automated tests is a ticking time bomb and cannot be maintained by any sane engineer. Before refactoring code in such a code base, you should add automated tests for the targeted code.</p><p>Other engineers fear that refactoring will take too much time. This fear is often unfounded, as refactoring can be done incrementally and in small steps. For example, after refactoring the code for an hour or less, merge your changes to your main branch and, if needed, continue doing the next small refactoring steps. Your organization should never allocate weeks of development for &ldquo;large refactorings.&rdquo;</p><p>Engineers may also fear refactoring because they don&rsquo;t want to make too many changes to the code, making it difficult for reviewers to review the changes. The issue is that many current code review systems don&rsquo;t understand the code changes&rsquo; semantics (i.e., the meaning). These systems only understand line changes and are frequently confused by relocated code. In this case, the coder should explain the changes to the reviewer. Alternatively, the organization can adopt a better code review tool. For a further discussion of <a class=link href=../github-code-review-issues/>issues with GitHub code reviews, see our previous article</a>.</p><p>This article will show some common refactorings you can safely do with automation from your IDE (Integrated Development Environment).</p><h2 id=extract-method-aka-extract-function><a href=#extract-method-aka-extract-function class=header-anchor></a>Extract method (aka extract function)</h2><p>The <code>extract method</code> refactoring takes a piece of code and moves it into a new method. There are several reasons to do this, all of which improve the readability and maintainability of the code:</p><ul><li>The code is too long and must be broken into smaller, more manageable pieces.</li><li>The code is duplicated in multiple places and needs to be consolidated into a single method.</li><li>We want to separate the code implementation from the code intention. The code implementation is what the code does, and the code intention is why it does it. Move the code implementation into its own method and name the new method based on the code intention.</li></ul><p>For example, consider the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>pt</span> <span style=color:#a6e22e>PackageTest</span>) <span style=color:#a6e22e>expandPackages</span>(<span style=color:#a6e22e>pkgs</span> []<span style=color:#66d9ef>string</span>) []<span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>slices</span>.<span style=color:#a6e22e>ContainsFunc</span>(<span style=color:#a6e22e>pkgs</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>p</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Contains</span>(<span style=color:#a6e22e>p</span>, <span style=color:#e6db74>&#34;...&#34;</span>)
</span></span><span style=display:flex><span>    }) {
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>pkgs</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// lots more code ...</span>
</span></span></code></pre></div><p>When entering the <code>expandPackages</code> method, the reader is immediately confronted with a complex expression. They must stop and think about what the code does. Even though the amount of code is small, it still hampers readability. The code implementation is mixed with the code intention. One way to improve the situation is to add a comment. A better way is to extract the code into its own method and name the new method based on the code intention.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>pt</span> <span style=color:#a6e22e>PackageTest</span>) <span style=color:#a6e22e>expandPackages</span>(<span style=color:#a6e22e>pkgs</span> []<span style=color:#66d9ef>string</span>) []<span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>needExpansion</span>(<span style=color:#a6e22e>pkgs</span>) {
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>pkgs</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// lots more code ...</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>needExpansion</span>(<span style=color:#a6e22e>packages</span> []<span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>slices</span>.<span style=color:#a6e22e>ContainsFunc</span>(<span style=color:#a6e22e>packages</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>p</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Contains</span>(<span style=color:#a6e22e>p</span>, <span style=color:#e6db74>&#34;...&#34;</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Most IDEs automatically perform this refactoring. Highlight the code you want to extract, open the refactoring menu, and select the <code>Extract Method</code> option.</p><h2 id=inline-variable><a href=#inline-variable class=header-anchor></a>Inline variable</h2><p>Every variable should have a purpose and a good explanatory name that describes its intent. As the number of variables grows in a method, it becomes increasingly difficult to understand the code. One way to improve the readability of the code is to inline variables. Inlining a variable is replacing the variable with the right-hand side of the assignment.</p><p>For example, consider the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>pd</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>packageDependency</span>) <span style=color:#a6e22e>chain</span>() (<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>name</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>pd</span>.<span style=color:#a6e22e>name</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>pd</span>.<span style=color:#a6e22e>parent</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>name</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;\n&#34;</span>, <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// lots more code ...</span>
</span></span></code></pre></div><p>The variable <code>name</code> does not add any value to the code. It is simply a copy of the <code>pd.name</code> field. We can inline the variable to improve the readability of the code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>pd</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>packageDependency</span>) <span style=color:#a6e22e>chain</span>() (<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>pd</span>.<span style=color:#a6e22e>parent</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>pd</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;\n&#34;</span>, <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// lots more code ...</span>
</span></span></code></pre></div><p>Many IDEs automatically perform this refactoring. Highlight the variable you want to inline, open the refactoring menu, and select the <code>Inline</code> option.</p><h2 id=extract-variable><a href=#extract-variable class=header-anchor></a>Extract variable</h2><p>The <code>extract variable</code> refactoring takes a complex expression and moves it into a new variable. Mechanically, it is the opposite of the above <code>inline variable</code> refactoring. There are several reasons to do this:</p><ul><li>The expression is complex and must be broken into smaller, more manageable pieces.</li><li>The meaning of the expression is unclear and needs to be clarified with a descriptive variable name.</li></ul><p>Sometimes, you have a choice between extracting a method or a variable. In general, you should extract a method to make the code more readable. However, if the method is only used once and the parent function is not complex, it may be better to extract a variable.</p><p>For example, consider the same code from our <code>extract method</code> example above:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>pt</span> <span style=color:#a6e22e>PackageTest</span>) <span style=color:#a6e22e>expandPackages</span>(<span style=color:#a6e22e>pkgs</span> []<span style=color:#66d9ef>string</span>) []<span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>slices</span>.<span style=color:#a6e22e>ContainsFunc</span>(<span style=color:#a6e22e>pkgs</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>p</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Contains</span>(<span style=color:#a6e22e>p</span>, <span style=color:#e6db74>&#34;...&#34;</span>)
</span></span><span style=display:flex><span>    }) {
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>pkgs</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// lots more code ...</span>
</span></span></code></pre></div><p>We can extract the complex expression into a variable to improve the readability of the code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>pt</span> <span style=color:#a6e22e>PackageTest</span>) <span style=color:#a6e22e>expandPackages</span>(<span style=color:#a6e22e>pkgs</span> []<span style=color:#66d9ef>string</span>) []<span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>needExpansion</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>slices</span>.<span style=color:#a6e22e>ContainsFunc</span>(<span style=color:#a6e22e>pkgs</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>p</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Contains</span>(<span style=color:#a6e22e>p</span>, <span style=color:#e6db74>&#34;...&#34;</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>needExpansion</span> {
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>pkgs</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// lots more code ...</span>
</span></span></code></pre></div><p>Many IDEs automatically perform this refactoring. Highlight the expression you want to extract, open the refactoring menu, and select the <code>Extract Variable</code> or <code>Introduce Variable</code> option.</p><h2 id=inline-method-aka-inline-function><a href=#inline-method-aka-inline-function class=header-anchor></a>Inline method (aka inline function)</h2><p>The <code>inline method</code> refactoring takes a method and moves its code into the caller. Mechanically, it is the opposite of the <code>extract method</code> refactoring. There are several reasons to do this:</p><ul><li>The method is too simple, and its body is as clear as its name.</li><li>We want to simplify code and remove a level of indirection.</li><li>We must regroup code into a single method before proceeding with a better refactoring.</li></ul><p>For example, consider the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>    <span style=color:#75715e>// method code ...</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>dep</span>.<span style=color:#a6e22e>has</span>(<span style=color:#a6e22e>expandedPackages</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// more coe ...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>pd</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>packageDependency</span>) <span style=color:#a6e22e>has</span>(<span style=color:#a6e22e>pkgs</span> []<span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>slices</span>.<span style=color:#a6e22e>Contains</span>(<span style=color:#a6e22e>pkgs</span>, <span style=color:#a6e22e>pd</span>.<span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We can inline the <code>has</code> method:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>    <span style=color:#75715e>// method code ...</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>slices</span>.<span style=color:#a6e22e>Contains</span>(<span style=color:#a6e22e>expandedPackages</span>, <span style=color:#a6e22e>pd</span>.<span style=color:#a6e22e>name</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// more coe ...</span>
</span></span></code></pre></div><p>Many IDEs automatically perform this refactoring. Highlight the method call you want to inline, open the refactoring menu, and select the <code>Inline Function/Method</code> option.</p><h2 id=further-reading><a href=#further-reading class=header-anchor></a>Further reading</h2><ul><li>The code examples above are from our article on <a class=link href=../go-package-dependencies/>finding package dependencies of a Go package</a>.</li><li>We also discussed <a class=link href=../scaling-codebase-evolutionary-architecture/>how to scale your codebase with evolutionary architecture</a>.</li><li>And <a class=link href=../analyze-go-build/>how to analyze Go build times</a>.</li></ul><h2 id=watch-examples-of-top-code-refactorings><a href=#watch-examples-of-top-code-refactorings class=header-anchor></a>Watch examples of top code refactorings</h2><div class=video-wrapper><iframe loading=lazy src=https://www.youtube.com/embed/Mzj9XQlieHk allowfullscreen title="YouTube Video"></iframe></div><p><em>Note:</em> If you want to comment on this article, please do so on the YouTube video.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/golang/>Golang</a>
<a href=/tags/technical-debt/>Technical Debt</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/posts/go-package-dependencies/><div class=article-image><img src=/posts/go-package-dependencies/go-dependencies-headline.5b98aa5d1633408c72b8ea3bc653a503_hu_82dd2ce51c2a66d1.png width=250 height=150 loading=lazy alt="Featured image of post How to find package dependencies of a Go package" data-hash="md5-W5iqXRYzQIxyuOo7xlOlAw=="></div><div class=article-details><h2 class=article-title>How to find package dependencies of a Go package</h2></div></a></article><article class=has-image><a href=/posts/scaling-codebase-evolutionary-architecture/><div class=article-image><img src=/posts/scaling-codebase-evolutionary-architecture/evolutionary-architecture-headline.0294abfc9580dc6be68388bfd3992dbf_hu_fc2d7ee9d10a2b6f.png width=250 height=150 loading=lazy alt="Featured image of post How to scale your codebase with evolutionary architecture" data-hash="md5-ApSr/JWA3Gvmg4i/05ktvw=="></div><div class=article-details><h2 class=article-title>How to scale your codebase with evolutionary architecture</h2></div></a></article><article class=has-image><a href=/posts/readable-code/><div class=article-image><img src=/posts/readable-code/readable-code-headline.bc9bdbf58833c0b12da94a4813ce4846_hu_51fe9e4def42a735.png width=250 height=150 loading=lazy alt="Featured image of post What is readable code and why is it important?" data-hash="md5-vJvb9YgzwLEtqUpIE85IRg=="></div><div class=article-details><h2 class=article-title>What is readable code and why is it important?</h2></div></a></article><article class=has-image><a href=/posts/cloudfront-signed-urls/><div class=article-image><img src=/posts/cloudfront-signed-urls/signed-url-headline.36df38c0732cb22179bb8a37362786ed_hu_f77b8f10abc7a62e.png width=250 height=150 loading=lazy alt="Featured image of post Secure private CDN content with CloudFront signed URLs" data-hash="md5-Nt84wHMssiF5u4o3NieG7Q=="></div><div class=article-details><h2 class=article-title>Secure private CDN content with CloudFront signed URLs</h2></div></a></article><article class=has-image><a href=/posts/method-overriding-in-go/><div class=article-image><img src=/posts/method-overriding-in-go/method-overriding-headline.897e2453fe069a0953d42c6e566f710d_hu_2bc764077d3ace55.png width=250 height=150 loading=lazy alt="Featured image of post How to override methods in Go" data-hash="md5-iX4kU/4GmglT1CxuVm9xDQ=="></div><div class=article-details><h2 class=article-title>How to override methods in Go</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2025 Victor on Software</section><section class=powerby></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>