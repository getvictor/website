<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Improve code quality and maintainability with linting and formatting tools"><title>Linting and formatting TypeScript in Chrome extension (2024)</title><link rel=canonical href=https://victoronsoftware.com/posts/linting-and-formatting-typescript/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="Linting and formatting TypeScript in Chrome extension (2024)"><meta property='og:description' content="Improve code quality and maintainability with linting and formatting tools"><meta property='og:url' content='https://victoronsoftware.com/posts/linting-and-formatting-typescript/'><meta property='og:site_name' content='Victor on Software'><meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:tag' content='Chrome Extension'><meta property='article:tag' content='TypeScript'><meta property='article:tag' content='DevTools'><meta property='article:tag' content='Linting'><meta property='article:published_time' content='2024-06-19T00:00:00+00:00'><meta property='article:modified_time' content='2024-06-19T00:00:00+00:00'><meta property='og:image' content='https://victoronsoftware.com/posts/linting-and-formatting-typescript/linting-and-formatting-headline.png'><meta property='article:author' content='Victor Lyuboslavsky'><meta name=twitter:title content="Linting and formatting TypeScript in Chrome extension (2024)"><meta name=twitter:description content="Improve code quality and maintainability with linting and formatting tools"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://victoronsoftware.com/posts/linting-and-formatting-typescript/linting-and-formatting-headline.png'><script async src="https://www.googletagmanager.com/gtag/js?id=G-1XV381YSQ8"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1XV381YSQ8")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_c8fdb37897842f49.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Victor on Software</a></h1><h2 class=site-description>Software engineering, security, and related topics</h2></div></header><ol class=menu-social><li><a href=https://fleetdm.com target=_blank title=Fleet rel=me><svg width="58.219mm" height="58.202mm" viewBox="0 0 58.219 58.202"><g stroke-width=".26458"><path d="m7.5963 14.823c3.954.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2053 7.1594 7.1594 7.1594z" fill="#63c740"/><path d="m29.075 14.823c3.9539.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.9541.0-7.1595 3.2053-7.1595 7.1594.0 3.954 3.2054 7.1594 7.1595 7.1594z" fill="#5cabdf"/><path d="m50.552 14.823c3.9542.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2052-7.1594-7.1594-7.1594-3.9539.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2054 7.1594 7.1594 7.1594z" fill="#d66c7b"/><path d="m7.5963 36.301c3.954.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.954.0-7.1594 3.2054-7.1594 7.1595.0 3.9539 3.2053 7.1594 7.1594 7.1594z" fill="#c98def"/><path d="m29.075 36.301c3.9539.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.9541.0-7.1595 3.2054-7.1595 7.1595.0 3.9539 3.2054 7.1594 7.1595 7.1594z" fill="#faa669"/><path d="m7.5963 57.779c3.954.0 7.1594-3.2052 7.1594-7.1594.0-3.9539-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2054-7.1594 7.1594.0 3.9542 3.2053 7.1594 7.1594 7.1594z" fill="#3aefc4"/></g></svg></a></li><li><a href=https://github.com/getvictor target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/lyuboslavsky/ target=_blank title=LinkedIn rel=me><svg width="16" height="16" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526.0 1.175.0h13.65C15.474.0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487.0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401m-1.2-8.212c.837.0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822.0-1.359.54-1.359 1.248.0.694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869.0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274.0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54.0 01.016-.025V6.169h-2.4c.03.678.0 7.225.0 7.225h2.4"/></svg></a></li><li><a href=http://www.youtube.com/@VictorOnSoftware target=_blank title=YouTube rel=me><svg height="800" width="800" id="Layer_1" viewBox="0 0 461.001 461.001"><g><path style="fill:#f61c0d" d="M365.257 67.393H95.744C42.866 67.393.0 110.259.0 163.137v134.728c0 52.878 42.866 95.744 95.744 95.744h269.513c52.878.0 95.744-42.866 95.744-95.744V163.137c0-52.878-42.866-95.744-95.744-95.744zM300.506 237.056l-126.06 60.123c-3.359 1.602-7.239-.847-7.239-4.568V168.607c0-3.774 3.982-6.22 7.348-4.514l126.06 63.881C304.363 229.873 304.298 235.248 300.506 237.056z"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/page/speaking/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 2m0 3a3 3 0 013-3h0a3 3 0 013 3v5a3 3 0 01-3 3h0a3 3 0 01-3-3z"/><path d="M5 10a7 7 0 0014 0"/><path d="M8 21h8"/><path d="M12 17v4"/></svg>
<span>Speaking</span></a></li><li><a href=/page/tools/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Software tools</span></a></li><li><a href=/page/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/page/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/posts/linting-and-formatting-typescript/><img src=/posts/linting-and-formatting-typescript/linting-and-formatting-headline_hu_ab03b9beeadec1a2.png srcset="/posts/linting-and-formatting-typescript/linting-and-formatting-headline_hu_ab03b9beeadec1a2.png 800w, /posts/linting-and-formatting-typescript/linting-and-formatting-headline_hu_e912356ce4c60d19.png 1600w" width=800 height=419 loading=lazy alt="Featured image of post Linting and formatting TypeScript in Chrome extension (2024)"></a></div><div class=article-details><header class=article-category><a href=/categories/software-development/>Software Development</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/linting-and-formatting-typescript/>Linting and formatting TypeScript in Chrome extension (2024)</a></h2><h3 class=article-subtitle>Improve code quality and maintainability with linting and formatting tools</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jun 19, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>8 minute read</time></div></footer></div></header><section class=article-content><ul><li><a class=link href=#setting-up-linting>Setting up linting with ESLint and typescript-eslint</a></li><li><a class=link href=#setting-up-formatting>Setting up formatting with Prettier</a></li><li><a class=link href=#adding-linting-and-formatting-to-ci>Adding linting and formatting to CI</a></li></ul><p>This article is part of a series on <a class=link href=../chrome-extension>building a maintainable Chrome extension</a>.</p><p>In the previous article, we
<a class=link href=../message-passing-in-chrome-extension>added TypeScript code for communicating between parts of a Chrome extension</a>.
This check-in will be our starting point for this article. This article will add linting and formatting to our
TypeScript code, which will help us catch errors and enforce a consistent code style for larger teams.</p><h2 id=what-is-linting><a href=#what-is-linting class=header-anchor></a>What is linting?</h2><p>Linting is the process of running a static code analysis program to analyze code for potential errors. Linters can catch
syntax errors, typos, and other common mistakes that can lead to bugs. They can also enforce coding standards, such as
indentation, variable naming, and other style rules.</p><h2 id=what-is-formatting><a href=#what-is-formatting class=header-anchor></a>What is formatting?</h2><p>Formatting automatically changes the code&rsquo;s appearance to match a specific style guide. Formatting tools can
automatically add or remove whitespace, change indentation, and reformat code to make it more readable. Formatting tools
can enforce a consistent code style across a project.</p><h2 id=why-use-linting-and-formatting-tools><a href=#why-use-linting-and-formatting-tools class=header-anchor></a>Why use linting and formatting tools?</h2><p>Linters and formatters work together to help developers write better code and accelerate the development process &ndash;
linters flag errors, while formatters automatically enforce a consistent code style.</p><p>Together, they can help prevent bugs, improve code quality, and make it easier for developers to read and understand the
code. The result is cleaner, more maintainable code that uses many coding best practices and is easier to work with.</p><p>Linting can also teach developers about best practices and help them avoid common pitfalls. For example, a linter can
flag misused promises, such as missing <code>await</code> or uncaught errors.</p><h2 id=setting-up-linting><a href=#setting-up-linting class=header-anchor></a>Setting up linting with ESLint and typescript-eslint</h2><p>To set up linting for TypeScript code, we will use <a class=link href=https://eslint.org/ target=_blank rel=noopener>ESLint</a> with the
<a class=link href=https://typescript-eslint.io/ target=_blank rel=noopener>typescript-eslint</a> plugin. ESLint is a popular linter that can analyze JavaScript and
TypeScript code. The typescript-eslint plugin adds TypeScript-specific rules to ESLint.</p><p>To set up ESLint with typescript-eslint, we need to install the following packages:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install --save-dev eslint @eslint/js @types/eslint__js typescript-eslint
</span></span></code></pre></div><p>Next, we need to create an ESLint configuration file. We will create an <code>eslint.config.mjs</code> file at the root of our
project:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// @ts-check
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>eslint</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@eslint/js&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>tseslint</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;typescript-eslint&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>config</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tseslint</span>.<span style=color:#a6e22e>config</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>eslint</span>.<span style=color:#a6e22e>configs</span>.<span style=color:#a6e22e>recommended</span>,
</span></span><span style=display:flex><span>    ...<span style=color:#a6e22e>tseslint</span>.<span style=color:#a6e22e>configs</span>.<span style=color:#a6e22e>recommendedTypeChecked</span>,
</span></span><span style=display:flex><span>    ...<span style=color:#a6e22e>tseslint</span>.<span style=color:#a6e22e>configs</span>.<span style=color:#a6e22e>stylisticTypeChecked</span>,
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ignores</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;dist/**/*&#34;</span>, <span style=color:#e6db74>&#34;eslint.config.mjs&#34;</span>],
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>languageOptions</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>parserOptions</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>project</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>tsconfigRootDir</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>import</span>.<span style=color:#a6e22e>meta</span>.<span style=color:#a6e22e>dirname</span>,
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>config</span>
</span></span></code></pre></div><p>This configuration file sets up ESLint with the recommended TypeScript type-checked rules and ignores our <code>dist</code>
directory containing the webpack-generated bundles. We also ignore the config file because we do not want to apply
TypeScript linting to it.</p><h3 id=why-use-the-mjs-instead-of-js><a href=#why-use-the-mjs-instead-of-js class=header-anchor></a>Why use the <code>.mjs</code> extension instead of <code>.js</code> for the configuration file?</h3><p>We are using <code>.mjs</code> extension for the configuration file to take advantage of ECMAScript modules. Using ES modules
allows us to import and export modules using the <code>import</code> and <code>export</code> keywords. There are other ways to enable
ECMAScript modules in JavaScript for our project, but this is the simplest way for just one JavaScript file. Our
TypeScript files already use ECMAScript modules via these included recommended <code>tsconfig.json</code> settings:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;compilerOptions&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;module&#34;</span>: <span style=color:#e6db74>&#34;commonjs&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;esModuleInterop&#34;</span>: <span style=color:#66d9ef>true</span>,
</span></span></code></pre></div><p>If we used <code>.js</code> extension for the configuration file, we would need to use <code>require</code> and <code>module.exports</code> syntax.
Otherwise, we would get an error like this:</p><pre tabindex=0><code>/Users/victor/work/create-chrome-extension/4-linting-and-formatting/eslint.config.js:3
import eslint from &#39;@eslint/js&#39;
^^^^^^

SyntaxError: Cannot use import statement outside a module
    at internalCompileFunction (node:internal/vm:77:18)
    at wrapSafe (node:internal/modules/cjs/loader:1288:20)
    at Module._compile (node:internal/modules/cjs/loader:1340:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1435:10)
    at Module.load (node:internal/modules/cjs/loader:1207:32)
    at Module._load (node:internal/modules/cjs/loader:1023:12)
    at cjsLoader (node:internal/modules/esm/translators:356:17)
    at ModuleWrap.&lt;anonymous&gt; (node:internal/modules/esm/translators:305:7)
    at ModuleJob.run (node:internal/modules/esm/module_job:218:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:329:24)
</code></pre><h2 id=running-eslint><a href=#running-eslint class=header-anchor></a>Running ESLint</h2><p>We can run ESLint from the command line using the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./node_modules/.bin/eslint .
</span></span></code></pre></div><p>Alternatively, we can use <code>npx</code>, which is a package runner tool that comes with npm:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npx eslint .
</span></span></code></pre></div><p>This command will run ESLint on all TypeScript files in the current directory and subdirectories. ESLint will output any
errors or warnings it finds in the code, such as:</p><pre tabindex=0><code>/Users/victor/work/create-chrome-extension/4-linting-and-formatting/src/background.ts
  14:17  error  Unsafe member access .enabled on an `any` value  @typescript-eslint/no-unsafe-member-access

/Users/victor/work/create-chrome-extension/4-linting-and-formatting/src/content.ts
  51:9   error  Unsafe assignment of an `any` value              @typescript-eslint/no-unsafe-assignment
  74:17  error  Unsafe member access .enabled on an `any` value  @typescript-eslint/no-unsafe-member-access
  76:9   error  Unsafe assignment of an `any` value              @typescript-eslint/no-unsafe-assignment
  76:27  error  Unsafe member access .enabled on an `any` value  @typescript-eslint/no-unsafe-member-access

/Users/victor/work/create-chrome-extension/4-linting-and-formatting/src/popup.ts
   9:23  error  Unsafe argument of type `any` assigned to a parameter of type `boolean`  @typescript-eslint/no-unsafe-argument
  11:37  error  Promise returned in function argument where a void return was expected   @typescript-eslint/no-misused-promises
  23:34  error  Unsafe member access .title on an `any` value                            @typescript-eslint/no-unsafe-member-access
  23:50  error  Unsafe member access .url on an `any` value                              @typescript-eslint/no-unsafe-member-access
  43:5   error  Unsafe assignment of an `any` value                                      @typescript-eslint/no-unsafe-assignment

✖ 10 problems (10 errors, 0 warnings)
</code></pre><p>At this point, we should fix the errors and warnings that ESLint has found in our code.</p><p>We can also update the <code>scripts</code> section of our <code>package.json</code> file to run ESLint with <code>npm run</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>  <span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;lint&#34;</span>: <span style=color:#e6db74>&#34;eslint .&#34;</span>,
</span></span></code></pre></div><p>Now we can run ESLint with the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm run lint
</span></span></code></pre></div><h2 id=setting-up-formatting><a href=#setting-up-formatting class=header-anchor></a>Setting up formatting with Prettier</h2><p>To format TypeScript code, we will use <a class=link href=https://prettier.io/ target=_blank rel=noopener>Prettier</a>. Prettier is a popular code formatter that
automatically formats code to match a specific style guide.</p><p>To set up Prettier, we need to install the following package:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install --save-dev --save-exact prettier
</span></span></code></pre></div><p>Next, create a <code>.prettierignore</code> file in the root of our project to ignore the <code>dist</code> directory:</p><pre tabindex=0><code>/dist
</code></pre><p>By default, Prettier ignores the <code>node_modules</code> directory.</p><p>Next, create a <code>.prettierrc</code> file in the root of our project to configure Prettier:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;semi&#34;</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We will use the default Prettier settings but turn off the <code>semi</code> rule to remove semicolons from the end of TypeScript
lines. Removing semicolons is a common style choice in modern JavaScript and TypeScript code.</p><h2 id=running-prettier><a href=#running-prettier class=header-anchor></a>Running Prettier</h2><p>We can run Prettier from the command line using the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npx prettier --write .
</span></span></code></pre></div><p>This command will format all eligible files in the current directory and subdirectories.</p><p>We can also update the <code>scripts</code> section of our <code>package.json</code> file to run Prettier with the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>  <span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;format&#34;</span>: <span style=color:#e6db74>&#34;prettier --write .&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;format-check&#34;</span>: <span style=color:#e6db74>&#34;prettier --check .&#34;</span>,
</span></span></code></pre></div><p><code>npm run format</code> will format all eligible files, while <code>npm run format-check</code> will check if the files are formatted.</p><h2 id=adding-linting-and-formatting-to-ci><a href=#adding-linting-and-formatting-to-ci class=header-anchor></a>Adding linting and formatting to continuous integration (CI)</h2><p>We will use GitHub Actions to automate linting and formatting checks on every pull request and commit to our main
branch. This will make sure all code changes are linted and formatted correctly on the main branch.</p><p>This automatic check means that all contributors can expect that the code they are working on uses a consistent style
and meets a quality standard. Consistency is beneficial for open-source projects where contributors may not be familiar
with the codebase.</p><p>To set up GitHub Actions, create a <code>.github/workflows/lint-and-format.yml</code> file in the root of our git repository:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Lint check, format check, and build</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>main</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>paths</span>: <span style=color:#75715e># We only run the workflow if the code in these files/directories changes</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#39;.github/workflows/lint-and-format.yml&#39;</span> <span style=color:#75715e># This file</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#39;4-linting-and-formatting/**&#39;</span> <span style=color:#75715e># The working directory for this article</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pull_request</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#39;.github/workflows/lint-and-format.yml&#39;</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#39;4-linting-and-formatting/**&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># This allows a subsequently queued workflow run to interrupt previous runs</span>
</span></span><span style=display:flex><span><span style=color:#f92672>concurrency</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>group</span>: <span style=color:#ae81ff>${{ github.workflow }}-${{ github.head_ref || github.run_id}}</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>cancel-in-progress</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>defaults</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>run</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>shell</span>: <span style=color:#ae81ff>bash</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>working-directory</span>: <span style=color:#ae81ff>./4-linting-and-formatting</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>permissions</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>contents</span>: <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>lint-format-build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Checkout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Install dependencies</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          npm install --no-save</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Format check and lint</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          npm run format-check
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          npm run lint</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          npm run build</span>
</span></span></code></pre></div><p>Since our git repository is shared by multiple projects (from various articles), we use the <code>paths</code> key to only run the
workflow when the code in the <code>4-linting-and-formatting</code> directory changes.</p><p>After pushing our code to GitHub and waiting for the GitHub Actions workflow to run, we can see the results in the
Actions tab of our repository. We can see the linting and formatting checks, as well as the build step:</p><figure><img src=/posts/linting-and-formatting-typescript/github-lint-format-build-workflow-result.png alt="GitHub Actions workflow results"><figcaption><h4>GitHub Actions workflow results</h4></figcaption></figure><p>For more details on GitHub Actions workflows, see our article on
<a class=link href=../github-reusable-workflows-and-steps/>reusing GitHub Actions workflows and steps</a>.</p><h2 id=adding-stricter-linting-rules-to-typescript-eslint><a href=#adding-stricter-linting-rules-to-typescript-eslint class=header-anchor></a>Adding stricter linting rules to typescript-eslint</h2><p>The <code>recommended</code> ruleset is a good starting point for linting TypeScript code. However, we can add stricter rules to
catch even more potential issues in our code. It is easiest to start with strict rules early in the project when fixing
issues is relatively painless. Otherwise, it is a good idea to gradually add stricter rules to avoid overwhelming
developers with too many errors and warnings.</p><p>To switch to a stricter, more opinionated ruleset, replace <code>tseslint.configs.recommendedTypeChecked</code> with
<code>tseslint.configs.strictTypeChecked</code> in the <code>eslint.config.mjs</code> file.</p><p>ESLint rules can be configured or disabled using configuration comments in the code or the ESLint configuration file.
For more details, see the <a class=link href=https://eslint.org/docs/latest/use/configure/rules target=_blank rel=noopener>ESLint configure rules</a>.</p><h2 id=next-steps><a href=#next-steps class=header-anchor></a>Next steps</h2><p>In the next part of this series, we will
<a class=link href=../add-options-to-chrome-extension>add an options page to our Chrome extension</a>. This page will allow users to
configure the extension&rsquo;s behavior and settings.</p><h2 id=further-reading><a href=#further-reading class=header-anchor></a>Further reading</h2><ul><li>We recently wrote about <a class=link href=../staticcheck-go-linter/>enabling staticcheck linter in a large Go project</a></li></ul><h2 id=linting-and-formatting-typescript-code-on-github><a href=#linting-and-formatting-typescript-code-on-github class=header-anchor></a>Linting and formatting TypeScript code on GitHub</h2><p>The complete code is available on GitHub at:
<a class=link href=https://github.com/getvictor/create-chrome-extension/tree/main/4-linting-and-formatting target=_blank rel=noopener>https://github.com/getvictor/create-chrome-extension/tree/main/4-linting-and-formatting</a></p><h2 id=linting-and-formatting-typescript-video><a href=#linting-and-formatting-typescript-video class=header-anchor></a>Linting and formatting TypeScript video</h2><div class=video-wrapper><iframe loading=lazy src=https://www.youtube.com/embed/DHtwTkF0DOE allowfullscreen title="YouTube Video"></iframe></div><p><em>Note:</em> If you want to comment on this article, please do so on the YouTube video.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/chrome-extension/>Chrome Extension</a>
<a href=/tags/typescript/>TypeScript</a>
<a href=/tags/devtools/>DevTools</a>
<a href=/tags/linting/>Linting</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/posts/add-webpack-and-typescript-to-chrome-extension/><div class=article-image><img src=/posts/add-webpack-and-typescript-to-chrome-extension/chrome-typescript-webpack.999cb7a8afab1e22ed67547bb6cf53fe_hu_238b8abdf3b68f58.png width=250 height=150 loading=lazy alt="Featured image of post Add webpack and TypeScript to a Chrome extension (2024)" data-hash="md5-mZy3qK+rHiLtZ1R7ts9T/g=="></div><div class=article-details><h2 class=article-title>Add webpack and TypeScript to a Chrome extension (2024)</h2></div></a></article><article class=has-image><a href=/posts/chrome-extension/><div class=article-image><img src=/posts/chrome-extension/chrome-extension-headline.3273b29c8adcab44a403177e65c9cd3c_hu_5f3bf70a977d7f0b.png width=250 height=150 loading=lazy alt="Featured image of post Build a production-ready Chrome extension in 7 steps" data-hash="md5-MnOynIrcq0SkAxd+ZcnNPA=="></div><div class=article-details><h2 class=article-title>Build a production-ready Chrome extension in 7 steps</h2></div></a></article><article class=has-image><a href=/posts/message-passing-in-chrome-extension/><div class=article-image><img src=/posts/message-passing-in-chrome-extension/message-passing-headline.1b26b5630259df207857e0a8324254cf_hu_c5b6b1e3c04c77e6.png width=250 height=150 loading=lazy alt="Featured image of post Message passing in Chrome extension (2024)" data-hash="md5-Gya1YwJZ3yB4V+CoMkJUzw=="></div><div class=article-details><h2 class=article-title>Message passing in Chrome extension (2024)</h2></div></a></article><article class=has-image><a href=/posts/create-chrome-extension/><div class=article-image><img src=/posts/create-chrome-extension/chrome-extension-headline.3273b29c8adcab44a403177e65c9cd3c_hu_5f3bf70a977d7f0b.png width=250 height=150 loading=lazy alt="Featured image of post Create a Chrome extension from scratch step-by-step (2024)" data-hash="md5-MnOynIrcq0SkAxd+ZcnNPA=="></div><div class=article-details><h2 class=article-title>Create a Chrome extension from scratch step-by-step (2024)</h2></div></a></article><article class=has-image><a href=/posts/react-hello-world/><div class=article-image><img src=/posts/react-hello-world/react-hello-world.114df3ffe4eaca64d6317811b540bfb6_hu_678e4771a67d7880.png width=250 height=150 loading=lazy alt="Featured image of post Build a React app from scratch: getting started (2024)" data-hash="md5-EU3z/+TqymTWMXgRtUC/tg=="></div><div class=article-details><h2 class=article-title>Build a React app from scratch: getting started (2024)</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2025 Victor on Software</section><section class=powerby></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>