<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Scale your database using source-replica (master-slave) replication"><title>Create a MySQL replica database in 4 short steps (2025)</title><link rel=canonical href=https://victoronsoftware.com/posts/mysql-master-slave-replication/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="Create a MySQL replica database in 4 short steps (2025)"><meta property='og:description' content="Scale your database using source-replica (master-slave) replication"><meta property='og:url' content='https://victoronsoftware.com/posts/mysql-master-slave-replication/'><meta property='og:site_name' content='Victor on Software'><meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:tag' content='MySQL'><meta property='article:tag' content='Database Scaling'><meta property='article:published_time' content='2025-01-06T00:00:00+00:00'><meta property='article:modified_time' content='2025-01-06T00:00:00+00:00'><meta property='og:image' content='https://victoronsoftware.com/posts/mysql-master-slave-replication/mysql-master-slave-replication.png'><meta name=twitter:title content="Create a MySQL replica database in 4 short steps (2025)"><meta name=twitter:description content="Scale your database using source-replica (master-slave) replication"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://victoronsoftware.com/posts/mysql-master-slave-replication/mysql-master-slave-replication.png'><script async src="https://www.googletagmanager.com/gtag/js?id=G-1XV381YSQ8"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1XV381YSQ8")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_c8fdb37897842f49.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Victor on Software</a></h1><h2 class=site-description>Software engineering, security, and related topics</h2></div></header><ol class=menu-social><li><a href=https://fleetdm.com target=_blank title=Fleet rel=me><svg width="58.219mm" height="58.202mm" viewBox="0 0 58.219 58.202"><g stroke-width=".26458"><path d="m7.5963 14.823c3.954.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2053 7.1594 7.1594 7.1594z" fill="#63c740"/><path d="m29.075 14.823c3.9539.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.9541.0-7.1595 3.2053-7.1595 7.1594.0 3.954 3.2054 7.1594 7.1595 7.1594z" fill="#5cabdf"/><path d="m50.552 14.823c3.9542.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2052-7.1594-7.1594-7.1594-3.9539.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2054 7.1594 7.1594 7.1594z" fill="#d66c7b"/><path d="m7.5963 36.301c3.954.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.954.0-7.1594 3.2054-7.1594 7.1595.0 3.9539 3.2053 7.1594 7.1594 7.1594z" fill="#c98def"/><path d="m29.075 36.301c3.9539.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.9541.0-7.1595 3.2054-7.1595 7.1595.0 3.9539 3.2054 7.1594 7.1595 7.1594z" fill="#faa669"/><path d="m7.5963 57.779c3.954.0 7.1594-3.2052 7.1594-7.1594.0-3.9539-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2054-7.1594 7.1594.0 3.9542 3.2053 7.1594 7.1594 7.1594z" fill="#3aefc4"/></g></svg></a></li><li><a href=https://github.com/getvictor target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/lyuboslavsky/ target=_blank title=LinkedIn rel=me><svg width="16" height="16" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526.0 1.175.0h13.65C15.474.0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487.0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401m-1.2-8.212c.837.0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822.0-1.359.54-1.359 1.248.0.694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869.0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274.0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54.0 01.016-.025V6.169h-2.4c.03.678.0 7.225.0 7.225h2.4"/></svg></a></li><li><a href=http://www.youtube.com/@VictorOnSoftware target=_blank title=YouTube rel=me><svg height="800" width="800" id="Layer_1" viewBox="0 0 461.001 461.001"><g><path style="fill:#f61c0d" d="M365.257 67.393H95.744C42.866 67.393.0 110.259.0 163.137v134.728c0 52.878 42.866 95.744 95.744 95.744h269.513c52.878.0 95.744-42.866 95.744-95.744V163.137c0-52.878-42.866-95.744-95.744-95.744zM300.506 237.056l-126.06 60.123c-3.359 1.602-7.239-.847-7.239-4.568V168.607c0-3.774 3.982-6.22 7.348-4.514l126.06 63.881C304.363 229.873 304.298 235.248 300.506 237.056z"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/page/speaking/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 2m0 3a3 3 0 013-3h0a3 3 0 013 3v5a3 3 0 01-3 3h0a3 3 0 01-3-3z"/><path d="M5 10a7 7 0 0014 0"/><path d="M8 21h8"/><path d="M12 17v4"/></svg>
<span>Speaking</span></a></li><li><a href=/page/tools/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Software tools</span></a></li><li><a href=/page/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/page/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/posts/mysql-master-slave-replication/><img src=/posts/mysql-master-slave-replication/mysql-master-slave-replication_hu_243a5517fc2ed7ee.png srcset="/posts/mysql-master-slave-replication/mysql-master-slave-replication_hu_243a5517fc2ed7ee.png 800w, /posts/mysql-master-slave-replication/mysql-master-slave-replication_hu_f86b163b5918a5c9.png 1600w" width=800 height=419 loading=lazy alt="Featured image of post Create a MySQL replica database in 4 short steps (2025)"></a></div><div class=article-details><header class=article-category><a href=/categories/database-administration/>Database Administration</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/mysql-master-slave-replication/>Create a MySQL replica database in 4 short steps (2025)</a></h2><h3 class=article-subtitle>Scale your database using source-replica (master-slave) replication</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jan 06, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><h2 id=introduction><a href=#introduction class=header-anchor></a>Introduction</h2><p>In this article, we will create a MySQL replica database. A MySQL replica is a read-only copy of the primary database,
which is kept in sync with the main database using MySQL replication threads.</p><p>The steps we will follow are:</p><ol><li><a class=link href=#create-mysql-source-and-replica-databases>Spin up MySQL source and replica databases</a></li><li><a class=link href=#create-db-user-for-replication>Create a user for replication</a></li><li><a class=link href=#retrieve-source-binary-log-coordinates>Obtain source binary log coordinates</a></li><li><a class=link href=#configure-replica-and-start-replication>Configure replica DB and start replication</a></li></ol><p>To add a replica to an existing MySQL database, see the
<a class=link href=#copy-database-from-source-and-start-replication-manually>copy database from source and start replication manually</a>
section.</p><h2 id=terminology-master-slave-vs-source-replica><a href=#terminology-master-slave-vs-source-replica class=header-anchor></a>Terminology: master-slave vs source-replica</h2><p>In database replication, the terms master-slave and source-replica are used interchangeably. In recent MySQL versions,
the term source-replica is preferred over master-slave due to its more neutral connotation. Many keywords and variables
in MySQL have recently been renamed to use neutral terms. We will use the terms source and replica in this article.</p><h2 id=what-is-database-replication><a href=#what-is-database-replication class=header-anchor></a>What is database replication?</h2><p>Database replication is a process that allows data from one database server (the source) to be copied to one or more
database servers (replicas). Replication is asynchronous, meaning the replica instance does not need to be connected to
the source constantly. The replica can catch up with the source when either becomes available.</p><p>Database replicas are used for:</p><ul><li>Scaling read operations</li><li>High availability</li><li>Disaster recovery</li></ul><p>MySQL implements replication using the binary log. The source server writes changes to the binary log, and the replica
server reads it and applies the changes to its database.</p><h2 id=create-mysql-source-and-replica-databases><a href=#create-mysql-source-and-replica-databases class=header-anchor></a>Create MySQL source and replica databases</h2><p>We will use Docker to create the MySQL source and replica databases. We will use the
<a class=link href=https://hub.docker.com/_/mysql target=_blank rel=noopener>official MySQL Docker image</a>. The source database will run on port 3308, and the
replica database will run on port 3309. Both servers will have the database named <code>test</code>. We tested these instructions
on MySQL 8.0.36, MySQL 8.4.3, and MySQL 9.1.0.</p><p>We run <code>docker compose up</code> using the following <code>docker-compose.yml</code> file:</p><script type=application/javascript src=https://gist.github.com/getvictor/92ce5a8541ce27a1ea36f9eb7feb0344.js></script><h2 id=create-db-user-for-replication><a href=#create-db-user-for-replication class=header-anchor></a>Create a DB user for replication</h2><p>Replication in MySQL requires a user with the
<a class=link href=https://dev.mysql.com/doc/refman/8.4/en/privileges-provided.html#priv_replication-slave target=_blank rel=noopener><code>REPLICATION SLAVE</code></a>
privilege. We will create a user named <code>replicator</code> with the password <code>rotacilper</code>.</p><p>Connect to the source database using the MySQL client:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mysql --host 127.0.0.1 --port <span style=color:#ae81ff>3308</span> -uroot -ptoor
</span></span></code></pre></div><p>Create the <code>replicator</code> user and grant the <code>REPLICATION SLAVE</code> privilege:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;replicator&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;rotacilper&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>GRANT</span> REPLICATION SLAVE <span style=color:#66d9ef>ON</span> <span style=color:#f92672>*</span>.<span style=color:#f92672>*</span> <span style=color:#66d9ef>TO</span> <span style=color:#e6db74>&#39;replicator&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span>;
</span></span><span style=display:flex><span>FLUSH <span style=color:#66d9ef>PRIVILEGES</span>;
</span></span></code></pre></div><h2 id=retrieve-source-binary-log-coordinates><a href=#retrieve-source-binary-log-coordinates class=header-anchor></a>Retrieve source binary log coordinates</h2><p>For the replica server to start replication, it needs to know the source&rsquo;s binary log file and position. We can obtain
this information using the MySQL client we opened in the previous step.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SHOW</span> BINARY LOG STATUS;
</span></span></code></pre></div><p>In MySQL 8.0, use the <code>SHOW MASTER STATUS</code> command instead of <code>SHOW BINARY LOG STATUS</code>.</p><p>The output will look like this:</p><pre tabindex=0><code>+------------+----------+--------------+------------------+-------------------+
| File       | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |
+------------+----------+--------------+------------------+-------------------+
| bin.000003 |      862 |              |                  |                   |
+------------+----------+--------------+------------------+-------------------+
1 row in set (0.01 sec)
</code></pre><p>We must remember the <code>File</code> and <code>Position</code> values for the next step.</p><h2 id=configure-replica-and-start-replication><a href=#configure-replica-and-start-replication class=header-anchor></a>Configure replica DB and start replication</h2><p>Now, we will connect to the replica database and configure it to replicate from the source database.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mysql --host 127.0.0.1 --port <span style=color:#ae81ff>3309</span> -uroot -ptoor
</span></span></code></pre></div><p>Use the <code>CHANGE REPLICATION SOURCE TO</code> command to configure the replica to replicate from the source. Replace
<code>SOURCE_LOG_FILE</code> and <code>SOURCE_LOG_POS</code> with the values obtained in the previous step.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>CHANGE REPLICATION <span style=color:#66d9ef>SOURCE</span> <span style=color:#66d9ef>TO</span>
</span></span><span style=display:flex><span>  SOURCE_HOST<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;mysql_source&#39;</span>,
</span></span><span style=display:flex><span>  SOURCE_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>3306</span>,
</span></span><span style=display:flex><span>  SOURCE_USER<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;replicator&#39;</span>,
</span></span><span style=display:flex><span>  SOURCE_PASSWORD<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;rotacilper&#39;</span>,
</span></span><span style=display:flex><span>  SOURCE_LOG_FILE<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;bin.000003&#39;</span>,
</span></span><span style=display:flex><span>  SOURCE_LOG_POS<span style=color:#f92672>=</span><span style=color:#ae81ff>862</span>,
</span></span><span style=display:flex><span>  GET_SOURCE_PUBLIC_KEY<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>;
</span></span></code></pre></div><p><code>SOURCE_HOST</code> is the primary source&rsquo;s hostname, which matches the docker service name. The <code>GET_SOURCE_PUBLIC_KEY</code>
option is needed for <code>caching_sha2_password</code> authentication.</p><p>Finally, start the replica:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>START</span> REPLICA;
</span></span></code></pre></div><p>The replica will now start cloning data from the source database. You can check the replication status using the
<code>SHOW REPLICA STATUS\G</code> command. Use this command to check for errors if you suspect something is wrong.</p><p>We can create a table with data on the source database and check if it is replicated to the replica database:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>USE test;
</span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> users (id INT <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>, name VARCHAR(<span style=color:#ae81ff>255</span>));
</span></span><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> users <span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#39;Alice&#39;</span>);
</span></span></code></pre></div><h2 id=restore-replication-after-an-issue><a href=#restore-replication-after-an-issue class=header-anchor></a>Restore replication after an issue</h2><p>If the replica crashes and comes back up, it may be unable to resume replication from where it left off. If the replica
stops replicating due to an error, first try to restart replication on the replica:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>STOP REPLICA;
</span></span><span style=display:flex><span><span style=color:#66d9ef>START</span> REPLICA;
</span></span></code></pre></div><p>Check the replication status for errors using the <code>SHOW REPLICA STATUS\G</code> command.</p><p>If the replica still does not replicate, we need to copy the database from the source and restart replication manually.</p><h3 id=copy-database-from-source-and-start-replication-manually><a href=#copy-database-from-source-and-start-replication-manually class=header-anchor></a>Copy database from source and start replication manually</h3><p>Reset the replica:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>STOP REPLICA;
</span></span><span style=display:flex><span><span style=color:#66d9ef>RESET</span> REPLICA <span style=color:#66d9ef>ALL</span>;
</span></span></code></pre></div><p>Optionally, drop and recreate the database on the replica:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>DATABASE</span> test;
</span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> test;
</span></span></code></pre></div><p>If the source database still has the binary log files around from the first time we set up replication, we can redo the
original steps using the same source log file and position. If not, we need to back up the source database and restore
it on the replica.</p><p>Backup the source database (on port 3308 with database name <code>test</code>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>bash <span style=color:#f92672>-</span><span style=color:#66d9ef>c</span> <span style=color:#e6db74>&#39;mysqldump --host 127.0.0.1 --port 3308 -uroot -ptoor test | gzip -&#39;</span> <span style=color:#f92672>&gt;</span> backup.<span style=color:#66d9ef>sql</span>.gz
</span></span></code></pre></div><p>Restore the backup on the replica database (on port 3309):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>bash <span style=color:#f92672>-</span><span style=color:#66d9ef>c</span> <span style=color:#e6db74>&#39;gzip -dc - | mysql --host 127.0.0.1 --port 3308 -uroot -ptoor test&#39;</span> <span style=color:#f92672>&lt;</span> backup.<span style=color:#66d9ef>sql</span>.gz
</span></span></code></pre></div><p>Now, redo the following steps from above:</p><ul><li><a class=link href=#retrieve-source-binary-log-coordinates>Obtain source binary log coordinates</a></li><li><a class=link href=#configure-replica-and-start-replication>Configure replica DB and start replication</a></li></ul><p>As you can see, restarting replication after an issue can be more involved than just restarting the replica. Regular
backups can help in such situations. When backing up the source database, make sure to include the binary log files,
along with the corresponding binary log position. You can then use these files to restore or spin up a new replica while
the source database is actively running.</p><h2 id=further-reading-on-database-scaling><a href=#further-reading-on-database-scaling class=header-anchor></a>Further reading on database scaling</h2><ul><li>Recently, we wrote about <a class=link href=../database-gotchas-when-scaling-apps>database gotchas when scaling applications</a>. One of
the issues we summarized was
<a class=link href=../mysql-query-performance-insert-subqueries>optimizing a MySQL INSERT with subqueries</a>.</li><li>In the past, we encountered a
<a class=link href=../sql-prepared-statements-are-broken-when-scaling-applications>memory issue with MySQL prepared statements when scaling applications</a>.</li><li>We also wrote about <a class=link href=../secure-mysql-docker>securing your MySQL Docker container for Zero Trust</a>.</li></ul><h2 id=follow-along-with-the-mysql-source-replica-video><a href=#follow-along-with-the-mysql-source-replica-video class=header-anchor></a>Follow along with the MySQL source-replica video</h2><div class=video-wrapper><iframe loading=lazy src=https://www.youtube.com/embed/mpCeatW4t_U allowfullscreen title="YouTube Video"></iframe></div><p><em>Note:</em> If you want to comment on this article, please do so on the YouTube video.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/mysql/>MySQL</a>
<a href=/tags/database-scaling/>Database Scaling</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/posts/database-gotchas-when-scaling-apps/><div class=article-image><img src=/posts/database-gotchas-when-scaling-apps/database-thumbnail.d58a33e60a8b96a8d5526e99cbf44dd3_hu_aab40f0a18342334.png width=250 height=150 loading=lazy alt="Featured image of post 3 database gotchas when building apps for scale" data-hash="md5-1Yoz5gqLlqjVUm6Zy/RN0w=="></div><div class=article-details><h2 class=article-title>3 database gotchas when building apps for scale</h2></div></a></article><article class=has-image><a href=/posts/secure-mysql-docker/><div class=article-image><img src=/posts/secure-mysql-docker/mysql-docker-headline.a1f1fa8949963d81dd806c2fd3b9112b_hu_5ab15d022edc7fca.png width=250 height=150 loading=lazy alt="Featured image of post How to secure MySQL Docker container for Zero Trust" data-hash="md5-ofH6iUmWPYHdgGwv07kRKw=="></div><div class=article-details><h2 class=article-title>How to secure MySQL Docker container for Zero Trust</h2></div></a></article><article class=has-image><a href=/posts/mysql-query-performance-insert-subqueries/><div class=article-image><img src=/posts/mysql-query-performance-insert-subqueries/INSERT%20with%20subqueries.d07521c1694343feb0991bd8dc4fb2e9_hu_49681b731d48cb4a.png width=250 height=150 loading=lazy alt="Featured image of post Optimize MySQL query performance: INSERT with subqueries" data-hash="md5-0HUhwWlDQ/6wmRvY3E+y6Q=="></div><div class=article-details><h2 class=article-title>Optimize MySQL query performance: INSERT with subqueries</h2></div></a></article><article class=has-image><a href=/posts/mysql-upsert-deadlock/><div class=article-image><img src=/posts/mysql-upsert-deadlock/MySQL%20deadlock.65122d6e99ece24b1e1751637f018a80_hu_b1ad4f781e78932a.png width=250 height=150 loading=lazy alt="Featured image of post MySQL deadlock on UPDATE/INSERT upsert pattern" data-hash="md5-ZRItbpns4kseF1FjfwGKgA=="></div><div class=article-details><h2 class=article-title>MySQL deadlock on UPDATE/INSERT upsert pattern</h2></div></a></article><article class=has-image><a href=/posts/unicode-and-emoji-gotchas/><div class=article-image><img src=/posts/unicode-and-emoji-gotchas/unicode-emoji.eb9b662f2aff344a37b3e21005ad1a14_hu_4d0df9504a254a4e.png width=250 height=150 loading=lazy alt="Featured image of post Fully supporting Unicode and emojis in your app" data-hash="md5-65tmLyr/NEo3s+IQBa0aFA=="></div><div class=article-details><h2 class=article-title>Fully supporting Unicode and emojis in your app</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2025 Victor on Software</section><section class=powerby></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>