<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Trigger an action from a webhook callback with Tines"><title>Building a webhook flow with Tines</title><link rel=canonical href=https://victoronsoftware.com/posts/webhook-flow-with-tines/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="Building a webhook flow with Tines"><meta property='og:description' content="Trigger an action from a webhook callback with Tines"><meta property='og:url' content='https://victoronsoftware.com/posts/webhook-flow-with-tines/'><meta property='og:site_name' content='Victor on Software'><meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:tag' content='Webhook'><meta property='article:tag' content='Tines'><meta property='article:tag' content='MDM'><meta property='article:tag' content='Fleet'><meta property='article:published_time' content='2024-06-05T00:00:00+00:00'><meta property='article:modified_time' content='2024-06-05T00:00:00+00:00'><meta property='og:image' content='https://victoronsoftware.com/posts/webhook-flow-with-tines/tines-fleet-webhook-workflow.png'><meta name=twitter:title content="Building a webhook flow with Tines"><meta name=twitter:description content="Trigger an action from a webhook callback with Tines"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://victoronsoftware.com/posts/webhook-flow-with-tines/tines-fleet-webhook-workflow.png'><script async src="https://www.googletagmanager.com/gtag/js?id=G-1XV381YSQ8"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1XV381YSQ8")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_c8fdb37897842f49.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Victor on Software</a></h1><h2 class=site-description>Software engineering, security, and related topics</h2></div></header><ol class=menu-social><li><a href=https://fleetdm.com target=_blank title=Fleet rel=me><svg width="58.219mm" height="58.202mm" viewBox="0 0 58.219 58.202"><g stroke-width=".26458"><path d="m7.5963 14.823c3.954.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2053 7.1594 7.1594 7.1594z" fill="#63c740"/><path d="m29.075 14.823c3.9539.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2054-7.1594-7.1594-7.1594-3.9541.0-7.1595 3.2053-7.1595 7.1594.0 3.954 3.2054 7.1594 7.1595 7.1594z" fill="#5cabdf"/><path d="m50.552 14.823c3.9542.0 7.1594-3.2053 7.1594-7.1594.0-3.954-3.2052-7.1594-7.1594-7.1594-3.9539.0-7.1594 3.2053-7.1594 7.1594.0 3.954 3.2054 7.1594 7.1594 7.1594z" fill="#d66c7b"/><path d="m7.5963 36.301c3.954.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.954.0-7.1594 3.2054-7.1594 7.1595.0 3.9539 3.2053 7.1594 7.1594 7.1594z" fill="#c98def"/><path d="m29.075 36.301c3.9539.0 7.1594-3.2054 7.1594-7.1594.0-3.9541-3.2054-7.1595-7.1594-7.1595-3.9541.0-7.1595 3.2054-7.1595 7.1595.0 3.9539 3.2054 7.1594 7.1595 7.1594z" fill="#faa669"/><path d="m7.5963 57.779c3.954.0 7.1594-3.2052 7.1594-7.1594.0-3.9539-3.2054-7.1594-7.1594-7.1594-3.954.0-7.1594 3.2054-7.1594 7.1594.0 3.9542 3.2053 7.1594 7.1594 7.1594z" fill="#3aefc4"/></g></svg></a></li><li><a href=https://github.com/getvictor target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/lyuboslavsky/ target=_blank title=LinkedIn rel=me><svg width="16" height="16" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526.0 1.175.0h13.65C15.474.0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487.0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401m-1.2-8.212c.837.0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822.0-1.359.54-1.359 1.248.0.694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869.0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274.0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54.0 01.016-.025V6.169h-2.4c.03.678.0 7.225.0 7.225h2.4"/></svg></a></li><li><a href=http://www.youtube.com/@VictorOnSoftware target=_blank title=YouTube rel=me><svg height="800" width="800" id="Layer_1" viewBox="0 0 461.001 461.001"><g><path style="fill:#f61c0d" d="M365.257 67.393H95.744C42.866 67.393.0 110.259.0 163.137v134.728c0 52.878 42.866 95.744 95.744 95.744h269.513c52.878.0 95.744-42.866 95.744-95.744V163.137c0-52.878-42.866-95.744-95.744-95.744zM300.506 237.056l-126.06 60.123c-3.359 1.602-7.239-.847-7.239-4.568V168.607c0-3.774 3.982-6.22 7.348-4.514l126.06 63.881C304.363 229.873 304.298 235.248 300.506 237.056z"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/page/tools/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Software tools</span></a></li><li><a href=/page/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/page/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/posts/webhook-flow-with-tines/><img src=/posts/webhook-flow-with-tines/tines-fleet-webhook-workflow_hu_72e80e5e47f285c0.png srcset="/posts/webhook-flow-with-tines/tines-fleet-webhook-workflow_hu_72e80e5e47f285c0.png 800w, /posts/webhook-flow-with-tines/tines-fleet-webhook-workflow_hu_827434c5cc49ace8.png 1600w" width=800 height=450 loading=lazy alt="Featured image of post Building a webhook flow with Tines"></a></div><div class=article-details><header class=article-category><a href=/categories/devops--infrastructure/>DevOps & Infrastructure</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/webhook-flow-with-tines/>Building a webhook flow with Tines</a></h2><h3 class=article-subtitle>Trigger an action from a webhook callback with Tines</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jun 05, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><h2 id=what-is-a-webhook><a href=#what-is-a-webhook class=header-anchor></a>What is a webhook?</h2><p>A webhook is a way for one application to send data to another application in real time. It is a simple way to trigger
an action based on an event. In other words, a webhook is a custom HTTP callback.</p><h2 id=what-is-tines><a href=#what-is-tines class=header-anchor></a>What is Tines?</h2><p><a class=link href=https://www.tines.io/ target=_blank rel=noopener>Tines</a> is a no-code automation platform that allows you to automate repetitive tasks. It is a
powerful tool that can be used to automate workflows, such as sending emails, creating tickets, and updating databases.</p><h2 id=what-is-fleet><a href=#what-is-fleet class=header-anchor></a>What is Fleet?</h2><p><a class=link href=https://fleetdm.com/ target=_blank rel=noopener>Fleet</a> is an open-source platform for managing and gathering telemetry from devices such as
laptops, desktops, VMs, etc. <a class=link href=https://www.osquery.io/ target=_blank rel=noopener>Osquery</a> agents run on these devices and report to the Fleet
server.</p><h2 id=our-example-it-workflow><a href=#our-example-it-workflow class=header-anchor></a>Our example IT workflow</h2><p>In this article, we will build a webhook flow with Tines. When a device has an outdated OS version, Tines will receive a
webhook callback from Fleet. Tines will then send an MDM (Mobile Device Management) command to the device to update the
device&rsquo;s OS version.</p><p>Fleet will send a callback via its calendar integration feature. Fleet can put a &ldquo;System Maintenance&rdquo; event on the
device user&rsquo;s calendar. This event warns the device owner that their computer will be restarted to remediate one or more
failing policies. During the calendar event time, Fleet sends a webhook. The IT admin must set up a flow to remediate
the failing policy. This article is an example of one such flow.</p><h2 id=getting-started--webhook-action><a href=#getting-started--webhook-action class=header-anchor></a>Getting started &ndash; webhook action</h2><p>First, we create a new Tines story. A story is a sequence of actions that are executed in order. Next, we add a webhook
action to the story. The webhook action listens for incoming webhooks. The webhook will contain a JSON body.</p><figure><img src=/posts/webhook-flow-with-tines/1-tines-webhook.png alt="Tines webhook action"><figcaption><h4>Tines webhook action</h4></figcaption></figure><h2 id=handling-errors><a href=#handling-errors class=header-anchor></a>Handling errors</h2><p>Often, webhooks may contain error messages if there is an issue with the configuration, flow, etc. In this example, we
add a trigger action that checks whether the webhook body contains an error. Specifically, our action checks whether the
webhook body contains a non-empty &ldquo;error&rdquo; field.</p><figure><img src=/posts/webhook-flow-with-tines/2-tines-error-handling.png alt="Tines trigger action checking for an error"><figcaption><h4>Tines trigger action checking for an error</h4></figcaption></figure><p>We leave this error-handling portion of the story as a stub. In the future, we can expand it by sending an email or
triggering other actions.</p><h2 id=checking-whether-webhook-indicates-an-outdated-os><a href=#checking-whether-webhook-indicates-an-outdated-os class=header-anchor></a>Checking whether webhook indicates an outdated OS</h2><p>At the same time, we also check whether the webhook was triggered by a policy indicating an outdated OS. From previous
testing, we know that the webhook payload will look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2024-03-28T13:57:31.668954-05:00&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;host_id&#34;</span>: <span style=color:#ae81ff>11058</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;host_display_name&#34;</span>: <span style=color:#e6db74>&#34;Victor&#39;s Virtual Machine (2)&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;host_serial_number&#34;</span>: <span style=color:#e6db74>&#34;Z5C4L7GKY0&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;failing_policies&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#ae81ff>479</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;macOS - OS version up to date&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The payload contains:</p><ul><li>The device&rsquo;s ID (host ID).</li><li>Display name.</li><li>Serial number.</li><li>A list of failing policies.</li></ul><p>We are interested in the failing policies. When one of the failing policies contains a policy named &ldquo;macOS - OS version
up to date,&rdquo; we know that the device&rsquo;s OS is outdated. Hence, we create a trigger that looks for this policy.</p><figure><img src=/posts/webhook-flow-with-tines/3-tines-os-version-trigger.png alt="Tines trigger action checking for an outdated OS"><figcaption><h4>Tines trigger action checking for an outdated OS</h4></figcaption></figure><p>We use the following formula, which loops over all policies and will only allow the workflow to proceed if true:</p><pre tabindex=0><code>IF(FIND(calendar_webhook.body.failing_policies, LAMBDA(item, item.name = &#34;macOS - OS version up to date&#34;)).id &gt; 0, TRUE)
</code></pre><h2 id=getting-device-details-from-fleet><a href=#getting-device-details-from-fleet class=header-anchor></a>Getting device details from Fleet</h2><p>Next, we need to get more details about the device from Fleet. Devices are called hosts in Fleet. We add an &ldquo;HTTP
Request&rdquo; action to the story. The action makes a GET request to the Fleet API to get the device details. We use the host
ID from the webhook payload. We are looking for the device&rsquo;s UUID, which we need to send the OS update MDM command.</p><figure><img src=/posts/webhook-flow-with-tines/4-tines-get-host-request.png alt="Tines HTTP Request action to get Fleet device details"><figcaption><h4>Tines HTTP Request action to get Fleet device details</h4></figcaption></figure><p>To access Fleet&rsquo;s API, we need to provide an API key. We store the API key as a CREDENTIAL in the current story. The API
key should belong to an API-only user in Fleet so that the key does not reset when the user logs out.</p><figure><img src=/posts/webhook-flow-with-tines/5-tines-credential.png alt="Add credential to Tines story"><figcaption><h4>Add credential to Tines story</h4></figcaption></figure><h2 id=creating-mdm-command-payload-to-update-os-version><a href=#creating-mdm-command-payload-to-update-os-version class=header-anchor></a>Creating MDM command payload to update OS version</h2><p>We can create the MDM payload now that we have the device&rsquo;s UUID. The payload contains the command to update the OS
version. We use the
<a class=link href="https://developer.apple.com/documentation/devicemanagement/schedule_an_os_update?language=objc" target=_blank rel=noopener>ScheduleOSUpdate</a>
command from Apple&rsquo;s MDM protocol.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE plist PUBLIC &#34;-//Apple//DTD PLIST 1.0//EN&#34; &#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd&#34;&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;plist</span> <span style=color:#a6e22e>version=</span><span style=color:#e6db74>&#34;1.0&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dict&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;key&gt;</span>Command<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dict&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;key&gt;</span>RequestType<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;string&gt;</span>ScheduleOSUpdate<span style=color:#f92672>&lt;/string&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;key&gt;</span>Updates<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;array&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;dict&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;key&gt;</span>InstallAction<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;string&gt;</span>InstallASAP<span style=color:#f92672>&lt;/string&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;key&gt;</span>ProductVersion<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;string&gt;</span>14.4.1<span style=color:#f92672>&lt;/string&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/dict&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/array&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dict&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;key&gt;</span>CommandUUID<span style=color:#f92672>&lt;/key&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;string&gt;</span><span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#f92672>&lt;UUID</span><span style=color:#960050;background-color:#1e0010>()</span><span style=color:#f92672>&gt;</span>&gt;<span style=color:#f92672>&lt;/string&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dict&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/plist&gt;</span>
</span></span></code></pre></div><p>This command will download macOS 14.4.1, install it, and pop up a 60-second countdown dialog box before restarting the
device. Note that the <code>&lt;&lt;UUID()>></code> Tines function creates a unique UUID for this MDM command.</p><figure><img src=/posts/webhook-flow-with-tines/6-tines-create-mdm-command.png alt="Tines event to create ScheduleOSUpdate MDM command"><figcaption><h4>Tines event to create ScheduleOSUpdate MDM command</h4></figcaption></figure><p>The Fleet API requires the command to be sent as a base64-encoded string. We add a &ldquo;Base64 Encode&rdquo; action to the story
to encode the XML payload. It uses the Tines <code>BASE64_ENCODE</code> function.</p><figure><img src=/posts/webhook-flow-with-tines/7-tines-base64-encode.png alt="Tines Base64 Encode event"><figcaption><h4>Tines Base64 Encode event</h4></figcaption></figure><h2 id=run-mdm-command-on-device><a href=#run-mdm-command-on-device class=header-anchor></a>Run MDM command on device</h2><p>Finally, we send the MDM command to the device. We add another &ldquo;HTTP Request&rdquo; action to the story. The action makes a
POST request to the Fleet API to send the MDM command to the device.</p><figure><img src=/posts/webhook-flow-with-tines/8-tines-run-mdm-command.png alt="Tines HTTP Request action to run MDM command on device"><figcaption><h4>Tines HTTP Request action to run MDM command on device</h4></figcaption></figure><p>The MDM command will run on the device, downloading and installing the OS update.</p><figure><img src=/posts/webhook-flow-with-tines/9-macos-device-restart.png alt="macOS restart notification after OS update"><figcaption><h4>macOS restart notification after OS update</h4></figcaption></figure><h2 id=conclusion><a href=#conclusion class=header-anchor></a>Conclusion</h2><p>In this article we built a webhook flow with Tines. We received a webhook callback from Fleet when a device had an
outdated OS version. We then sent an MDM command to the device to update the OS version. This example demonstrates how
Tines can automate workflows and tasks in IT environments.</p><h2 id=further-reading><a href=#further-reading class=header-anchor></a>Further reading</h2><ul><li>Recently, we explained
<a class=link href=../google-sheets-api/>how to quickly get started with Google Sheets API for your development scripts</a>.</li></ul><h2 id=building-a-webhook-flow-with-tines-video><a href=#building-a-webhook-flow-with-tines-video class=header-anchor></a>Building a webhook flow with Tines video</h2><div class=video-wrapper><iframe loading=lazy src=https://www.youtube.com/embed/GFqmvv4nHqk allowfullscreen title="YouTube Video"></iframe></div><p><em>Note:</em> If you want to comment on this article, please do so on the YouTube video.</p><p><em>This article originally appeared in
<a class=link href=https://fleetdm.com/guides/building-webhook-flows-with-fleet-and-tines target=_blank rel=noopener>Fleet&rsquo;s blog</a>.</em></p></section><footer class=article-footer><section class=article-tags><a href=/tags/webhook/>Webhook</a>
<a href=/tags/tines/>Tines</a>
<a href=/tags/mdm/>MDM</a>
<a href=/tags/fleet/>Fleet</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/posts/understanding-the-intricacies-of-fleet-policies/><div class=article-image><img src=/posts/understanding-the-intricacies-of-fleet-policies/understanding-the-intricacies-of-fleet-policies-main-policies-page-1999x978@2x.64cab4669deb2ae3cfcd074df178d0df_hu_86f73cc596f47b16.png width=250 height=150 loading=lazy alt="Featured image of post Understanding the intricacies of Fleet policies" data-hash="md5-ZMq0Zp3rKuPPzQdN8XjQ3w=="></div><div class=article-details><h2 class=article-title>Understanding the intricacies of Fleet policies</h2></div></a></article><article class=has-image><a href=/posts/get-current-telemetry-from-your-devices-with-live-queries/><div class=article-image><img src=/posts/get-current-telemetry-from-your-devices-with-live-queries/Live%20Query.b807967d303d64ce866304609285050a_hu_37717f2aa80e8b30.png width=250 height=150 loading=lazy alt="Featured image of post Get current telemetry from your devices with live queries" data-hash="md5-uAeWfTA9ZM6GYwRgkoUFCg=="></div><div class=article-details><h2 class=article-title>Get current telemetry from your devices with live queries</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2025 Victor on Software</section><section class=powerby></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>